^1565407778628
@
sname
shell
stext
label:xworker.swt.actions.prototypes.CreateFileDialog/@resources/@I18nResource/@title
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
false
sMAX
false
sBORDER
false
sRESIZE
false
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
-1
sheight
-1
scenterScreen
true
spack
true
smaximized
false
sfullScreen
false
sdesign
true
sisIde
false
sdesignDefaultOpen
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
slabel
CreateFileDialog
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.widgets.Shell
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
  @/@resources
  sname
  resources
  sdescriptors
  xworker.swt.Widgets/@Resource
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  resources
    @/@resources/@I18nResource
    sname
    I18nResource
    sdescriptors
    xworker.swt.util.Resource/@I18nResource
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    I18nResource
      @/@resources/@I18nResource/@title
      sname
      title
      slabel
      创建文件
      sen_label
      New File
      sdescriptors
      xworker.lang.util.I18nResource/@resource
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      title
      @/@resources/@I18nResource/@newFileName
      sname
      newFileName
      slabel
      新文件名：
      sen_label
      New file name:
      sdescriptors
      xworker.lang.util.I18nResource/@resource
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      newFileName
      @/@resources/@I18nResource/@okButton
      sname
      okButton
      slabel
      确定
      sen_label
      Ok
      sdescriptors
      xworker.lang.util.I18nResource/@resource
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      okButton
      @/@resources/@I18nResource/@cancelButton
      sname
      cancelButton
      slabel
      取消
      sen_label
      Cancel
      sdescriptors
      xworker.lang.util.I18nResource/@resource
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      cancelButton
  @/@shellGridLayout
  sname
  shellGridLayout
  snumColumns
  2
  smakeColumnsEqualWidth
  false
  smarginWidth
  5
  smarginHeight
  5
  smarginLeft
  0
  smarginTop
  0
  smarginRight
  0
  smarginBottom
  0
  shorizontalSpacing
  5
  sverticalSpacing
  5
  sdescriptors
  xworker.swt.Layouts/@GridLayout
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  shellGridLayout
  @/@newDirLabel
  sname
  newDirLabel
  sBORDER
  false
  stype
  HORIZONTAL
  salignment
  LEFT
  stext
  label:xworker.swt.actions.prototypes.CreateFileDialog/@resources/@I18nResource/@newFileName
  scapture
  false
  senabled
  true
  sredraw
  true
  svisible
  true
  sdescriptors
  xworker.swt.Widgets/@Label
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  newDirLabel
  @/@text
  sname
  text
  sstyle
  SINGLE
  sH_SCROLL
  false
  sV_SCROLL
  false
  sWRAP
  false
  sREAD_ONLY
  false
  sPASSWORD
  false
  sSEARCH
  false
  sCANCEL
  false
  sBORDER
  true
  salign
  LEFT
  scapture
  false
  senabled
  true
  sredraw
  true
  svisible
  true
  sdescriptors
  xworker.swt.Widgets/@Text
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  text
    @/@text/@textGridData
    sname
    textGridData
    sstyle
    FILL_HORIZONTAL
    shorizontalIndent
    0
    swidth
    200
    sheight
    -1
    shorizontalAlignment
    BEGINNING
    sverticalAlignment
    CENTER
    shorizontalSpan
    1
    sverticalSpan
    1
    sgrabExcessHorizontalSpace
    false
    sgrabExcessVerticalSpace
    false
    sdescriptors
    xworker.swt.layout.LayoutDatas/@GridData
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    textGridData
  @/@4092
  sname
  buttonComposite
  sBORDER
  false
  sH_SCROLL
  false
  sV_SCROLL
  false
  sNO_BACKGROUND
  false
  sNO_FOCUS
  false
  sNO_MERGE_PAINTS
  false
  sNO_REDRAW_RESIZE
  false
  sNO_RADIO_GROUP
  false
  sEMBEDDED
  false
  sDOUBLE_BUFFERED
  false
  scapture
  false
  senabled
  true
  sredraw
  true
  svisible
  true
  sdescriptors
  xworker.swt.Widgets/@Composite
  sid
  4092
    @/@4092/@4093
    sname
    buttonCompositeGridData
    sstyle
    FILL_HORIZONTAL
    shorizontalIndent
    0
    swidth
    -1
    sheight
    -1
    shorizontalAlignment
    END
    sverticalAlignment
    CENTER
    shorizontalSpan
    2
    sverticalSpan
    1
    sgrabExcessHorizontalSpace
    false
    sgrabExcessVerticalSpace
    false
    sdescriptors
    xworker.swt.layout.LayoutDatas/@GridData
    sid
    4093
    @/@4092/@4094
    sname
    buttonCompositeRowLayout
    sfill
    false
    sjustify
    false
    smarginWidth
    0
    smarginHeight
    0
    smarginLeft
    3
    smarginTop
    3
    smarginRight
    3
    smarginBottom
    3
    spack
    true
    sspacing
    3
    stype
    SWT.HORIZONTAL
    swrap
    true
    sdescriptors
    xworker.swt.Layouts/@RowLayout
    sid
    4094
    @/@4092/@4095
    sname
    okButton
    stext
    label:xworker.swt.actions.prototypes.CreateFileDialog/@resources/@I18nResource/@okButton
    stype
    SWT.PUSH
    sflat
    false
    sborder
    false
    sselected
    false
    scapture
    false
    senabled
    true
    sredraw
    true
    svisible
    true
    sdescriptors
    xworker.swt.Widgets/@Button
    sth_createIndex
    false
    sid
    4095
      @/@4092/@4095/@4096
      sname
      RowData
      sexclude
      false
      swidth
      80
      sheight
      -1
      sdescriptors
      xworker.swt.layout.LayoutDatas/@RowData
      sth_createIndex
      false
      sid
      4096
      @/@4092/@4095/@4097
      sname
      Listeners
      sdescriptors
      xworker.swt.widgets.Widget/@Listeners
      sth_createIndex
      false
      sid
      4097
        @/@4092/@4095/@4097/@4098
        sname
        okButtonSelection
        stype
        Selection
        sdescriptors
        xworker.swt.events.Listeners/@listeners/@Listener
        sth_createIndex
        false
        sid
        4098
          @/@4092/@4095/@4097/@4098/@GroovyAction
          sname
          GroovyAction
          sthrowException
          true
          suseOtherAction
          false
          suseOuterJava
          true
          suseInnerJava
          false
          souterClassName
          xworker.swt.actions.prototypes.CreateFileDialog
          smethodName
          okButtonSelection
          sdisableGlobalContext
          false
          Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

if(actionContext.get("rootDir") == null){
    showMessage(actionContext, "message", "rootDir不能为null");
    return;
}

def name = text.getText().trim();
if("" == name){
    showMessage(actionContext, "message", "文件名不能为空！");
    return;
}

def file = new File(rootDir, name);
if(file.exists()){
    showMessage(actionContext, "message", "文件" + file.getPath() + "已存在!");
    return;
}

try{
    if(file.getParentFile().exists() == false){
         file.getParentFile().mkdirs();
    }
    
    FileOutputStream fout = new FileOutputStream(file);
    fout.close();
    _g.put("result", file);
    
    //触发事件
    thing.doAction("ok", parentContext, "file", file);
    
    //关闭窗口
    shell.dispose();
}catch(Exception e){
    showMessage(actionContext, "message", "创建文件" + file.getPath() + "失败，" + e.getMessage());
    return;
}
#$@text#$@
          sattributeTemplate
          false
          sinterpretationType
          Action
          svarScope
          Global
          screateLocalVarScope
          false
          ssaveReturn
          false
          sdebugLog
          false
          sdescriptors
          xworker.lang.actions.JavaAction
          sinheritDescription
          false
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          GroovyAction
            @/@4092/@4095/@4097/@4098/@GroovyAction/@ActionDefined
            sname
            ActionDefined
            sdescriptors
            xworker.lang.actions.Inout/@ActionDefined
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            ActionDefined
              @/@4092/@4095/@4097/@4098/@GroovyAction/@ActionDefined/@showMessage
              sname
              showMessage
              sshell
              var:shell
              sicon
              ICON_WARNING
              sbuttons
              OK
              stitle
              lang:d=创建文件&en=Create New File
              smessage
              var:message
              sinterpretationType
              Self
              sattributeTemplate
              false
              schildsAttributeTemplate
              false
              svarScope
              Local
              sisSynchronized
              false
              sthrowException
              true
              suseOtherAction
              false
              screateLocalVarScope
              false
              ssaveReturn
              false
              sdisableGlobalContext
              false
              sdebugLog
              false
              sdescriptors
              xworker.swt.actions.MessageBoxActions/@MessageBox
              sinheritDescription
              false
              sth_createIndex
              false
              sth_registMyChilds
              false
              sth_registDisabled
              false
              sth_mark
              false
              sid
              showMessage
    @/@4092/@4099
    sname
    cancelButton
    stext
    label:xworker.swt.actions.prototypes.CreateFileDialog/@resources/@I18nResource/@cancelButton
    stype
    SWT.PUSH
    sflat
    false
    sborder
    false
    sselected
    false
    scapture
    false
    senabled
    true
    sredraw
    true
    spack
    false
    svisible
    true
    sdescriptors
    xworker.swt.Widgets/@Button
    sth_createIndex
    false
    sid
    4099
      @/@4092/@4099/@4100
      sname
      RowData
      sexclude
      false
      swidth
      80
      sheight
      -1
      sdescriptors
      xworker.swt.layout.LayoutDatas/@RowData
      sth_createIndex
      false
      sid
      4100
      @/@4092/@4099/@4101
      sname
      Listeners
      sdescriptors
      xworker.swt.widgets.Widget/@Listeners
      sth_createIndex
      false
      sid
      4101
        @/@4092/@4099/@4101/@4102
        sname
        cancelButtonSelection
        stype
        Selection
        sdescriptors
        xworker.swt.events.Listeners/@listeners/@Listener
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_fileMonitor
        false
        sth_mark
        false
        sid
        4102
          @/@4092/@4099/@4101/@4102/@GroovyAction
          sname
          GroovyAction
          sisSynchronized
          false
          sthrowException
          true
          suseOtherAction
          false
          suseOuterJava
          true
          suseInnerJava
          false
          souterClassName
          xworker.swt.actions.prototypes.CreateFileDialog
          smethodName
          cancelButtonSelection
          sdisableGlobalContext
          false
          sattributeTemplate
          false
          sinterpretationType
          Action
          svarScope
          Global
          screateLocalVarScope
          false
          ssaveReturn
          false
          sdebugLog
          false
          sdescriptors
          xworker.lang.actions.JavaAction
          sinheritDescription
          false
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_fileMonitor
          false
          sth_mark
          false
          sid
          GroovyAction
