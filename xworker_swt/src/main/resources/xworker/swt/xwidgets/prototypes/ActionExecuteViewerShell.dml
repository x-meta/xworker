%1595658555437
@
sname=ActionExecuteViewerShell
stext=动作执行浏览器
sNO_TRIM=false
sCLOSE=true
sTITLE=true
sMIN=true
sMAX=true
sBORDER=false
sRESIZE=true
sON_TOP=false
sTOOL=false
sNO_FOCUS=false
swidth=1024
sheight=768
scenterScreen=true
spack=false
smaximized=false
sfullScreen=false
sdesign=true
sisIde=false
sdesignDefaultOpen=false
sH_SCROLL=false
sV_SCROLL=false
sNO_BACKGROUND=false
sNO_MERGE_PAINTS=false
sNO_REDRAW_RESIZE=false
sNO_RADIO_GROUP=false
sEMBEDDED=false
sDOUBLE_BUFFERED=false
slabel=ActionExecuteViewerShell
scapture=false
senabled=true
sredraw=true
svisible=true
sdescriptors=xworker.swt.widgets.Shell
sinheritDescription=false
sth_createIndex=false
sth_registMyChilds=false
sth_registDisabled=false
sth_mark=false
  @/@shellFillLayout
  sname=shellFillLayout
  stype=SWT.HORIZONTAL
  sdescriptors=xworker.swt.Layouts/@FillLayout
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=shellFillLayout
  @/@mainSashForm
  sname=mainSashForm
  sstyle=HORIZONTAL
  sSMOOTH=false
  sweights=30,70
  sBORDER=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  scapture=false
  senabled=true
  sredraw=true
  svisible=true
  sdescriptors=xworker.swt.Widgets/@SashForm
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=mainSashForm
    @/@mainSashForm/@actionComposite
    sname=actionComposite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.Widgets/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actionComposite
      @/@mainSashForm/@actionComposite/@actionCompositeGridLayout
      sname=actionCompositeGridLayout
      smakeColumnsEqualWidth=false
      smarginWidth=5
      smarginHeight=5
      smarginLeft=0
      smarginTop=0
      smarginRight=0
      smarginBottom=0
      shorizontalSpacing=5
      sverticalSpacing=5
      sdescriptors=xworker.swt.Layouts/@GridLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actionCompositeGridLayout
      @/@mainSashForm/@actionComposite/@actionTree
      sname=actionTree
      sselectStyle=SINGLE
      sV_SCROLL=true
      sH_SCROLL=true
      sCHECK=false
      sFULL_SELECTION=false
      sHIDE_SELECTION=false
      sBORDER=false
      slineVisible=false
      smultipleColumns=false
      sheaderVisible=false
      ssortIndicator=false
      smoveableColumns=false
      sheadImages=false
      ssubImages=false
      scheckSelection=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Tree
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actionTree
        @/@mainSashForm/@actionComposite/@actionTree/@actionTreeGridData
        sname=actionTreeGridData
        sstyle=FILL_BOTH
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=actionTreeGridData
        @/@mainSashForm/@actionComposite/@actionTree/@Listeners
        sname=Listeners
        sdescriptors=xworker.swt.widgets.Widget/@Listeners
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=Listeners
          @/@mainSashForm/@actionComposite/@actionTree/@Listeners/@actionTreeSelection
          sname=actionTreeSelection
          stype=Selection
          sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionTreeSelection
            @/@mainSashForm/@actionComposite/@actionTree/@Listeners/@actionTreeSelection/@GroovyAction
            sname=GroovyAction
            sisSynchronized=false
            sthrowException=true
            suseOtherAction=false
            svarScope=Local
            sdisableGlobalContext=false
            Scode=
#$@text#$@
import xworker.util.XWorkerUtils;

def thing = event.item.getData();

//设置文档
browser.setUrl(XWorkerUtils.getThingDescUrl(thing));
      
//设置当前执行的动作的表单
thingForm.doAction("setThing", actionContext, "thing", thing);

executeThread.checkStatus();
#$@text#$@
            sinterpretationType=Action
            screateLocalVarScope=false
            ssaveReturn=false
            sdebugLog=false
            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=GroovyAction
      @/@mainSashForm/@actionComposite/@9296
      sname=buttonComposite
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Composite
      sid=9296
        @/@mainSashForm/@actionComposite/@9296/@9297
        sname=buttonCompositeGridData
        sstyle=FILL_HORIZONTAL
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=END
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sid=9297
        @/@mainSashForm/@actionComposite/@9296/@9298
        sname=buttonCompositeRowLayout
        sfill=false
        sjustify=false
        smarginWidth=0
        smarginHeight=0
        smarginLeft=3
        smarginTop=3
        smarginRight=3
        smarginBottom=3
        spack=true
        sspacing=3
        stype=SWT.HORIZONTAL
        swrap=true
        sdescriptors=xworker.swt.Layouts/@RowLayout
        sid=9298
        @/@mainSashForm/@actionComposite/@9296/@9299
        sname=startStopButton
        stext=lang:d=启动&en=Start
        stype=SWT.PUSH
        sflat=false
        sborder=false
        sselected=false
        scapture=false
        senabled=false
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Button
        sth_createIndex=false
        sid=9299
          @/@mainSashForm/@actionComposite/@9296/@9299/@9300
          sname=RowData
          sexclude=false
          swidth=80
          sheight=-1
          sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
          sth_createIndex=false
          sid=9300
          @/@mainSashForm/@actionComposite/@9296/@9299/@9301
          sname=Listeners
          sdescriptors=xworker.swt.widgets.Widget/@Listeners
          sth_createIndex=false
          sid=9301
            @/@mainSashForm/@actionComposite/@9296/@9299/@9301/@9302
            sname=startStopButtonSelection
            stype=Selection
            sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
            sth_createIndex=false
            sid=9302
              @/@mainSashForm/@actionComposite/@9296/@9299/@9301/@9302/@GroovyAction
              sname=GroovyAction
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
//println("xxxxxxxxxxx=" + executeThread.running);
if(!executeThread.running){
    executeThread.start(actionTree.getSelection()[0].getData());
}else{
    executeThread.stop();
}
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=GroovyAction
        @/@mainSashForm/@actionComposite/@9296/@9303
        sname=nextButton
        stext=lang:d=下一步&en=Next
        stype=SWT.PUSH
        sflat=false
        sborder=false
        sselected=false
        scapture=false
        senabled=false
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Button
        sth_createIndex=false
        sid=9303
          @/@mainSashForm/@actionComposite/@9296/@9303/@9304
          sname=RowData
          sexclude=false
          swidth=80
          sheight=-1
          sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
          sth_createIndex=false
          sid=9304
          @/@mainSashForm/@actionComposite/@9296/@9303/@9305
          sname=Listeners
          sdescriptors=xworker.swt.widgets.Widget/@Listeners
          sth_createIndex=false
          sid=9305
            @/@mainSashForm/@actionComposite/@9296/@9303/@9305/@9306
            sname=nextButtonSelection
            stype=Selection
            sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
            sth_createIndex=false
            sid=9306
              @/@mainSashForm/@actionComposite/@9296/@9303/@9305/@9306/@JavaAction
              sname=JavaAction
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              suseOuterJava=true
              suseInnerJava=false
              souterClassName=xworker.ide.worldexplorer.swt.actions.ActionExecuteViewerThread
              smethodName=next
              sdisableGlobalContext=false
              sattributeTemplate=false
              sinterpretationType=Action
              svarScope=Global
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@JavaAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=JavaAction
    @/@mainSashForm/@cTabFolder
    sname=cTabFolder
    sstyle=TOP
    sBORDER=false
    sFLAT=false
    sCLOSE=false
    sSINGLE=false
    sMRUVisible=false
    ssimple=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.Widgets/@CTabFolder
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=cTabFolder
      @/@mainSashForm/@cTabFolder/@docAndContextTabItem
      sname=docAndContextTabItem
      stext=lang:d=文档和变量上下文&en=Document &amp; ActionContext
      sCLOSE=false
      sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=docAndContextTabItem
        @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm
        sname=rightSashForm
        sstyle=VERTICAL
        sSMOOTH=false
        sweights=30,70
        sBORDER=false
        sH_SCROLL=false
        sV_SCROLL=false
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@SashForm
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=rightSashForm
          @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@browser
          sname=browser
          sMOZILLA=false
          sWEBKIT=false
          sjavascriptEnabled=true
          sdescriptors=xworker.swt.Widgets/@Browser
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=browser
            @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@browser/@UtilBrowser
            sname=UtilBrowser
            sdescriptors=xworker.swt.browser.Browser/@UtilBrowser
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=UtilBrowser
          @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite
          sname=contextComposite
          sBORDER=false
          sH_SCROLL=false
          sV_SCROLL=false
          sNO_BACKGROUND=false
          sNO_FOCUS=false
          sNO_MERGE_PAINTS=false
          sNO_REDRAW_RESIZE=false
          sNO_RADIO_GROUP=false
          sEMBEDDED=false
          sDOUBLE_BUFFERED=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@Composite
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=contextComposite
            @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@actionContextViewer
            sname=actionContextViewer
            sshowStack=true
            sdescriptors=xworker.swt.Widgets/@ActionContextViewer
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=actionContextViewer
            @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@resultComposite
            sname=resultComposite
            sBORDER=false
            sH_SCROLL=false
            sV_SCROLL=false
            sNO_BACKGROUND=false
            sNO_FOCUS=false
            sNO_MERGE_PAINTS=false
            sNO_REDRAW_RESIZE=false
            sNO_RADIO_GROUP=false
            sEMBEDDED=false
            sDOUBLE_BUFFERED=false
            scapture=false
            senabled=true
            sredraw=true
            svisible=true
            sdescriptors=xworker.swt.Widgets/@Composite
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=resultComposite
              @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@resultComposite/@resultCompositeGridLayout
              sname=resultCompositeGridLayout
              smakeColumnsEqualWidth=false
              smarginWidth=5
              smarginHeight=5
              smarginLeft=0
              smarginTop=0
              smarginRight=0
              smarginBottom=0
              shorizontalSpacing=5
              sverticalSpacing=5
              sdescriptors=xworker.swt.Layouts/@GridLayout
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=resultCompositeGridLayout
              @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@resultComposite/@resultLabel
              sname=resultLabel
              sBORDER=false
              stype=HORIZONTAL
              salignment=LEFT
              stext=lang:d=结果：&en=Result:
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@Label
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=resultLabel
              @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@resultComposite/@objectViewer
              sname=objectViewer
              sH_SCROLL=true
              sV_SCROLL=true
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              sdescriptors=xworker.swt.Widgets/@ObjectViewer
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=objectViewer
                @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@resultComposite/@objectViewer/@GridData
                sname=GridData
                sstyle=FILL_BOTH
                shorizontalIndent=0
                swidth=-1
                sheight=-1
                shorizontalAlignment=BEGINNING
                sverticalAlignment=CENTER
                shorizontalSpan=1
                sverticalSpan=1
                sgrabExcessHorizontalSpace=false
                sgrabExcessVerticalSpace=false
                sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=GridData
            @/@mainSashForm/@cTabFolder/@docAndContextTabItem/@rightSashForm/@contextComposite/@contentCompositeStackLayout
            sname=contentCompositeStackLayout
            stopControl=resultComposite
            sdescriptors=xworker.swt.Layouts/@StackLayout
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=contentCompositeStackLayout
      @/@mainSashForm/@cTabFolder/@formTabItem
      sname=formTabItem
      stext=lang:d=动作事物&en=Action Thing
      sCLOSE=false
      sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=formTabItem
        @/@mainSashForm/@cTabFolder/@formTabItem/@thingForm
        sname=thingForm
        scolumn=1
        sH_SCROLL=true
        sV_SCROLL=true
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        sdescriptors=xworker.swt.Widgets/@ThingForm
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=thingForm
      @/@mainSashForm/@cTabFolder/@executorService
      sname=executorService
      screateItemsOnCTabFodler=true
      sdescriptors=xworker.swt.Widgets/@SWTExecutorService
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_noThingRegistViewer=false
      sth_fileMonitor=false
      sth_mark=false
      sth_registQueryOnlySelf=false
      sid=executorService
    @/@mainSashForm/@actions
    sname=actions
    sdescriptors=xworker.swt.Widgets/@actions
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actions
      @/@mainSashForm/@actions/@setAction
      sname=setAction
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import org.xmeta.ActionContext;

import xworker.swt.util.SwtUtils;
import xworker.util.XWorkerUtils;

//保存动作事物
_g.put("actionThing", actionThing);
def actionThingContext = actionContext.get("actionThingContext");
if(actionThingContext == null){
    actionThingContext = new ActionContext();
}
_g.put("actionThingContext", actionThingContext);

//在树上显示动作事物
SwtUtils.showThingOnTree(actionThing, actionTree, actionContext);
expandItem(actionTree);
browser.setUrl(XWorkerUtils.getThingDescUrl(actionThing));

actionTree.setSelection(actionTree.getItems()[0]);
startStopButton.setEnabled(true);

def expandItem(item){
    for(childItem in item.getItems()){
        childItem.setExpanded(true);
        expandItem(childItem);
        
    }
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=setAction
        @/@mainSashForm/@actions/@setAction/@ins
        sisValidate=false
        sname=ins
        sdescriptors=xworker.lang.actions.Inout/@ins
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=ins
          @/@mainSashForm/@actions/@setAction/@ins/@actionThing
          sname=actionThing
          stype=org.xmeta.Thing
          stypeCheck=false
          soptional=true
          scheck=false
          scheckLevel=exception
          sdescriptors=xworker.lang.actions.Inout/@ins/@param
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionThing
          @/@mainSashForm/@actions/@setAction/@ins/@actionContext
          sname=actionThingContext
          stype=org.xmeta.ActionContext
          stypeCheck=false
          soptional=true
          scheck=false
          scheckLevel=exception
          sdescriptors=xworker.lang.actions.Inout/@ins/@param
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionContext
      @/@mainSashForm/@actions/@showInfo
      sname=showInfo
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import xworker.util.XWorkerUtils;

//设置变量上下文
actionContextViewer.doAction("setActionContext", actionContext, 
      "ac", actionThingContext);

def thing = thing;
def actionTree = actionTree;
def thingForm = thingForm;
def executeThread = executeThread;
def actionContextViewer = actionContextViewer;
def contentCompositeStackLayout = contentCompositeStackLayout;
def contextComposite = contextComposite;


nextButton.display.asyncExec({
    //设置文档
    browser.setUrl(XWorkerUtils.getThingDescUrl(thing));
          
    //设置当前执行的动作的表单
    thingForm.doAction("setThing", actionContext, "thing", thing);
    
    //选择树节点
    selectTreeItem(thing, actionTree);
    
    contentCompositeStackLayout.topControl = actionContextViewer.getActionContext().composite;
    contextComposite.layout();

    executeThread.checkStatus();
});

def selectTreeItem(thing, parentItem){
    for(item in parentItem.getItems()){
        if(item.getData() == thing){
            actionTree.select(item);
            return;
        }
        
        selectTreeItem(thing, item);
    }
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sswitchResult=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=showInfo
      @/@mainSashForm/@actions/@setResult
      sname=setResult
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import org.xmeta.util.UtilString;

browser.setText(UtilString.getString("lang:d=运行完毕！&en=Finished!", actionContext));

objectViewer.doAction("setObject", actionContext, "object", result);

contentCompositeStackLayout.topControl = resultComposite;
contextComposite.layout();
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=setResult
    @/@mainSashForm/@init
    sname=init
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    svarScope=Local
    sdisableGlobalContext=false
    Scode=
#$@text#$@
import xworker.ide.worldexplorer.swt.actions.ActionExecuteViewerThread;

def executeThread = new ActionExecuteViewerThread(actionContext);
executeThread.setExecutorService(executorService);

_g.put("executeThread", executeThread);
#$@text#$@
    sinterpretationType=Action
    screateLocalVarScope=false
    ssaveReturn=false
    sswitchResult=false
    sdebugLog=false
    sdescriptors=xworker.swt.widgets.Widget/@Code
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=init
  @/@init
  sname=init
  sisSynchronized=false
  sthrowException=true
  suseOtherAction=false
  svarScope=Local
  sdisableGlobalContext=false
  Scode=
#$@text#$@
import org.xmeta.ActionContext;

//从事物编辑器中打开
if(actionContext.get("editorShell") != null && actionContext.get("currentThing") != null){
    actions.doAction("setAction", actionContext,"actionThing", currentThing, 
        "actionThingContext", new ActionContext());
}
#$@text#$@
  sinterpretationType=Action
  screateLocalVarScope=false
  ssaveReturn=false
  sdebugLog=false
  sdescriptors=xworker.swt.widgets.Widget/@Code
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=init
