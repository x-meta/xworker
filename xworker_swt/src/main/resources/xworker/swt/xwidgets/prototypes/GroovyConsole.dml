%1587953784412
@
sname=shell
stext=Groovy控制台
sNO_TRIM=false
sCLOSE=true
sTITLE=true
sMIN=true
sMAX=true
sBORDER=false
sRESIZE=true
sON_TOP=false
sTOOL=false
sNO_FOCUS=false
swidth=800
sheight=600
scenterScreen=true
spack=false
smaximized=false
sfullScreen=false
sdesign=true
sisIde=false
sdesignDefaultOpen=false
sexitOnDispose=false
sH_SCROLL=false
sV_SCROLL=false
sNO_BACKGROUND=false
sNO_MERGE_PAINTS=false
sNO_REDRAW_RESIZE=false
sNO_RADIO_GROUP=false
sEMBEDDED=false
sDOUBLE_BUFFERED=false
slabel=GroovyConsole
scapture=false
senabled=true
sredraw=true
svisible=true
sdescriptors=xworker.swt.widgets.Shell
sinheritDescription=false
sth_createIndex=false
sth_registMyChilds=false
sth_registDisabled=false
sth_mark=false
  @/@FillLayout
  sname=FillLayout
  stype=SWT.HORIZONTAL
  sdescriptors=xworker.swt.Layouts/@FillLayout
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=FillLayout
  @/@groovyTemp
  sname=execute
  sisSynchronized=false
  sthrowException=true
  suseOtherAction=false
  svarScope=Local
  sdisableGlobalContext=false
  Scode=
#$@text#$@
data.put("name", "test");
data.put("bk", "#ffeedd");
data.put("text", "hello world");
data.put("age", 20);
#$@text#$@
  sinterpretationType=Action
  screateLocalVarScope=false
  ssaveReturn=false
  sswitchResult=false
  sdebugLog=false
  sdescriptors=xworker.swt.widgets.Widget/@Code
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=groovyTemp
  @/@mainComposite
  sname=mainComposite
  sBORDER=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  slabel=Groovy Connsole
  scapture=false
  senabled=true
  sredraw=true
  svisible=true
  sdescriptors=xworker.swt.Widgets/@Composite
  sid=mainComposite
    @/@mainComposite/@mainCompositeGridlayout
    sname=mainCompositeGridlayout
    smakeColumnsEqualWidth=false
    smarginWidth=5
    smarginHeight=5
    smarginLeft=0
    smarginTop=0
    smarginRight=0
    smarginBottom=0
    shorizontalSpacing=5
    sverticalSpacing=5
    sdescriptors=xworker.swt.Layouts/@GridLayout
    sid=mainCompositeGridlayout
    @/@mainComposite/@code
    sname=codeText
    scodeName=groovy
    scodeType=groovy
    sWRAP=false
    sdescriptors=xworker.swt.Widgets/@CodeEditor
    sid=code
      @/@mainComposite/@code/@codeGridData
      sname=codeGridData
      sstyle=FILL_BOTH
      shorizontalIndent=0
      swidth=-1
      sheight=-1
      shorizontalAlignment=BEGINNING
      sverticalAlignment=CENTER
      shorizontalSpan=1
      sverticalSpan=1
      sgrabExcessHorizontalSpace=false
      sgrabExcessVerticalSpace=false
      sdescriptors=xworker.swt.Commons/@GridData
      sid=codeGridData
    @/@mainComposite/@buttonComposite
    sname=buttonComposite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    sdescriptors=xworker.swt.Widgets/@Composite
    sid=buttonComposite
      @/@mainComposite/@buttonComposite/@buttonCompositeGridData
      sname=buttonCompositeGridData
      sstyle=FILL_HORIZONTAL
      shorizontalIndent=0
      swidth=-1
      sheight=-1
      shorizontalAlignment=END
      sverticalAlignment=CENTER
      shorizontalSpan=1
      sverticalSpan=1
      sgrabExcessHorizontalSpace=false
      sgrabExcessVerticalSpace=false
      sdescriptors=xworker.swt.Commons/@GridData
      sid=buttonCompositeGridData
      @/@mainComposite/@buttonComposite/@buttonCompositeRowLayout
      sname=buttonCompositeRowLayout
      sfill=false
      sjustify=false
      smarginWidth=0
      smarginHeight=0
      smarginLeft=3
      smarginTop=3
      smarginRight=3
      smarginBottom=3
      spack=true
      sspacing=3
      stype=SWT.HORIZONTAL
      swrap=true
      sdescriptors=xworker.swt.Layouts/@RowLayout
      sid=buttonCompositeRowLayout
      @/@mainComposite/@buttonComposite/@restoreButton
      sname=groovyrunButton
      stext=lang:d=执行&en=Execute
      stype=SWT.PUSH
      sflat=false
      sborder=false
      sselected=false
      scapture=false
      senabled=true
      sredraw=true
      spack=false
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Button
      sid=restoreButton
        @/@mainComposite/@buttonComposite/@restoreButton/@listeners
        sname=listeners
        sdescriptors=xworker.swt.events.Listeners/@listeners
        sid=listeners
          @/@mainComposite/@buttonComposite/@restoreButton/@listeners/@restoreButtonSeleciton
          sname=printButtonSeleciton
          stype=Selection
          sref=actions:execute
          sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
          sid=restoreButtonSeleciton
    @/@mainComposite/@actions
    sname=actions
    sdescriptors=xworker.swt.Widgets/@actions
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actions
      @/@mainComposite/@actions/@setCode
      sname=setCode
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
if(actionContext.get("code") != null){
    codeText.setText(code);
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=setCode
        @/@mainComposite/@actions/@setCode/@ins
        sisValidate=false
        sname=ins
        sdescriptors=xworker.lang.actions.Inout/@ins
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=ins
          @/@mainComposite/@actions/@setCode/@ins/@code
          sname=code
          stypeCheck=false
          soptional=true
          scheck=false
          scheckLevel=exception
          sdescriptors=xworker.lang.actions.Inout/@ins/@param
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=code
      @/@mainComposite/@actions/@execute
      sname=execute
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import xworker.actions.GroovyAction;
import xworker.swt.util.SwtUtils;

def thing = world.getThing("xworker.swt.xwidgets.prototypes.GroovyConsole/@groovyTemp");

//代码辅助记录信息
//xworker.actions.GroovyAction.addCodeAssistorCache(thing);

//执行代码
thing.set("code", codeText.getText());
try{
    def result = thing.getAction().run(parentContext);
    if(SwtUtils.isRWT() == false){
        //重新初始化代码辅助缓存
        def ac = codeText.getData("actionContext");
        if(ac != null){
            ac.codeAssistor.initCache(parentContext);
        }else{
            //read only 模式
            codeAssistor.initCache(parentContext);
        }
    }
    return result;
}catch(Exception e){
    e.printStackTrace();
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sswitchResult=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=execute
      @/@mainComposite/@actions/@getComposite
      sname=getControl
      svarName=mainComposite
      sinterpretationType=Self
      sattributeTemplate=false
      schildsAttributeTemplate=false
      svarScope=Local
      sisSynchronized=false
      sthrowException=true
      screateLocalVarScope=false
      ssaveReturn=false
      sdisableGlobalContext=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GetVariable1
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=getComposite
      @/@mainComposite/@actions/@doInit1
      sname=doInit
      schangeSelf=false
      sinterpretationType=Self
      sattributeTemplate=false
      schildsAttributeTemplate=false
      svarScope=Local
      sisSynchronized=false
      sthrowException=true
      screateLocalVarScope=false
      ssaveReturn=false
      sdisableGlobalContext=false
      sdebugLog=false
      sdescriptors=xworker.swt.actions.SwtActions/@OnRWT
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_fileMonitor=false
      sth_mark=false
      sid=doInit1
        @/@mainComposite/@actions/@doInit1/@Then
        sname=Then
        sdescriptors=xworker.swt.actions.SwtActions/@OnRWT/@Then
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=Then
          @/@mainComposite/@actions/@doInit1/@Then/@doInit
          sname=doInit
          sisSynchronized=false
          sthrowException=true
          suseOtherAction=false
          svarScope=Local
          sdisableGlobalContext=false
          Scode=
#$@text#$@
//def ac = codeText.getData("actionContext");
//ac.codeAssistor.initCache(parentContext);
#$@text#$@
          sinterpretationType=Action
          screateLocalVarScope=false
          ssaveReturn=false
          sdebugLog=false
          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=doInit
        @/@mainComposite/@actions/@doInit1/@Else
        sname=Else
        sdescriptors=xworker.swt.actions.SwtActions/@OnRWT/@Else
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=Else
          @/@mainComposite/@actions/@doInit1/@Else/@doInit
          sname=doInit
          sisSynchronized=false
          sthrowException=true
          suseOtherAction=false
          svarScope=Local
          sdisableGlobalContext=false
          Scode=
#$@text#$@
import xworker.swt.custom.textutils.StyledTextLineNumber;

StyledTextLineNumber.attach(codeText);

def ac = codeText.getData("actionContext");
if(ac != null){
    ac.codeAssistor.initCache(parentContext);
}
#$@text#$@
          sinterpretationType=Action
          screateLocalVarScope=false
          ssaveReturn=false
          sdebugLog=false
          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=doInit
  @/@mainComposite1
  sname=mainComposite
  sBORDER=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  slabel=Groovy Connsole
  scapture=false
  senabled=true
  sredraw=true
  spack=false
  svisible=true
  sdescriptors=xworker.swt.Widgets/@Composite
  sid=mainComposite1
    @/@mainComposite1/@mainCompositeGridlayout
    sname=mainCompositeGridlayout
    smakeColumnsEqualWidth=false
    smarginWidth=5
    smarginHeight=5
    smarginLeft=0
    smarginTop=0
    smarginRight=0
    smarginBottom=0
    shorizontalSpacing=5
    sverticalSpacing=5
    sdescriptors=xworker.swt.Layouts/@GridLayout
    sid=mainCompositeGridlayout
    @/@mainComposite1/@codeText
    sname=codeText
    sstyle=MULTI
    sFULL_SELECTION=false
    sREAD_ONLY=true
    sWRAP=false
    sH_SCROLL=true
    sV_SCROLL=true
    sBORDER=false
    salign=LEFT
    slineNumber=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    spack=false
    svisible=true
    sdescriptors=xworker.swt.Widgets/@StyledText
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=codeText
      @/@mainComposite1/@codeText/@codeGridData
      sname=codeGridData
      sstyle=FILL_BOTH
      shorizontalIndent=0
      swidth=-1
      sheight=-1
      shorizontalAlignment=BEGINNING
      sverticalAlignment=CENTER
      shorizontalSpan=1
      sverticalSpan=1
      sgrabExcessHorizontalSpace=false
      sgrabExcessVerticalSpace=false
      sdescriptors=xworker.swt.Commons/@GridData
      sid=codeGridData
      @/@mainComposite1/@codeText/@Colorer
      sname=Colorer
      scodeName=groovy
      scodeType=groovy
      sdescriptors=xworker.swt.custom.StyledText/@Colorer
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_fileMonitor=false
      sth_mark=false
      sid=Colorer
      @/@mainComposite1/@codeText/@codeAssistor
      sname=codeAssistor
      sinitCache=true
      sactionContext=var:actionContext
      sdescriptors=xworker.swt.custom.StyledText/@CodeAssistor
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_fileMonitor=false
      sth_mark=false
      sid=codeAssistor
    @/@mainComposite1/@buttonComposite
    sname=buttonComposite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    spack=false
    svisible=true
    sdescriptors=xworker.swt.Widgets/@Composite
    sid=buttonComposite
      @/@mainComposite1/@buttonComposite/@buttonCompositeGridData
      sname=buttonCompositeGridData
      sstyle=FILL_HORIZONTAL
      shorizontalIndent=0
      swidth=-1
      sheight=-1
      shorizontalAlignment=END
      sverticalAlignment=CENTER
      shorizontalSpan=1
      sverticalSpan=1
      sgrabExcessHorizontalSpace=false
      sgrabExcessVerticalSpace=false
      sdescriptors=xworker.swt.Commons/@GridData
      sid=buttonCompositeGridData
      @/@mainComposite1/@buttonComposite/@buttonCompositeRowLayout
      sname=buttonCompositeRowLayout
      sfill=false
      sjustify=false
      smarginWidth=0
      smarginHeight=0
      smarginLeft=3
      smarginTop=3
      smarginRight=3
      smarginBottom=3
      spack=true
      sspacing=3
      stype=SWT.HORIZONTAL
      swrap=true
      sdescriptors=xworker.swt.Layouts/@RowLayout
      sid=buttonCompositeRowLayout
      @/@mainComposite1/@buttonComposite/@restoreButton
      sname=groovyrunButton
      stext=lang:d=执行&en=Execute
      stype=SWT.PUSH
      sflat=false
      sborder=false
      sselected=false
      scapture=false
      senabled=true
      sredraw=true
      spack=false
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Button
      sid=restoreButton
        @/@mainComposite1/@buttonComposite/@restoreButton/@listeners
        sname=listeners
        sdescriptors=xworker.swt.events.Listeners/@listeners
        sid=listeners
          @/@mainComposite1/@buttonComposite/@restoreButton/@listeners/@restoreButtonSeleciton
          sname=printButtonSeleciton
          stype=Selection
          sref=actions:execute
          sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
          sid=restoreButtonSeleciton
    @/@mainComposite1/@actions
    sname=actions
    sextends=xworker.swt.xwidgets.prototypes.GroovyConsole/@mainComposite/@actions
    sdescriptors=xworker.swt.Widgets/@actions
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actions
