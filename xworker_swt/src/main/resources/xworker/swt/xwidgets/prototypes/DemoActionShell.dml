%1479174652505
@
sname=DemoActionShell
sNO_TRIM=false
sCLOSE=true
sTITLE=true
sMIN=true
sMAX=true
sBORDER=false
sRESIZE=true
sON_TOP=false
sTOOL=false
sNO_FOCUS=false
swidth=1024
sheight=768
scenterScreen=true
spack=false
smaximized=false
sfullScreen=false
sdesign=true
side=true
sisIde=false
sdesignDefaultOpen=false
sH_SCROLL=false
sV_SCROLL=false
sNO_BACKGROUND=false
sNO_MERGE_PAINTS=false
sNO_REDRAW_RESIZE=false
sNO_RADIO_GROUP=false
sEMBEDDED=false
sDOUBLE_BUFFERED=false
slabel=DemoActionShell
scapture=false
senabled=true
sredraw=true
svisible=true
sdescriptors=xworker.swt.widgets.Shell
sinheritDescription=false
sth_createIndex=false
sth_registMyChilds=false
sth_registDisabled=false
sth_mark=false
  @/@shellFillLayout
  sname=shellFillLayout
  stype=SWT.HORIZONTAL
  sxw_cl_global=false
  sdescriptors=xworker.swt.Layouts/@FillLayout
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=shellFillLayout
  @/@actionTabFolder
  sname=actionTabFolder
  sstyle=TOP
  sBORDER=false
  sFLAT=false
  sCLOSE=false
  sSINGLE=false
  sMRUVisible=false
  ssimple=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  scapture=false
  senabled=false
  sredraw=true
  svisible=true
  sdescriptors=xworker.swt.Widgets/@CTabFolder
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=actionTabFolder
    @/@actionTabFolder/@executeTabItem
    sname=executeTabItem
    stext=执行
    sCLOSE=false
    sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=executeTabItem
      @/@actionTabFolder/@executeTabItem/@actionComposite
      sname=actionComposite
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Composite
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actionComposite
        @/@actionTabFolder/@executeTabItem/@actionComposite/@compositeGridLayout
        sname=compositeGridLayout
        snumColumns=2
        smakeColumnsEqualWidth=false
        smarginWidth=5
        smarginHeight=5
        smarginLeft=0
        smarginTop=0
        smarginRight=0
        smarginBottom=0
        shorizontalSpacing=5
        sverticalSpacing=5
        sdescriptors=xworker.swt.Layouts/@GridLayout
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=compositeGridLayout
        @/@actionTabFolder/@executeTabItem/@actionComposite/@browser
        sname=browser
        sMOZILLA=false
        sWEBKIT=false
        sjavascriptEnabled=true
        sdescriptors=xworker.swt.Widgets/@Browser
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=browser
          @/@actionTabFolder/@executeTabItem/@actionComposite/@browser/@UtilBrowser
          sname=UtilBrowser
          sdescriptors=xworker.swt.browser.Browser/@UtilBrowser
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=UtilBrowser
          @/@actionTabFolder/@executeTabItem/@actionComposite/@browser/@browserGridData
          sname=browserGridData
          sstyle=FILL_HORIZONTAL
          shorizontalIndent=0
          swidth=-1
          sheight=200
          shorizontalAlignment=BEGINNING
          sverticalAlignment=CENTER
          shorizontalSpan=2
          sverticalSpan=1
          sgrabExcessHorizontalSpace=false
          sgrabExcessVerticalSpace=false
          sxw_cl_global=false
          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=browserGridData
        @/@actionTabFolder/@executeTabItem/@actionComposite/@actionLabel
        sname=actionLabel
        sBORDER=false
        sstyle=WRAP
        stype=VERTICAL
        sshadow=SHADOW_OUT
        salignment=LEFT
        stext=动作：
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Label
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=actionLabel
        @/@actionTabFolder/@executeTabItem/@actionComposite/@actionText
        sname=actionText
        sstyle=SINGLE
        sH_SCROLL=false
        sV_SCROLL=false
        sWRAP=false
        sREAD_ONLY=true
        sPASSWORD=false
        sSEARCH=false
        sCANCEL=false
        sBORDER=true
        salign=LEFT
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Text
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=actionText
          @/@actionTabFolder/@executeTabItem/@actionComposite/@actionText/@actionTextGridData
          sname=actionTextGridData
          sstyle=FILL_HORIZONTAL
          shorizontalIndent=0
          swidth=-1
          sheight=-1
          shorizontalAlignment=BEGINNING
          sverticalAlignment=CENTER
          shorizontalSpan=1
          sverticalSpan=1
          sgrabExcessHorizontalSpace=false
          sgrabExcessVerticalSpace=false
          sxw_cl_global=false
          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionTextGridData
        @/@actionTabFolder/@executeTabItem/@actionComposite/@15031
        sname=buttonComposite
        sBORDER=false
        sH_SCROLL=false
        sV_SCROLL=false
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Composite
        sid=15031
          @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15032
          sname=buttonCompositeGridData
          sstyle=FILL_HORIZONTAL
          shorizontalIndent=0
          swidth=-1
          sheight=-1
          shorizontalAlignment=END
          sverticalAlignment=CENTER
          shorizontalSpan=2
          sverticalSpan=1
          sgrabExcessHorizontalSpace=false
          sgrabExcessVerticalSpace=false
          sxw_cl_global=false
          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
          sid=15032
          @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15033
          sname=buttonCompositeRowLayout
          sfill=false
          sjustify=false
          smarginWidth=0
          smarginHeight=0
          smarginLeft=3
          smarginTop=3
          smarginRight=3
          smarginBottom=3
          spack=true
          sspacing=3
          stype=SWT.HORIZONTAL
          swrap=true
          sdescriptors=xworker.swt.Layouts/@RowLayout
          sid=15033
          @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15034
          sname=executeButton
          stext=执行
          stype=SWT.PUSH
          sflat=false
          sborder=false
          sselected=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@Button
          sth_createIndex=false
          sid=15034
            @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15034/@15035
            sname=RowData
            sexclude=false
            swidth=80
            sheight=-1
            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
            sth_createIndex=false
            sid=15035
            @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15034/@15036
            sname=Listeners
            sdescriptors=xworker.swt.widgets.Widget/@Listeners
            sth_createIndex=false
            sid=15036
              @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15034/@15036/@15037
              sname=executeButtonSelection
              stype=Selection
              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
              sth_createIndex=false
              sid=15037
                @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@15034/@15036/@15037/@GroovyAction
                sname=GroovyAction
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def result = content.getAction().run(actionContext, ["self": content]);
viewer.doAction("setObject", actionContext, ["object": result]);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=GroovyAction
          @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@150341
          sname=executeBackgroundButton
          stext=后台执行
          stype=SWT.PUSH
          sflat=false
          sborder=false
          sselected=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@Button
          sth_createIndex=false
          sid=150341
            @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@150341/@15035
            sname=RowData
            sexclude=false
            swidth=80
            sheight=-1
            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
            sth_createIndex=false
            sid=15035
            @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@150341/@15036
            sname=Listeners
            sdescriptors=xworker.swt.widgets.Widget/@Listeners
            sth_createIndex=false
            sid=15036
              @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@150341/@15036/@15037
              sname=executeBackgroundButtonSelection
              stype=Selection
              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
              sth_createIndex=false
              sid=15037
                @/@actionTabFolder/@executeTabItem/@actionComposite/@15031/@150341/@15036/@15037/@GroovyAction
                sname=GroovyAction
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
//后台的变量
def display = actionText.getDisplay();
def actionContext = actionContext;
def content = content;
def viewer = viewer;

//启动新的线程执行
new Thread({
    display.asyncExec({
        viewer.doAction("setObject", actionContext, ["object": "正在执行，请稍后...."]);
    }); 
    
    def result = content.getAction().run(actionContext, ["self": content]);
    display.asyncExec({
        viewer.doAction("setObject", actionContext, ["object": result]);
    });    
}).start();
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=GroovyAction
        @/@actionTabFolder/@executeTabItem/@actionComposite/@resultLabel
        sname=resultLabel
        sBORDER=false
        stype=HORIZONTAL
        sshadow=SHADOW_IN
        salignment=LEFT
        stext=结果：
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Label
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=resultLabel
        @/@actionTabFolder/@executeTabItem/@actionComposite/@viewer
        sname=viewer
        sH_SCROLL=true
        sV_SCROLL=true
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        sdescriptors=xworker.swt.Widgets/@ObjectViewer
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=viewer
          @/@actionTabFolder/@executeTabItem/@actionComposite/@viewer/@viewerGridData
          sname=viewerGridData
          sstyle=FILL_BOTH
          shorizontalIndent=0
          swidth=-1
          sheight=-1
          shorizontalAlignment=BEGINNING
          sverticalAlignment=CENTER
          shorizontalSpan=1
          sverticalSpan=1
          sgrabExcessHorizontalSpace=false
          sgrabExcessVerticalSpace=false
          sxw_cl_global=false
          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=viewerGridData
    @/@actionTabFolder/@thingTabItem
    sname=thingTabItem
    stext=事物
    sCLOSE=false
    sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=thingTabItem
      @/@actionTabFolder/@thingTabItem/@thingEditor
      sname=thingEditor
      stitle=true
      suseRootThing=true
      sdescriptors=xworker.swt.Widgets/@ThingEditor
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=thingEditor
    @/@actionTabFolder/@actions
    sname=actions
    sdescriptors=xworker.swt.Widgets/@actions
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actions
      @/@actionTabFolder/@actions/@setAction
      sname=setAction
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import xworker.util.XWorkerUtils;

//设置动作的文档
browser.setUrl(XWorkerUtils.getThingDescUrl(action));

//设置动作路径
actionText.setText(action.metadata.path); 

//设置动作编辑器
thingEditor.editorActions.doAction("setThing", actionContext, "thing", action);

//保存动作到变量上下文
_g.put("content", action);

actionTabFolder.setEnabled(true);
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=setAction
      @/@actionTabFolder/@actions/@getAction
      sname=getAction
      svarName=content
      sinterpretationType=Self
      sattributeTemplate=false
      schildsAttributeTemplate=false
      svarScope=Local
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      screateLocalVarScope=false
      ssaveReturn=false
      sdisableGlobalContext=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GetVariable1
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=getAction
      @/@actionTabFolder/@actions/@getRootControl
      sname=getRootControl
      svarName=actionTabFolder
      sinterpretationType=Self
      sattributeTemplate=false
      schildsAttributeTemplate=false
      svarScope=Local
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      screateLocalVarScope=false
      ssaveReturn=false
      sdisableGlobalContext=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GetVariable1
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=getRootControl
