%1632736142182
@
sname=ThingEditor
slabel=ThingEditor
SexampleParams=
#$@text#$@
{
}
#$@text#$@
sdescription=<p>事物编辑器，参数thing: Thing。</p>
sdescriptors=xworker.swt.app.Editor
sinheritDescription=false
sth_createIndex=true
sth_registThing=child|xworker.workbench.Editors
sth_registMyChilds=false
sth_registDisabled=false
sgroup=swt.xworker
sth_mark=false
  @/@actions
  sname=actions
  sdescriptors=xworker.swt.app.Editor/@actions1
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=actions
    @/@actions/@createDataParams
    sname=createDataParams
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    suseInnerJava=false
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=createDataParams
    sdisableGlobalContext=false
    sattributeTemplate=false
    sinterpretationType=Action
    svarScope=Local
    screateLocalVarScope=false
    ssaveReturn=false
    sswitchResult=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_deprecated=false
    sth_mark=false
    sid=createDataParams
    @/@actions/@createParams
    sname=createParams
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    suseInnerJava=false
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=createParams
    sdisableGlobalContext=false
    sattributeTemplate=false
    sinterpretationType=Action
    svarScope=Global
    screateLocalVarScope=false
    ssaveReturn=false
    sswitchResult=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_noThingRegistViewer=false
    sth_fileMonitor=false
    sth_mark=false
    sth_registQueryOnlySelf=false
    snotXmlAttribute=false
    sjson_isArray=false
    sid=createParams
  @/@EditorComposite
  sname=EditorComposite
  sBORDER=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  scapture=false
  senabled=true
  sredraw=true
  spack=false
  svisible=true
  sdescriptors=xworker.swt.app.Editor/@EditorComposite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=EditorComposite
    @/@EditorComposite/@FillLayout
    sname=FillLayout
    stype=SWT.HORIZONTAL
    sdescriptors=xworker.swt.Layouts/@FillLayout
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=FillLayout
    @/@EditorComposite/@thingEditor
    sname=thingEditor
    sthingPath=xworker.swt.app.editors.ThingEditor/@EditorComposite/@thingEditor
    stitle=true
    suseRootThing=true
    ssaveActionContainer=true
    sdescriptors=xworker.swt.Widgets/@ThingEditor
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=thingEditor
      @/@EditorComposite/@thingEditor/@actions
      sname=actions
      sdescriptors=xworker.swt.xworker.ThingEditor/@actions1
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actions
        @/@EditorComposite/@thingEditor/@actions/@modify
        sname=modify
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        suseOuterJava=true
        souterClassName=xworker.swt.app.editors.ThingEditor
        smethodName=modify
        sdisableGlobalContext=false
        Scode=
#$@text#$@
if(actionContext.get("actions") == null){
    //println "actions is null";
    return;
}

editorThing.doAction("editorChanged", actionContext, "editorActions", actions);

editor.fireStateChanged();
#$@text#$@
        sinterpretationType=Action
        svarScope=Local
        screateLocalVarScope=false
        ssaveReturn=false
        sswitchResult=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.JavaAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=modify
    @/@EditorComposite/@resources
    sname=resources
    sdescriptors=xworker.swt.Widgets/@Resource
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=resources
      @/@EditorComposite/@resources/@editorIcon
      sname=editorIcon
      stype=Image
      simageFile=icons/xworker/dataObject.gif
      sdescriptors=xworker.swt.util.Resource/@Image
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=editorIcon
  @/@OutlineComposite
  sname=OutlineComposite
  sBORDER=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  scapture=false
  senabled=true
  sredraw=true
  spack=false
  svisible=true
  sdescriptors=xworker.swt.app.Editor/@OutlineComposite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=OutlineComposite
    @/@OutlineComposite/@FillLayout
    sname=FillLayout
    stype=SWT.HORIZONTAL
    sdescriptors=xworker.swt.Layouts/@FillLayout
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=FillLayout
    @/@OutlineComposite/@outlineComposite
    sname=outlineComposite
    sextendWidgetPath=xworker.ide.worldexplorer.swt.dataExplorerParts.ThingEditor/@outlineBrowser
    sactionContext=ognl:thingEditor.actionContext.thingContext
    screateActionContextIfNotExists=true
    snewActionContext=false
    sdescriptors=xworker.swt.Widgets/@ExtendWidget
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=outlineComposite
  @/@ActionContainer
  sname=actions
  sdescriptors=xworker.swt.app.Editor/@ActionContainer
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=ActionContainer
    @/@ActionContainer/@setContent
    sname=setContent
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=setContent
    sdisableGlobalContext=false
    Scode=
#$@text#$@
import java.io.File;

//判断参数是否存在
if(params == null){    
    noParams(actionContext);
    return;
}

def thing = params.thing;
if(thing instanceof String){
    thing = world.getThing(thing);
}

if(!isSame(actionContext.g().get("thing"), thing)){
    actionContext.g().put("thing", thing);
    thingEditor.doAction("setThing", actionContext, "thing", thing);
}
    
thingEditor.doAction("selectThing", actionContext, "thing", thing);
//EditorComposite.layout();
//println thingEditor;

def isSame(oldThing, newThing){
    if(oldThing == null || newThing == null){
        return false;
    }
    
    def oldPath = oldThing.getRoot().getMetadata().getPath();
    def newPath = newThing.getRoot().getMetadata().getPath();
    
    return oldPath.equals(newPath);
}
#$@text#$@
    sinterpretationType=Action
    svarScope=Local
    screateLocalVarScope=false
    ssaveReturn=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=setContent
      @/@ActionContainer/@setContent/@ActionDefined
      sname=ActionDefined
      sdescriptors=xworker.lang.actions.Inout/@ActionDefined
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=ActionDefined
        @/@ActionContainer/@setContent/@ActionDefined/@noParams
        sname=noParams
        sshell=ognl:EditorComposite.getShell()
        sicon=ICON_WARNING
        sbuttons=OK
        stitle=lang:d=文件文本编辑器&FileTextEditor
        smessage=lang:d=参数不存在，不能编辑文件！&en=Can not edit file, params not exists!
        sinterpretationType=Self
        sattributeTemplate=false
        schildsAttributeTemplate=false
        svarScope=Local
        sisSynchronized=false
        sthrowException=true
        screateLocalVarScope=false
        ssaveReturn=false
        sdisableGlobalContext=false
        sdebugLog=false
        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=noParams
    @/@ActionContainer/@isSameContent
    sname=isSameContent
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=isSameContent
    sdisableGlobalContext=false
    Scode=
#$@text#$@
return false;
/*
if(actionContext.get("thing") == null){
    return false;
}

if(actionContext.get("params") == null){
    return false;
}    

def t = params.thing;
if(t instanceof String){
    t = world.getThing(t);
}
if(t != null && thing.getRoot() == t.getRoot()){
    return true;
}else{
    return false;
}*/
#$@text#$@
    sinterpretationType=Action
    svarScope=Local
    screateLocalVarScope=false
    ssaveReturn=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=isSameContent
    @/@ActionContainer/@getSimpleTitle
    sname=getSimpleTitle
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=getSimpleTitle
    sdisableGlobalContext=false
    Scode=
#$@text#$@
if(actionContext.get("thing") != null){
    return thing.getRoot().getMetadata().getLabel();
}else{
    return "ThingEditor";
}
#$@text#$@
    sinterpretationType=Action
    svarScope=Local
    screateLocalVarScope=false
    ssaveReturn=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=getSimpleTitle
    @/@ActionContainer/@getTitle
    sname=getTitle
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=getTitle
    sdisableGlobalContext=false
    Scode=
#$@text#$@
if(actionContext.get("thing") != null){
    def thingManager = thing.getMetadata().getThingManager();
    if(thingManager != null){
        return thingManager.getName() + "/" + thing.getRoot().getMetadata().getPath();
    }else{
            return thing.getRoot().getMetadata().getPath();
    }
}else{
    return "null/ThingEditor";
}
#$@text#$@
    sinterpretationType=Action
    svarScope=Local
    screateLocalVarScope=false
    ssaveReturn=false
    sswitchResult=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=getTitle
    @/@ActionContainer/@doDispose
    sname=doDispose
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=doDispose
    sdisableGlobalContext=false
    Scode=
#$@text#$@
if(EditorComposite.isDisposed() == false){
    EditorComposite.dispose();
}

if(thingEditor.actionContext.thingContext != null &&
        thingEditor.actionContext.thingContext.OutlineComposite != null){
    thingEditor.actionContext.thingContext.OutlineComposite.dispose();
}
#$@text#$@
    sinterpretationType=Action
    svarScope=Local
    screateLocalVarScope=false
    ssaveReturn=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=doDispose
    @/@ActionContainer/@save
    sname=doSave
    sactionContainer=var:thingEditor
    saction=save
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.ActionContainerAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=save
    @/@ActionContainer/@isDirty1
    sname=isDirty
    sactionContainer=var:thingEditor
    saction=isModified
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.ActionContainerAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=isDirty1
    @/@ActionContainer/@getOutline
    sname=getOutline
    sexpression=OutlineComposite
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@Ongl
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=getOutline
    @/@ActionContainer/@onUnActive
    sname=onUnActive
    sunimplementedException=false
    sdescriptors=xworker.lang.actions.Actions/@NOOP
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=onUnActive
    @/@ActionContainer/@onActive
    sname=onActive
    sunimplementedException=false
    sdescriptors=xworker.lang.actions.Actions/@NOOP
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=onActive
    @/@ActionContainer/@getIcon
    sname=getIcon
    svarName=editorIcon
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@GetVariable1
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=getIcon
    @/@ActionContainer/@doAction
    sname=doAction
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    suseInnerJava=false
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=doAction
    sdisableGlobalContext=false
    sattributeTemplate=false
    sinterpretationType=Action
    svarScope=Global
    screateLocalVarScope=false
    ssaveReturn=false
    sswitchResult=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_noThingRegistViewer=false
    sth_fileMonitor=false
    sth_mark=false
    sth_registQueryOnlySelf=false
    snotXmlAttribute=false
    sjson_isArray=false
    sid=doAction
    @/@ActionContainer/@onOutlineCreated
    sname=onOutlineCreated
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    suseInnerJava=false
    souterClassName=xworker.swt.app.editors.ThingEditor
    smethodName=onOutlineCreated
    sdisableGlobalContext=false
    sattributeTemplate=false
    sinterpretationType=Action
    svarScope=Global
    screateLocalVarScope=false
    ssaveReturn=false
    sswitchResult=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_noThingRegistViewer=false
    sth_fileMonitor=false
    sth_mark=false
    sth_registQueryOnlySelf=false
    snotXmlAttribute=false
    sjson_isArray=false
    sid=onOutlineCreated
