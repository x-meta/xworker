%1634200612637
@
sname=DesignToolBase
slabel=Control & Model
sth_sortWeight=-10000
sgroup=-10000|设计
sen_group=-10000|Design
sdescription=动态设计SWT界面。
sen_description=Dyanmic design SWT.
sdescriptors=xworker.swt.design.DesignTool
sinheritDescription=false
sth_createIndex=true
sth_registThing=design|xworker.swt.widgets.Widget
sth_registMyChilds=false
sth_registDisabled=false
sth_mark=false
  @/@insert
  sname=design
  slabel=设计(&D)
  swidth=800
  sheight=600
  snoReturnButton=true
  svisible=false
  sgroup=-10000|设计
  sen_label=Design(&D)
  sen_group=-10000|Design
  sdescriptors=xworker.swt.design.DesignTool/@Composite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=insert
    @/@insert/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Composite
      @/@insert/@Composite/@resources
      sname=resources
      sdescriptors=xworker.swt.Widgets/@Resource
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=resources
        @/@insert/@Composite/@resources/@parentImage
        sname=parentImage
        stype=Image
        simageFile=icons/application_get.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=parentImage
        @/@insert/@Composite/@resources/@controlsImage
        sname=controlsImage
        stype=Image
        simageFile=icons/page_white_stack.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=controlsImage
        @/@insert/@Composite/@resources/@toolsMenuImage
        sname=toolsMenuImage
        stype=Image
        simageFile=icons/cog.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=toolsMenuImage
        @/@insert/@Composite/@resources/@toolsImage
        sname=toolsImage
        stype=Image
        simageFile=icons/house.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=toolsImage
        @/@insert/@Composite/@resources/@copyImage
        sname=copyImage
        stype=Image
        simageFile=icons/xworker/copy.gif
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=copyImage
        @/@insert/@Composite/@resources/@pasteImage
        sname=pasteImage
        stype=Image
        simageFile=icons/xworker/paste.gif
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=pasteImage
      @/@insert/@Composite/@EventFilter
      sname=EventFilter
      sdescriptors=xworker.swt.Widgets/@EventFilter
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=EventFilter
        @/@insert/@Composite/@EventFilter/@Listener
        sname=Listener
        stype=KeyDown
        sdescriptors=xworker.swt.events.EventFilter/@listeners/@Listener
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=Listener
          @/@insert/@Composite/@EventFilter/@Listener/@KeySwitch
          sname=KeySwitch
          sinterpretationType=Self
          sattributeTemplate=false
          schildsAttributeTemplate=false
          svarScope=Local
          sisSynchronized=false
          sthrowException=true
          screateLocalVarScope=false
          ssaveReturn=false
          sdisableGlobalContext=false
          sdebugLog=false
          sdescriptors=xworker.swt.actions.EventActions/@KeySwitch
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=KeySwitch
            @/@insert/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12
            sname=ctrl3
            sCtrl=true
            sShift=false
            sAlt=false
            skey=3
            sdescriptors=xworker.swt.actions.EventActions/@KeySwitch/@Case
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=ctrl12
              @/@insert/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12/@actions
              sname=actions
              sdescriptors=xworker.swt.actions.EventActions/@KeySwitch/@Case/@actions1
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=actions
                @/@insert/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12/@actions/@doEvent
                sname=doEvent
                srefActionPath=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener/@GroovyAction
                skeepSelf=true
                sinterpretationType=Self
                sattributeTemplate=false
                schildsAttributeTemplate=false
                svarScope=Local
                sisSynchronized=false
                sthrowException=true
                screateLocalVarScope=false
                ssaveReturn=false
                sdisableGlobalContext=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@RefAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=doEvent
      @/@insert/@Composite/@compositeGridLayout
      sname=compositeGridLayout
      smakeColumnsEqualWidth=false
      smarginWidth=5
      smarginHeight=5
      smarginLeft=0
      smarginTop=0
      smarginRight=0
      smarginBottom=0
      shorizontalSpacing=5
      sverticalSpacing=5
      sdescriptors=xworker.swt.Layouts/@GridLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=compositeGridLayout
      @/@insert/@Composite/@mainCoolbar
      sname=mainCoolbar
      stype=HORIZONTAL
      sBORDER=false
      sFLAT=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@CoolBar
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=mainCoolbar
        @/@insert/@Composite/@mainCoolbar/@editorToolBarGirdDAta
        sname=editorToolBarGirdDAta
        sstyle=FILL_HORIZONTAL
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=editorToolBarGirdDAta
        @/@insert/@Composite/@mainCoolbar/@mainCoolItem
        sname=mainCoolItem
        sDROP_DOWN=false
        sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=mainCoolItem
          @/@insert/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar
          sname=editorToolBar
          stype=HORIZONTAL
          sFLAT=false
          sWRAP=false
          sBORDER=false
          sSHADOW_OUT=false
          sRIGHT=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@ToolBar
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=editorToolBar
            @/@insert/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem
            sname=toolsMenuItem
            stype=DROP_DOWN
            simage=toolsImage
            stoolTiptext=lang:d=工具列表(Ctrl + 3)&en=Tools(Ctrl + 3)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=designItem
              @/@insert/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@insert/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=Listener
                  @/@insert/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.util.SwtUtils;

def menu = DesignToolDialog.createOperationGroupsMenu(mainTabFolder, actionContext)
SwtUtils.showMenuByWidget(event.widget, menu);
event.doit = false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
        @/@insert/@Composite/@mainCoolbar/@designCoolItem
        sname=designCoolItem
        sDROP_DOWN=false
        sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=designCoolItem
          @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar
          sname=designToolBar
          stype=HORIZONTAL
          sFLAT=false
          sWRAP=false
          sBORDER=false
          sSHADOW_OUT=false
          sRIGHT=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@ToolBar
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=editorToolBar
            @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2
            sname=copyItem
            stype=PUSH
            simage=copyImage
            stoolTiptext=lang:d=复制控件(Ctrl + C)&en=Copy(Ctrl +C)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=toolsItem2
              @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2/@listeners/@toolsItemSelection
                sname=toolsItemSelection
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=toolsItemSelection
                  @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2/@listeners/@toolsItemSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.ui.swt.Clipboard;

Thing thing = parentContext.controlThing;
if(thing != null){
    Clipboard.add(thing.detach(false));
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
            @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21
            sname=pasteItem
            stype=PUSH
            simage=pasteImage
            stoolTiptext=lang:d=粘贴代码(Alt + V)&en=Copy(ALT + V)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=toolsItem21
              @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection
                sname=pasteCodeItemSelection
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=toolsItemSelection
                  @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
if(actionContext.get("designContext") == null){
    confirm(actionContext);
    return;
}

//先选中设计标签页
mainTabFolder.setSelection(designItem);
designContext.mainTabFolder.setSelection(designContext.insertableControlsItem);

//选中粘贴代码的事物
def thing = world.getThing("xworker.swtshare.p2018.p06.p09.PasteCode");
if(thing != null){
    designContext.controlRegist.doAction("selectThing", actionContext, "thing", thing);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                    @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection/@GroovyAction/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection/@GroovyAction/@ActionDefined/@confirm
                      sname=confirm
                      sshell=var:shell
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=粘贴代码&en=Paste Code
                      smessage=lang:d=请先选择插入标签页。&en=Please select Insert TabItem.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
      @/@insert/@Composite/@mainSashForm
      sname=mainSashForm
      sstyle=HORIZONTAL
      sSMOOTH=false
      sweights=30,70
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      spack=false
      svisible=true
      sdescriptors=xworker.swt.Widgets/@SashForm
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=mainSashForm
        @/@insert/@Composite/@mainSashForm/@GridData
        sname=GridData
        sstyle=FILL_BOTH
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=GridData
        @/@insert/@Composite/@mainSashForm/@controlTree
        sname=controlTree
        sselectStyle=SINGLE
        sV_SCROLL=true
        sH_SCROLL=true
        sCHECK=false
        sFULL_SELECTION=false
        sHIDE_SELECTION=false
        sBORDER=false
        slineVisible=false
        smultipleColumns=false
        sheaderVisible=false
        ssortIndicator=false
        smoveableColumns=false
        sheadImages=false
        ssubImages=false
        scheckSelection=false
        scapture=false
        senabled=true
        sredraw=true
        spack=false
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Tree
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=controlTree
          @/@insert/@Composite/@mainSashForm/@controlTree/@Listeners
          sname=Listeners
          sdescriptors=xworker.swt.widgets.Widget/@Listeners
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=Listeners
            @/@insert/@Composite/@mainSashForm/@controlTree/@Listeners/@treeSelection
            sname=treeSelection
            stype=Selection
            sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_mark=false
            sid=treeSelection
              @/@insert/@Composite/@mainSashForm/@controlTree/@Listeners/@treeSelection/@treeSelection
              sname=treeSelection
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
import xworker.swt.design.Designer;

if(actionContext.get("noTreeControlSelection") == true){
    return;
}
//选择控件
def data = event.item.data;
//println "sssssss" + data;
if(data.control.isVisible() == false){
    data.control.setVisible(true);
}
Designer.setCurrentDesignControl(data.control);

//关闭窗口
//shell.dispose();
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=treeSelection
        @/@insert/@Composite/@mainSashForm/@mainTabFolder
        sname=mainTabFolder
        sstyle=TOP
        sBORDER=true
        sFLAT=true
        sCLOSE=false
        ssimple=true
        sdisposeControlOnItemClosed=false
        sH_SCROLL=false
        sV_SCROLL=false
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@CTabFolder
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=mainTabFolder
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@onSelection
          sname=onSelection
          sdescriptors=xworker.swt.widgets.Widget/@Event
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=onSelection
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@onSelection/@GroovyAction
            sname=GroovyAction
            sisSynchronized=false
            sthrowException=true
            suseOtherAction=false
            svarScope=Local
            sdisableGlobalContext=false
            Scode=
#$@text#$@
def item = event.item;

if(actionContext.get("controlType") == "compound"){
    boolean disable = false;
    if(item == designItem){
        disable = true;
    }else if(item == eventItem){
        disable = true;
    }else if(item == moveItem){
        disable = true;
    }else if(item == eventItem){
        disable = true;
    }else if(item == menuItem){
        disable = true;
    }else if(item == modelItem){
        disable = true;
    }else if(item == actionItem){
        disable = true;
    }else if(item == helpItem){
    }else if(item == toolsItem){
    }else if(item == dataItem){
        disable = true;
    }

    if(disable){
        mainTabFolder.setSelection(toolsItem);
        return;
    }
}

//选择合适的组件
def ac = null;
if(item == designItem){
    ac = designContext;
}else if(item == eventItem){
    ac = eventContext;
}else if(item == moveItem){
    ac = moveContext;
}else if(item == eventItem){
    ac = eventContext;
}else if(item == menuItem){
    ac = menuContext;
}else if(item == modelItem){
    ac = modelContext;
}else if(item == actionItem){
    ac = actionCtx;
}else if(item == helpItem){
    ac = helpContext;
}else if(item == toolsItem){
    ac = toolsContext;
}else if(item == dataItem){
    ac = dataContext;
}

if(ac != null){
    return ac.actions.doAction("handleNewControl", actionContext, 
          "newControl", parentContext.control, "force" , true);
}
return false;
#$@text#$@
            sinterpretationType=Action
            screateLocalVarScope=false
            ssaveReturn=false
            sdebugLog=false
            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=GroovyAction
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem
          sname=modelItem
          stext=lang:d=模型&en=Model
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=modelItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext
            sname=modelContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=modelContext
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite
              sname=topMainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=topMainComposite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@topMainCompositeGridLayout
                sname=topMainCompositeGridLayout
                smakeColumnsEqualWidth=false
                smarginWidth=5
                smarginHeight=5
                smarginLeft=0
                smarginTop=0
                smarginRight=0
                smarginBottom=0
                shorizontalSpacing=5
                sverticalSpacing=5
                sdescriptors=xworker.swt.Layouts/@GridLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=topMainCompositeGridLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite
                sname=mainComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=Composite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite
                  sname=editComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=editComposite
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite/@editCompositeGridLayout
                    sname=editCompositeGridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editCompositeGridLayout
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite/@thingEditor
                    sname=thingEditor
                    sthingPath=var:parentContext.thing
                    stitle=true
                    suseRootThing=false
                    ssaveActionContainer=true
                    svariablesActionContext=ognl:parentContext.controlContext
                    sdescriptors=xworker.swt.Widgets/@ThingEditor
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingEditor
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite/@thingEditor/@thingEditrGridData
                      sname=thingEditrGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.Commons/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditrGridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@reselectInfoComposite
                  sname=reselectInfoComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=reselectInfoComposite
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@reselectInfoComposite/@reselectInfoCompositeGridLayout
                    sname=reselectInfoCompositeGridLayout
                    stype=SWT.HORIZONTAL
                    sdescriptors=xworker.swt.Layouts/@FillLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=reselectInfoCompositeGridLayout
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@reselectInfoComposite/@infoBrowser
                    sname=infoBrowser
                    sdescriptors=xworker.swt.Widgets/@ThingDescripitonBrowser
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=infoBrowser
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@init
                  sname=init
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;

def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
actionContext.g().put("thing",parentContext.controlThing);
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.swt.Widgets/@Code
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=init
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@stackLayout
                  sname=stackLayout
                  stopControl=editComposite
                  sdescriptors=xworker.swt.Layouts/@StackLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=stackLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@GridData
                  sname=GridData
                  sstyle=FILL_BOTH
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=BEGINNING
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite
                sname=buttonComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=buttonComposite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@GridData
                  sname=GridData
                  sstyle=FILL_HORIZONTAL
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=END
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@RowLayout
                  sname=RowLayout
                  sfill=false
                  sjustify=false
                  smarginWidth=0
                  smarginHeight=0
                  smarginLeft=3
                  smarginTop=3
                  smarginRight=3
                  smarginBottom=3
                  spack=true
                  sspacing=3
                  stype=SWT.HORIZONTAL
                  swrap=true
                  sdescriptors=xworker.swt.Layouts/@RowLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=RowLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@saveButton
                  sname=saveButton
                  stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=saveButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      scode=thingEditor.doAction("save");
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@applyButton
                  sname=applyButton
                  stext=lang:d=应用(&amp;W)&en=Apply(&amp;W)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  spack=false
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=applyButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@applyButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@applyButton/@onSelection/@okButtonSelesion
                      sname=applyButtonSelesion
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import org.eclipse.swt.widgets.Shell;
import xworker.swt.design.DesignShellActions;

//保存事物
thingEditor.doAction("save");

//更新界面
DesignTools.update(parentContext.control);
//DesignToolDialog.applyControl(parentContext.control, thing, actionContext);

if(parentContext.control instanceof Shell){
    DesignShellActions.designTreeInit(actionContext, 
          controlTree, parentContext.control, true);
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=okButtonSelesion
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@openButton
                  sname=openButton
                  stext=lang:d=在IDE中打开(&amp;O)&en=Open In IDE(&amp;O)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=openButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@openButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@openButton/@onSelection/@ideOpenThing
                      sname=ideOpenThing
                      sthing=var:thing
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.utils.XWorkerActions/@ideOpenThing
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ideOpenThing
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton
                  sname=delteButton
                  stext=lang:d=删除(&amp;D)&en=Remove(&amp;D)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=delteButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection/@run
                      sname=run
                      sshell=ognl:parentContext.shell
                      sicon=ICON_QUESTION
                      sbuttons=OK | CANCEL
                      stitle=lang:d=删除控件&en=Delete Control
                      smessage=lang:d=注意控件删除后不可恢复，确实要删除当前的控件么？&en=Note that the controls cannot be restored after removal. Are you sure you want to delete the current control?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=run
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
DesignTools.remove(parentContext.control);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@15210
                    sname=RowData
                    sexclude=false
                    swidth=-1
                    sheight=-1
                    sdescriptors=xworker.swt.layout.RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=15210
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton
                  sname=layoutDataButton
                  stext=lang:d=布局数据(&amp;Z)&en=LayoutData(&amp;Z)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//变量
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
if(parent == null){
    //没有父控件，是shell
    noLayoutData(actionContext);
    return;
}

def layoutData = SwtUtils.getLayoutData(parent, controlThing);
if(layoutData == null){
    layoutData = SwtUtils.createLayoutData(parent);
    if(layoutData != null){
        controlThing.addChild(layoutData);
        controlThing.save();
    }
}

//打开编辑布局数据的表单
formDialog(actionContext, "thing", layoutData, 
     "title", controlThing.getMetadata().getLabel());
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog
                          sname=formDialog
                          stitle=var:title
                          sshell=ognl:layoutDataButton.getShell()
                          sthing=var:thing
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.DialogActions/@ThingFormDialog
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=formDialog
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions
                            sname=actions
                            sdescriptors=xworker.lang.actions.SelfAction/@actions1
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=actions
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@ok
                              sname=ok
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ok
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@modified
                              sname=modified
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=modified
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@noLayoutData
                          sname=noLayoutData
                          sshell=ognl:layoutDataButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=布局数据&en=LayoutData
                          smessage=lang:d=当前控件没有表单数据。&en=Current control does not have a LayoutData.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noLayoutData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton1
                  sname=layoutButton
                  stext=lang:d=布局(&amp;C)&en=Layout(&amp;C)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton1
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton1/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton1/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

import xworker.swt.design.DesignTools;
import org.xmeta.ActionContext;

//获取控件
def control = parentContext.control;
/*
if(!DesignTools.hasLayout(control)){
    //noLayout(actionContext);
    return;
}

def layout = control.getLayout();
if(layout == null){
    //noLayout(actionContext);
    //return;
}*/

def ac = new ActionContext();
ac.put("parent", layoutButton.getShell());
ac.put("parentContext", parentContext);

def thing = world.getThing("xworker.swt.design.LayoutDialog");
def shell = thing.doAction("create", ac);
shell.setVisible(true);
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;

if(actionContext.get("oldControl") == newControl){
    return true;
}
actionContext.g().put("oldControl", newControl);

if(DesignTools.isContainer(newControl) == false){
    layoutButton.setEnabled(false);
}else{
    layoutButton.setEnabled(true);
}


if(false){//newControl == parentContext.control){
    return true;
}else{
    if(thingEditor.doAction("isModified")){    
        nosaveTip(actionContext);
        return true;
    }else{
        DesignToolDialog.setNewControl(parentContext, newControl);
        thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
        thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
        actionContext.g().put("thing",parentContext.controlThing);
        return true;
    }    
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
                      sname=nosaveTip
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_WARNING
                      sbuttons=YES | NO
                      stitle=lang:d=保存模型&en=Save Model
                      svariables=newControl,oldControl:parentContext.control
                      smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=nosaveTip
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

//保存事物
thingEditor.doAction("save");

//更新界面
DesignToolDialog.applyControl(oldControl, thing, actionContext);

//println parentContext.controlThing;
DesignToolDialog.setNewControl(parentContext, newControl);
thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
actionContext.g().put("thing",parentContext.controlThing);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@no
                          sname=no
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

DesignToolDialog.setNewControl(parentContext, newControl);
thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
actionContext.g().put("thing",parentContext.controlThing);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=no
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@cancel1
                          sname=cancel
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

//设计器还是显示原来的控件
Designer.setCurrentDesignControl(parentContext.control);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=cancel1
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@controlChanged
                  sname=controlChanged
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
stackLayout.topControl = reselectInfoComposite;
mainComposite.layout();
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=controlChanged
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(stackLayout.topControl == editorToolBar && thingEditor.doAction("isModified")){
    def crm = confirm(actionContext);
    if(crm == "OK"){
        //保存事物
        thingEditor.doAction("save");

        //更新界面
        DesignTools.update(parentContext.control);
    }else if(crm == "CANCEL"){
        return;
    }
}

if(event.widget == actionContext.get("designItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem
          sname=designItem
          stext=lang:d=插入&en=Insert
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=designItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design
            sname=designContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=design
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainComposite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder
                sname=mainTabFolder
                sstyle=TOP
                sBORDER=false
                sFLAT=false
                sCLOSE=false
                sdisposeControlOnItemClosed=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@CTabFolder
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainTabFolder
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@onSelection
                  sname=onSelection
                  sdescriptors=xworker.swt.widgets.Widget/@Event
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=onSelection
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@onSelection/@GroovyAction
                    sname=GroovyAction
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
def selected = false;
if(event.item == insertableControlsItem){
    if(controlRegist.doAction("getThing") != null){
        actionContext.g()
    }
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=GroovyAction
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@insertableControls
                  sname=insertableControlsItem
                  stext=lang:d=控件向导&en=Control Guide
                  sCLOSE=false
                  sdelayReload=false
                  sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=insertableControls
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@insertableControls/@controlRegist
                    sname=controlRegist
                    sthing=xworker.swt.design.DesignToolControlIndex
                    sregistType=control
                    sparent=false
                    ssearchByKeywords=true
                    sshowContent=true
                    scontentDisplayType=Composite
                    sforceUseDefaultOpenMethod=false
                    sshowDescBrowser=false
                    sdescBrowserRight=false
                    sautoLoad=true
                    scache=true
                    scheck=false
                    sdescritporForNewThing=xworker.swt.design.InjectableControl
                    sdescritporChilds=false
                    ssashFormWeights=30,70
                    sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=controlRegist
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem
                  sname=modelItem
                  stext=lang:d=控件模型&en=Control Model
                  sCLOSE=false
                  sdelayReload=false
                  sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=modelItem
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm
                    sname=modelSashForm
                    sstyle=HORIZONTAL
                    sSMOOTH=false
                    sweights=30,70
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@SashForm
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=modelSashForm
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@modelRegist
                      sname=modelRegist
                      sthing=xworker.swt.Widgets
                      sregistType=child
                      sparent=false
                      ssearchByKeywords=true
                      sshowContent=false
                      scontentDisplayType=Composite
                      sforceUseDefaultOpenMethod=false
                      sshowDescBrowser=false
                      sdescBrowserRight=false
                      sautoLoad=true
                      scache=true
                      scheck=false
                      sdescritporForNewThing=xworker.lang.MetaDescriptor3
                      sdescritporChilds=false
                      sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=modelRegist
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@modelRegist/@actions
                        sname=actions
                        sdescriptors=xworker.swt.xworker.ThingRegistSelector/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@modelRegist/@actions/@selected
                          sname=selected
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import org.xmeta.Thing;

if(thing != null){
    def newThing = new Thing(thing.getMetadata().getPath());
    thingEditor.doAction("setThing", actionContext, "thing", newThing);
}
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=selected
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@thingEditor
                      sname=thingEditor
                      stitle=true
                      suseRootThing=false
                      ssaveActionContainer=true
                      sdescriptors=xworker.swt.Widgets/@ThingEditor
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditor
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@mainTabFolderGridData
                  sname=mainTabFolderGridData
                  sstyle=FILL_BOTH
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=BEGINNING
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=mainTabFolderGridData
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite
                sname=buttonComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=buttonComposite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@GridData
                  sname=GridData
                  sstyle=FILL_HORIZONTAL
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=END
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@RowLayout
                  sname=RowLayout
                  sfill=false
                  sjustify=false
                  smarginWidth=0
                  smarginHeight=0
                  smarginLeft=3
                  smarginTop=3
                  smarginRight=3
                  smarginBottom=3
                  spack=true
                  sspacing=3
                  stype=SWT.HORIZONTAL
                  swrap=true
                  sdescriptors=xworker.swt.Layouts/@RowLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=RowLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton
                  sname=beforeButton
                  stext=lang:d=插入前面(&amp;A)&en=Insert Before(&amp;A)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=preButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertedControl = null;
if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    insertedControl = newCreatedControl;
    actionContext.g().put("newCreatedControl", null);
    beforeButton.setText(beforeButton.getData("oldLabel"));
}else{    
    def insertControl = actions.doAction("getThingForInsert");
    if(insertControl == null){
        //为空不能插入
        noControlMsg(actionContext);
        return;
    }
    
    insertedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.ABOVE);
}

//选中新插入的控件
if(insertedControl != null && !insertedControl.isDisposed()){
    Designer.setCurrentDesignControl(insertedControl);
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter
                    sname=onMouseEnter
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseEnter
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.ABOVE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    beforeButton.setData("oldLabel", beforeButton.getText());
    beforeButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseExit
                    sname=onMouseExit
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseExit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseExit/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    beforeButton.setText(beforeButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton
                  sname=belowButton
                  stext=lang:d=插入后面(&amp;S)&en=Insert Below(&amp;S)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=afterButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertedControl = null;
if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    insertedControl = newCreatedControl;
    actionContext.g().put("newCreatedControl", null);
    belowButton.setText(belowButton.getData("oldLabel"));    
} else {
    def insertControl = actions.doAction("getThingForInsert");
    if(insertControl == null){
        //为空不能插入
        noControlMsg(actionContext);
        return;
    }
    
    insertedControl =DesignTools.insert(parentContext.control, insertControl, DesignTools.BELOW);
}

//选中新插入的控件
if(insertedControl != null && !insertedControl.isDisposed()){
    Designer.setCurrentDesignControl(insertedControl);
}

/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index + 1);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveBelow(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter
                    sname=onMouseEnter
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseEnter
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.BELOW);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    belowButton.setData("oldLabel", belowButton.getText());
    belowButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseExit
                    sname=onMouseExit
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseExit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseExit/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    belowButton.setText(belowButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton
                  sname=insideButton
                  stext=lang:d=插入里面(&amp;D)&en=Insert Inside(&amp;D)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=insideButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertedControl = null;
if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    insertedControl = newCreatedControl;
    actionContext.g().put("newCreatedControl", null);
    insideButton.setText(insideButton.getData("oldLabel"));
}else{    
    def insertControl = actions.doAction("getThingForInsert");
    if(insertControl == null){
        //为空不能插入
        noControlMsg(actionContext);
        return;
    }
    
    insertedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.INSIDE);
}

//选中新插入的控件
if(insertedControl != null && !insertedControl.isDisposed()){
    Designer.setCurrentDesignControl(insertedControl);
}
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import org.eclipse.swt.SWT;
import xworker.swt.util.SwtUtils;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = parentContext.control;
def controlThing = parentContext.controlThing;
if(control instanceof Composite){
    if(control.getLayout() == null){
         noLayoutMsg(actionContext);
         return;
    }
 
    //先添加到子节点
    def icontrol = insertControl.detach();
    SwtUtils.trimLayoutData(control, icontrol);
    controlThing.addChild(icontrol);
        
    try{
        //创建新的控件
        def ac = control.getData("_designer_actionContext");
        ac.put("parent", control);
                
        def newControl = icontrol.doAction("create", ac);

        //重新布局
        if(control.getParent() != null){
            control.layout();
            control.getParent().layout();
        }else{
            control.layout();
            //control.update();
        }
        //println("layouted");
    }catch(Exception e){
        controlThing.removeChild(icontrol);
        def box = new MessageBox(insideButton.getShell(), SWT.OK | SWT.ICON_INFORMATION);
        box.setText(UtilString.getString("lang:d=插入控件&en=Insert Control", actionContext));
        def msg = UtilString.getString("lang:d=插入失败，" + e.getMessage() + "&en=Insert error, " + e.getMessage(), actionCotnext);
        box.setMessage(msg);
        box.open();
    }
    controlThing.save();
}else{
    noCompositeMsg(actionContext);
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noCompositeMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg12
                          sname=errMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg12
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg121
                          sname=noLayoutMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=没有插入，容器还未设置布局。&en=No insertion. The container has not been configured layout yet
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg121
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@15353
                    sname=RowData
                    sexclude=false
                    swidth=-1
                    sheight=-1
                    sdescriptors=xworker.swt.layout.RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=15353
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter
                    sname=onMouseEnter
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseEnter
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.INSIDE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    insideButton.setData("oldLabel", insideButton.getText());
    insideButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseExit
                    sname=onMouseExit
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseExit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseExit/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    insideButton.setText(insideButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton
                  sname=replaceButton
                  stext=lang:d=替换(&amp;F)&en=Replace(&amp;F)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=replaceButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config
                      sname=config
                      sshell=ognl:replaceButton.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=OK | CANCEL
                      stitle=lang:d=覆盖控件&en=Replace Control
                      smessage=lang:d=确实要覆盖当前控件吗?&en=Are you sure to replace current control?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=config
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def newControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.REPLACE);
if(newControl != null){
    Designer.setCurrentDesignControl(newControl);
}
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;
import org.eclipse.swt.custom.SashForm;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing && parentThing.getParent() != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}
def isTtem = false;
if(parentThing.getParent() == parentControlThing){
    //CTabFolder, TabFolder等情形
    parentControlThing = parentThing;
    isTtem = true;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
//复制LayoutData
def ilayoutData = SwtUtils.getLayoutData(parentControl, icontrol);
if(ilayoutData == null){
    def oldLayoutData = SwtUtils.getLayoutData(parentControl, controlThing);
    if(oldLayoutData != null){
        icontrol.addChild(oldLayoutData.detach());
    }
}
parentControlThing.addChild(icontrol, index);
parentControlThing.removeChild(controlThing);
parentControlThing.save();


//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.peek().put("parent", parentControl);
if(isTtem){
    for(item in parentControl.getItems()){
        if(item.control == control){
            def newControl = icontrol.doAction("create", ac);
            if(newControl instanceof Control){
                item.setControl(newControl);
            }
            break;
        }
    }
    control.dispose();
}else{
    def newControl = icontrol.doAction("create", ac);
    if(newControl instanceof Control){
        newControl.moveAbove(control);
        Designer.setCurrentDesignControl(newControl);
    }
    
    //销毁原有的控件
    control.dispose();
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined
                            sname=ActionDefined
                            sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=ActionDefined
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg
                              sname=noParentMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg1
                              sname=noControlMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg1
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg11
                              sname=noCompositeMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg11
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg12
                              sname=errMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg12
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg111
                              sname=noSameRootThingMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg111
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton
                  sname=delteButton
                  stext=lang:d=删除(&amp;X)&en=Remove(&amp;X)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=delteButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection/@run
                      sname=run
                      sshell=ognl:parentContext.shell
                      sicon=ICON_QUESTION
                      sbuttons=OK | CANCEL
                      stitle=lang:d=删除控件&en=Delete Control
                      smessage=lang:d=注意控件删除后不可恢复，确实要删除当前的控件么？&en=Note that the controls cannot be restored after removal. Are you sure you want to delete the current control?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=run
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
DesignTools.remove(parentContext.control);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton
                  sname=layoutDataButton
                  stext=lang:d=布局数据(&amp;Z)&en=LayoutData(&amp;Z)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//变量
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
if(parent == null){
    //没有父控件，是shell
    noLayoutData(actionContext);
    return;
}

def layoutData = SwtUtils.getLayoutData(parent, controlThing);
if(layoutData == null){
    layoutData = SwtUtils.createLayoutData(parent);
    if(layoutData != null){
        controlThing.addChild(layoutData);
        controlThing.save();
    }
}

//打开编辑布局数据的表单
formDialog(actionContext, "thing", layoutData, 
     "title", controlThing.getMetadata().getLabel());
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog
                          sname=formDialog
                          stitle=var:title
                          sshell=ognl:layoutDataButton.getShell()
                          sthing=var:thing
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.DialogActions/@ThingFormDialog
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=formDialog
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions
                            sname=actions
                            sdescriptors=xworker.lang.actions.SelfAction/@actions1
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=actions
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@ok
                              sname=ok
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ok
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@modified
                              sname=modified
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=modified
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@noLayoutData
                          sname=noLayoutData
                          sshell=ognl:layoutDataButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=布局数据&en=LayoutData
                          smessage=lang:d=当前控件没有表单数据。&en=Current control does not have a LayoutData.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noLayoutData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton1
                  sname=layoutButton
                  stext=lang:d=布局(&amp;C)&en=Layout(&amp;C)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton1
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton1/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton1/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

import xworker.swt.design.DesignTools;
import org.xmeta.ActionContext;

//获取控件
def control = parentContext.control;
/*
if(!DesignTools.hasLayout(control)){
    //noLayout(actionContext);
    return;
}

def layout = control.getLayout();
if(layout == null){
    //noLayout(actionContext);
    //return;
}*/

def ac = new ActionContext();
ac.put("parent", layoutButton.getShell());
ac.put("parentContext", parentContext);

def thing = world.getThing("xworker.swt.design.LayoutDialog");
def shell = thing.doAction("create", ac);
shell.setVisible(true);
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@getInsertThing
                  sname=getThingForInsert
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
if(mainTabFolder.getSelection() == insertableControlsItem){
    if(controlRegist.doAction("getThing") == null){
        //println "nothing selected";
        return null;
    }
        
    def ac = controlRegist.doAction("getActionContext");
    //println ac.get("injectableControl");
    def control = ac.injectableControl.doAction("getInsertControl", ac);
    //println(control);
    return control;
}else{
    try{
        if(thingEditor.doAction("getThing") == null){
            return null;
        }
        thingEditor.doAction("save");
        return thingEditor.doAction("getRootThing");    
    }catch(Exception e){
        return null;
    }
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=getInsertThing
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;
import org.eclipse.swt.widgets.Shell;

//只是简单替换原有的控件
def thing = Designer.getThing(newControl);
if(thing == null){
    return false;
}

if(insideButton.isDisposed()){
    return false;
}

if(DesignTools.isContainer(newControl) == false){
    insideButton.setEnabled(false);
    layoutButton.setEnabled(false);
}else{
    insideButton.setEnabled(true);
    layoutButton.setEnabled(true);
}

//Shell特殊处理
if(newControl instanceof Shell){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    replaceButton.setEnabled(false);
}else{
    beforeButton.setEnabled(true);
    belowButton.setEnabled(true);
    replaceButton.setEnabled(true);

}

parentContext.actions.doAction("setNewControl", parentContext, "newControl", newControl);
//println "newControl=" + newControl;
return true;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction
                  sname=insert
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.eclipse.swt.widgets.Control;
import xworker.swt.util.SwtUtils;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined/@noParentMsg
                      sname=noParentMsg
                      sshell=ognl:beforeButton.getShell()
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=插入控件&en=Insert Control
                      smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=noParentMsg
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined/@noParentMsg1
                      sname=noControlMsg
                      sshell=ognl:beforeButton.getShell()
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=插入控件&en=Insert Control
                      smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=noParentMsg1
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined/@noParentMsg11
                      sname=noSameRootThingMsg
                      sshell=ognl:beforeButton.getShell()
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=插入控件&en=Insert Control
                      smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ins
                    sisValidate=false
                    sname=ins
                    sdescriptors=xworker.lang.actions.Inout/@ins
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ins
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ins/@type
                      sname=type
                      stypeCheck=false
                      soptional=true
                      scheck=false
                      scheckLevel=exception
                      sdescriptors=xworker.lang.actions.Inout/@ins/@param
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=type
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
/*if(event.widget == actionContext.get("designItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext);
}else */
if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainCompositeGridLayout
                sname=mainCompositeGridLayout
                smakeColumnsEqualWidth=false
                smarginWidth=5
                smarginHeight=5
                smarginLeft=0
                smarginTop=0
                smarginRight=0
                smarginBottom=0
                shorizontalSpacing=5
                sverticalSpacing=5
                sdescriptors=xworker.swt.Layouts/@GridLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainCompositeGridLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

if(DesignTools.isContainer(parentContext.control) == false){
    insideButton.setEnabled(false);
}
/*
def parentControl = parentContext.control.getParent();

if(parentControl instanceof TabFolder || parentControl instanceof CTabFolder
    || parentControl instanceof SashForm || parentControl instanceof ScrolledComposite){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
}

if(parentContext.controlThing.getThingName() == "InjectableComposite"){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    insideButton.setEnabled(false);
}*/
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem
          sname=moveItem
          stext=lang:d=移动&en=Move
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=moveItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext
            sname=moveContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=moveContext
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=Composite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste
                sname=infoCompoiste
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=infoCompoiste
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste/@infoCompositeGridLayout
                  sname=infoCompositeGridLayout
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=infoCompositeGridLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste/@infoLabel
                  sname=infoLabel
                  sBORDER=false
                  sstyle=WRAP
                  stype=HORIZONTAL
                  salignment=LEFT
                  stext=lang:d=请用Ctrl+鼠标中间选择一个界面上的控件。&en=Please select a control from the interface by click Ctrl+ mouse middle button.
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Label
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=infoLabel
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste/@infoLabel/@infoLabelGridData
                    sname=infoLabelGridData
                    sstyle=FILL_HORIZONTAL
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=infoLabelGridData
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite
                sname=operationComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=operationComposite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@operationCompositeGridData
                  sname=operationCompositeGridLabel
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=operationCompositeGridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@operateLabel
                  sname=operateLabel
                  sBORDER=false
                  sstyle=WRAP
                  stype=HORIZONTAL
                  salignment=LEFT
                  stext=lang:d=请选择操作方式。&en=Please select an operation.
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Label
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=operateLabel
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@operateLabel/@operataLabelGridData
                    sname=operataLabelGridData
                    sstyle=FILL_HORIZONTAL
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=operataLabelGridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@copyButton
                  sname=copyButton
                  stext=lang:d=拷贝&en=Copy
                  stype=SWT.CHECK
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=copyButton
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste
                  sname=buttonCompoiste
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=buttonCompoiste
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@buttonCompositeGridData
                    sname=buttonCompositeGridData
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=END
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=buttonCompositeGridData
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@buttonCompositeRowLayout
                    sname=buttonCompositeRowLayout
                    sfill=false
                    sjustify=false
                    smarginWidth=0
                    smarginHeight=0
                    smarginLeft=3
                    smarginTop=3
                    smarginRight=3
                    smarginBottom=3
                    spack=true
                    sspacing=3
                    stype=SWT.HORIZONTAL
                    swrap=true
                    sdescriptors=xworker.swt.Layouts/@RowLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=buttonCompositeRowLayout
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton
                    sname=beforeButton
                    stext=lang:d=前面(&amp;F)&en=Before(&amp;F)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=preButton
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, toControl, DesignTools.ABOVE, copyButton.getSelection(), parentContext);
stackLayout.topControl = infoCompoiste;
mainComposite.layout();  
/*
import org.eclipse.swt.widgets.Control;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertControlThing = parentContext.controlThing;
if(insertControlThing == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = toControl;
def controlThing = world.getThing(control.getData("_designer_thingPath"));
if(controlThing == null || controlThing.getParent() == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}
def parentThing = controlThing.getParent();

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControlThing.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//原来的控件删除
def oldParent = insertControlThing.getParent();
oldParent.removeChild(insertControlThing);
def oldParentControl = parentContext.control.getParent();
parentContext.control.dispose();
oldParent.save();
oldParentControl.layout();
if(oldParentControl.getParent() != null){
    oldParentControl.getParent().layout();
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}

parentContext.g().put("control", newControl);
parentContext.g().put("controlThing", icontrol);
parentContext.g().put("controlContext", ac);
Designer.setCurrentDesignControl(newControl);
*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter
                      sname=onMouseEnter
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseEnter
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.ABOVE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    beforeButton.setData("oldLabel", beforeButton.getText());
    beforeButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseExit
                      sname=onMouseExit
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseExit
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseExit/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    beforeButton.setText(beforeButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton
                    sname=belowButton
                    stext=lang:d=后面(&amp;B&en=Below(&amp;B)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=afterButton
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, toControl, DesignTools.BELOW, copyButton.getSelection(), parentContext);
stackLayout.topControl = infoCompoiste;
mainComposite.layout();  
/*
import org.eclipse.swt.widgets.Control;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertControlThing = parentContext.controlThing;
if(insertControlThing == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = toControl;
def controlThing = world.getThing(control.getData("_designer_thingPath"));
if(controlThing == null || controlThing.getParent() == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}
def parentThing = controlThing.getParent();

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControlThing.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index + 1);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveBelow(control);
}

//原来的控件删除
def oldParent = insertControlThing.getParent();
oldParent.removeChild(insertControlThing);
def oldParentControl = parentContext.control.getParent();
parentContext.control.dispose();
oldParent.save();
oldParentControl.layout();
if(oldParentControl.getParent() != null){
    oldParentControl.getParent().layout();
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}

parentContext.g().put("control", newControl);
parentContext.g().put("controlThing", icontrol);
parentContext.g().put("controlContext", ac);
Designer.setCurrentDesignControl(newControl);
*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter
                      sname=onMouseEnter
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseEnter
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.BELOW);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    belowButton.setData("oldLabel", belowButton.getText());
    belowButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseExit
                      sname=onMouseExit
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseExit
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseExit/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    belowButton.setText(belowButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton
                    sname=insideButton
                    stext=lang:d=里面(&amp;I)&en=Inside(&amp;I)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=insideButton
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, toControl, DesignTools.INSIDE, copyButton.getSelection(), parentContext);

stackLayout.topControl = infoCompoiste;
mainComposite.layout();  
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import org.eclipse.swt.SWT;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertControlThing = parentContext.controlThing;
if(insertControlThing == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = toControl;
def controlThing = world.getThing(control.getData("_designer_thingPath"));
if(controlThing == null || controlThing.getParent() == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}
if(control == parentContext.control.getParent()){
    //已经在同一个容器中
    sameParentMsg(actionContext);
    return;
}

if(control instanceof Composite){
    //先添加到子节点
    def icontrol = insertControlThing.detach();
    SwtUtils.trimLayoutData(control, icontrol);
    controlThing.addChild(icontrol);
        
    try{
        //创建新的控件
        def ac = control.getData("_designer_actionContext");
        ac.put("parent", control);
                
        def newControl = icontrol.doAction("create", ac);

        //原来的控件删除
        def oldParent = insertControlThing.getParent();
        oldParent.removeChild(insertControlThing);
        def oldParentControl = parentContext.control.getParent();
        parentContext.control.dispose();
        oldParent.save();
        oldParentControl.layout();
        if(oldParentControl.getParent() != null){
            oldParentControl.getParent().layout();
        }    

        //重新布局
        if(control.getParent() != null){
            control.layout();
            control.getParent().layout();
        }else{
            control.layout();
            //control.update();
        }
        
    	   parentContext.g().put("control", newControl);
        parentContext.g().put("controlThing", icontrol);
        parentContext.g().put("controlContext", ac);
        Designer.setCurrentDesignControl(newControl);
    }catch(Exception e){
        controlThing.removeChild(icontrol);
        def box = new MessageBox(insideButton.getShell(), SWT.OK | SWT.ICON_INFORMATION);
        box.setText(UtilString.getString("lang:d=插入控件&en=Insert Control", actionContext));
        def msg = UtilString.getString("lang:d=插入失败，" + e.getMessage() + "&en=Insert error, " + e.getMessage(), actionContext);
        box.setMessage(msg);
        box.open();
    }
    controlThing.save();
}else{
    noCompositeMsg(actionContext);
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noCompositeMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg12
                            sname=errMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg12
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg121
                            sname=sameParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件已经在当前容器中。&en=The control cannot be inserted. The control is already in the current container.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg121
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseExit
                      sname=onMouseExit
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseExit
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseExit/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    insideButton.setText(insideButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter
                      sname=onMouseEnter
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseEnter
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.INSIDE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    insideButton.setData("oldLabel", insideButton.getText());
    insideButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton
                    sname=replaceButton
                    stext=lang:d=替换(&amp;R)&en=Replace(&amp;R)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=replaceButton
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config
                        sname=confirm
                        sshell=ognl:replaceButton.getShell()
                        sicon=ICON_QUESTION
                        sbuttons=OK | CANCEL
                        stitle=lang:d=覆盖控件&en=Replace Control
                        smessage=lang:d=确实要覆盖当前控件吗?&en=Are you sure to replace current control?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=config
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions
                          sname=actions
                          sdescriptors=xworker.lang.actions.SelfAction/@actions1
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=actions
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok
                            sname=ok
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, toControl, DesignTools.REPLACE, copyButton.getSelection(), parentContext);

stackLayout.topControl = infoCompoiste;
mainComposite.layout();  
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertControlThing = parentContext.controlThing;
if(insertControlThing == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = toControl;
def controlThing = world.getThing(control.getData("_designer_thingPath"));
if(controlThing == null || controlThing.getParent() == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}
def parentThing = controlThing.getParent();

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControlThing.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.removeChild(controlThing);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
    Designer.setCurrentDesignControl(newControl);
}

//销毁原有的控件
control.dispose();
//原来的控件删除
def oldParent = insertControlThing.getParent();
oldParent.removeChild(insertControlThing);
def oldParentControl = parentContext.control.getParent();
parentContext.control.dispose();
oldParent.save();
oldParentControl.layout();
if(oldParentControl.getParent() != null){
    oldParentControl.getParent().layout();
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}

parentContext.g().put("control", newControl);
parentContext.g().put("controlThing", icontrol);
parentContext.g().put("controlContext", ac);
Designer.setCurrentDesignControl(newControl);
*/
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=ok
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg
                                sname=noParentMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg1
                                sname=noControlMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg1
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg11
                                sname=noCompositeMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg11
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg12
                                sname=errMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg12
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg111
                                sname=noSameRootThingMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg111
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton1
                    sname=cancelButton
                    stext=lang:d=取消&en=Cancel
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=insideButton1
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton1/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton1/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

stackLayout.topControl = infoCompoiste;
mainComposite.layout();  
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import org.eclipse.swt.SWT;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertControlThing = parentContext.controlThing;
if(insertControlThing == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = toControl;
def controlThing = world.getThing(control.getData("_designer_thingPath"));
if(controlThing == null || controlThing.getParent() == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}
if(control == parentContext.control.getParent()){
    //已经在同一个容器中
    sameParentMsg(actionContext);
    return;
}

if(control instanceof Composite){
    //先添加到子节点
    def icontrol = insertControlThing.detach();
    SwtUtils.trimLayoutData(control, icontrol);
    controlThing.addChild(icontrol);
        
    try{
        //创建新的控件
        def ac = control.getData("_designer_actionContext");
        ac.put("parent", control);
                
        def newControl = icontrol.doAction("create", ac);

        //原来的控件删除
        def oldParent = insertControlThing.getParent();
        oldParent.removeChild(insertControlThing);
        def oldParentControl = parentContext.control.getParent();
        parentContext.control.dispose();
        oldParent.save();
        oldParentControl.layout();
        if(oldParentControl.getParent() != null){
            oldParentControl.getParent().layout();
        }    

        //重新布局
        if(control.getParent() != null){
            control.layout();
            control.getParent().layout();
        }else{
            control.layout();
            //control.update();
        }
        
    	   parentContext.g().put("control", newControl);
        parentContext.g().put("controlThing", icontrol);
        parentContext.g().put("controlContext", ac);
        Designer.setCurrentDesignControl(newControl);
    }catch(Exception e){
        controlThing.removeChild(icontrol);
        def box = new MessageBox(insideButton.getShell(), SWT.OK | SWT.ICON_INFORMATION);
        box.setText(UtilString.getString("lang:d=插入控件&en=Insert Control", actionContext));
        def msg = UtilString.getString("lang:d=插入失败，" + e.getMessage() + "&en=Insert error, " + e.getMessage(), actionContext);
        box.setMessage(msg);
        box.open();
    }
    controlThing.save();
}else{
    noCompositeMsg(actionContext);
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@stackLayout
                sname=stackLayout
                stopControl=infoCompoiste
                sdescriptors=xworker.swt.Layouts/@StackLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=stackLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;
import xworker.swt.design.DesignToolDialog;

if(newControl != parentContext.control){
    //println "xxxxxxxxxx";
    stackLayout.topControl = operationComposite;
    mainComposite.layout();    
    
    actionContext.g().put("toControl", newControl);
    actionContext.g().put("srcControl", parentContext.control);
}else{
    stackLayout.topControl = infoCompoiste;
    mainComposite.layout();  
    
    //println "xxxxxxx";
    def thing = Designer.getThing(parentContext.control);
    actionContext.g().put("insertControlThing", thing.detach());
}

if(DesignTools.isContainer(newControl)){
    insideButton.setEnabled(true);
}else{
    insideButton.setEnabled(false);
}

DesignToolDialog.setNewControl(parentContext, newControl);
return true;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
if(event.widget == actionContext.get("designMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@getThingForInsert
                  sname=getThingForInsert
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  scode=return insertControlThing;
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=getThingForInsert
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.Widgets/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@mainCompositeGridData
                sname=mainCompositeGridData
                sstyle=FILL_BOTH
                shorizontalIndent=0
                swidth=-1
                sheight=-1
                shorizontalAlignment=BEGINNING
                sverticalAlignment=CENTER
                shorizontalSpan=1
                sverticalSpan=1
                sgrabExcessHorizontalSpace=false
                sgrabExcessVerticalSpace=false
                sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainCompositeGridData
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem
          sname=eventItem
          stext=lang:d=事件&en=Event
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=eventItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event
            sname=eventContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=event
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainComposite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite
                sname=eventMainComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainComposite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@mainCompositeGridLayout
                  sname=mainCompositeGridLayout
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=mainCompositeGridLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm
                  sname=sashForm
                  sstyle=HORIZONTAL
                  sSMOOTH=false
                  sweights=30,70
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@SashForm
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=sashForm
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@sashFormGridData
                    sname=sashFormGridData
                    sstyle=FILL_BOTH
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=sashFormGridData
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm
                    sname=eventSashForm
                    sstyle=VERTICAL
                    sSMOOTH=false
                    sweights=30,70
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@SashForm
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=eventSashForm
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite
                      sname=controlEventComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=controlEventComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@controlEventCompositeGridLayout
                        sname=controlEventCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=controlEventCompositeGridLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@haveEventLabel
                        sname=haveEventLabel
                        sBORDER=false
                        stype=HORIZONTAL
                        salignment=LEFT
                        stext=lang:d=已实现事件：&en=Implemented events:
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Label
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=haveEventLabel
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@haveEventLabel/@GridData
                          sname=GridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=GridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@implementedList
                        sname=implementedList
                        sstyle=SINGLE
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sBORDER=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@List
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=implementedList
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@implementedList/@implementsListGridData
                          sname=implementsListGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=implementsListGridData
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@implementedList/@onSelection
                          sname=onSelection
                          sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite
                      sname=eventComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=eventComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventCompositeGridLayout
                        sname=eventCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventCompositeGridLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventLabel
                        sname=eventLabel
                        sBORDER=false
                        stype=HORIZONTAL
                        salignment=LEFT
                        stext=lang:d=事件类型：&en=Events:
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Label
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventLabel
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText
                        sname=eventFilterText
                        sstyle=SINGLE
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sWRAP=false
                        sREAD_ONLY=false
                        sPASSWORD=false
                        sSEARCH=false
                        sCANCEL=false
                        sBORDER=true
                        salign=LEFT
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Text
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=controlFilterText
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@GridData
                          sname=GridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=GridData
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onModify
                          sname=onModify
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onModify
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onModify/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
def text = eventFilterText.getText().toLowerCase();;

eventList.removeAll();
for(listener in listeners){
    def key = listener.getString("value");
    if(key.toLowerCase().indexOf(text) != -1){
        eventList.add(key);
    }
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onKeyDown
                          sname=onKeyDown
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onKeyDown
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onKeyDown/@KeyTravel
                            sname=KeyTravel
                            swidget=var:eventList
                            sselectionListener=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.EventActions/@KeyTravel
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=KeyTravel
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList
                        sname=eventList
                        sstyle=SINGLE
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sBORDER=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@List
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventList
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@eventListGridData
                          sname=eventListGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=eventListGridData
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore
                          sname=DataStore
                          sattachToParent=false
                          sloadBackground=true
                          sautoLoad=true
                          sautoSave=false
                          spaging=extend
                          spageSize=50
                          sstoreSortField=_extend
                          sstoreSortDir=ASC
                          seditable=extend
                          seditmethod=extend
                          sdescriptors=xworker.swt.widgets.List/@DataStore
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=DataStore
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects
                            sname=dataObjects
                            sdescriptors=xworker.app.view.swt.data.DataStore/@DataObjects
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=dataObjects
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject
                              sname=AttributeValueDataObject
                              sattributePath=xworker.swt.widgets.Widget/@Event/@name
                              svalueName=value
                              sdisplayName=label
                              seditCols=2
                              spaging=false
                              snoTotalCount=false
                              spagineByCursor=false
                              sreadUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@read
                              screateUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@create
                              supdateUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@update
                              sdestroyUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@destroy
                              LstoreAutoDestroy=false
                              sstoreAutoLoad=false
                              LstoreAutoSave=true
                              LstoreBatch=true
                              LstorePruneModifiedRecords=false
                              LstoreRemoteSort=false
                              LstoreRestful=false
                              sstoreRoot='rows'
                              sstoreSuccessProperty='success'
                              sstoreTotalProperty='totalCount'
                              sstoreMessageProperty='msg'
                              sgridEditable=false
                              sgridEditType=cell
                              sformReadUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@read
                              sformCreateUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@create
                              sformUpdateUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@update
                              sformDestroyUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@delete
                              spaging_afterPageText=页 共
                              spaging_beforePageText=第
                              Lpaging_displayInfo=false
                              spaging_displayMsg=第{0}-第{1}条，共{2}条
                              spaging_emptyMsg=没有数据
                              spaging_firstText=首页
                              spaging_lastText=最后一页
                              spaging_nextText=下一页
                              Lpaging_prependButtons=false
                              spaging_prevText=上一页
                              spaging_refreshText=刷新
                              sgridColumnLocking=false
                              sgridLockText='锁定'
                              sgridUnlockText='解锁'
                              scolumnGroup=false
                              sgridCheckable=false
                              sgridRowNumber=false
                              sgridGrouping=false
                              sgridGroupTextTpl='{text} ({[values.rs.length]} 条)'
                              sgridRowExpander=false
                              sautoGenerateId=false
                              sidGenerateType=action
                              sidAction=generateId
                              sstoreSortDir=ASC
                              sautoInit=false
                              sautoInitAction=beforeCreate
                              scacheRelation=false
                              scacheRelationMaxSize=1000
                              scacheRelationReadnone=false
                              safterCreated=false
                              sonLoaded=false
                              sbeforeUpdate=false
                              safterUpdated=false
                              sbeforeDelete=false
                              safterDeleted=false
                              sbeforeQuery=false
                              safterQueryed=false
                              sshowUserTask=false
                              sdescriptors=xworker.dataObject.DataObjects/@AttributeValueDataObject
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=AttributeValueDataObject
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject/@5522
                                sname=value
                                slabel=值
                                stype=string
                                soptional=true
                                skey=true
                                sdataField=true
                                sviewField=true
                                sreadField=true
                                screateEditor=true
                                seditEditor=true
                                sviewEditor=true
                                sgridEditor=true
                                squeryEditor=true
                                sreadOnly=false
                                seditable=true
                                sdisabled=false
                                sshowLabel=true
                                slabelAlign=right
                                slabelVAlign=baseline
                                svalidateAllowBlank=true
                                LvalidateOnBlur=true
                                LallowDecimals=true
                                LallowNegative=true
                                sshowInTable=true
                                sdisplayRelationLabel=false
                                sgridFixed=false
                                sgridHidden=false
                                sgridHideable=true
                                sgridSortable=false
                                scolumnLocked=false
                                sgridGroupable=true
                                sgridMenuDisabled=false
                                sgridResizable=true
                                sdescriptors=xworker.dataObject.AbstractDataObject/@attribute
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=5522
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject/@5523
                                sname=label
                                slabel=标签
                                stype=string
                                soptional=true
                                skey=false
                                sdataField=true
                                sviewField=true
                                sreadField=true
                                screateEditor=true
                                seditEditor=true
                                sviewEditor=true
                                sgridEditor=true
                                sreadOnly=false
                                seditable=true
                                sdisabled=false
                                sshowLabel=true
                                slabelAlign=right
                                slabelVAlign=baseline
                                svalidateAllowBlank=true
                                LvalidateOnBlur=true
                                LallowDecimals=true
                                LallowNegative=true
                                sshowInTable=true
                                sdisplayRelationLabel=false
                                sgridFixed=false
                                sgridHidden=false
                                sgridHideable=true
                                sgridSortable=false
                                scolumnLocked=false
                                sgridGroupable=true
                                sgridMenuDisabled=false
                                sgridResizable=true
                                sdescriptors=xworker.dataObject.AbstractDataObject/@attribute
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=5523
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@onSelection
                          sname=onSelection
                          sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite
                    sname=editComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editComposite
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite
                      sname=codeComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=codeComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeCompositeGridLayout
                        sname=codeCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=codeCompositeGridLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor
                        sname=codeEditor
                        sstyle=MULTI
                        sFULL_SELECTION=false
                        sREAD_ONLY=false
                        sWRAP=false
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sBORDER=false
                        salign=LEFT
                        slineNumber=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@StyledText
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=codeEditor
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor/@Colorer
                          sname=Colorer
                          scodeName=groovy
                          scodeType=groovy
                          sdescriptors=xworker.swt.custom.StyledText/@Colorer
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=Colorer
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor/@codeAssistor
                          sname=codeAssistor
                          sinitCache=false
                          sdescriptors=xworker.swt.custom.StyledText/@CodeAssistor
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=codeAssistor
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor/@codeEditorGridData
                          sname=codeEditorGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=codeEditorGridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709
                        sname=buttonComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=7709
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7710
                          sname=buttonCompositeGridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=END
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7710
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7711
                          sname=buttonCompositeRowLayout
                          sfill=false
                          sjustify=false
                          smarginWidth=0
                          smarginHeight=0
                          smarginLeft=3
                          smarginTop=3
                          smarginRight=3
                          smarginBottom=3
                          spack=true
                          sspacing=3
                          stype=SWT.HORIZONTAL
                          swrap=true
                          sdescriptors=xworker.swt.Layouts/@RowLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7711
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712
                          sname=saveButton
                          stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7712
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712/@7713
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7713
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712/@7714
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7714
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712/@7714/@7715
                              sname=saveButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7715
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716
                          sname=removeButton
                          stext=lang:d=移除(&amp;R)&en=Remove(&amp;R)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7716
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716/@7717
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7717
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716/@7718
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7718
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716/@7718/@7719
                              sname=removeButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@remove
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7719
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161
                          sname=toModelButton
                          stext=lang:d=编辑模型(&amp;M)&en=Edit Model(&amp;M)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=77161
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7717
                            sname=RowData
                            sexclude=false
                            swidth=120
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7717
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7718
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7718
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7718/@7719
                              sname=toModelButtonSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7719
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7718/@7719/@GroovyAction
                                sname=GroovyAction
                                sisSynchronized=false
                                sthrowException=true
                                suseOtherAction=false
                                svarScope=Local
                                sdisableGlobalContext=false
                                Scode=
#$@text#$@
//用事物编辑器编辑
thingEditor.editorActions.doAction("setThing", ["thing": eventActionThing]);
editStackLayout.topControl = thingEditorComposite;
editComposite.layout();
#$@text#$@
                                sinterpretationType=Action
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdebugLog=false
                                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=GroovyAction
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite
                      sname=thingEditorComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditorComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@thingEditorCompositeGridLayout
                        sname=thingEditorCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=thingEditorCompositeGridLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@thingEditor
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=false
                        sdescriptors=xworker.swt.Widgets/@ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=thingEditor
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@thingEditor/@thingEditorGridData
                          sname=thingEditorGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.Commons/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=thingEditorGridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709
                        sname=buttonComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=7709
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7710
                          sname=buttonCompositeGridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=END
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7710
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7711
                          sname=buttonCompositeRowLayout
                          sfill=false
                          sjustify=false
                          smarginWidth=0
                          smarginHeight=0
                          smarginLeft=3
                          smarginTop=3
                          smarginRight=3
                          smarginBottom=3
                          spack=true
                          sspacing=3
                          stype=SWT.HORIZONTAL
                          swrap=true
                          sdescriptors=xworker.swt.Layouts/@RowLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7711
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712
                          sname=saveButton
                          stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7712
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712/@7713
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7713
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712/@7714
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7714
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712/@7714/@7715
                              sname=saveButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7715
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716
                          sname=removeButton
                          stext=lang:d=移除(&amp;R)&en=Remove(&amp;R)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7716
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716/@7717
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7717
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716/@7718
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7718
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716/@7718/@7719
                              sname=removeButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@remove
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7719
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite
                      sname=newEventComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=newEventComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@newEventGridLayout
                        sname=newEventGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=newEventGridLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@newEventForm
                        sname=newEventForm
                        sdescriptorThing=xworker.swt.widgets.Widget/@Event
                        scolumn=1
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        sdescriptors=xworker.swt.Widgets/@ThingForm
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=newEventForm
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@newEventForm/@newEventFormGridData
                          sname=newEventFormGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=newEventFormGridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971
                        sname=buttonComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=1971
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@1972
                          sname=buttonCompositeGridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=END
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=1972
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@1973
                          sname=buttonCompositeRowLayout
                          sfill=false
                          sjustify=false
                          smarginWidth=0
                          smarginHeight=0
                          smarginLeft=3
                          smarginTop=3
                          smarginRight=3
                          smarginBottom=3
                          spack=true
                          sspacing=3
                          stype=SWT.HORIZONTAL
                          swrap=true
                          sdescriptors=xworker.swt.Layouts/@RowLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=1973
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton
                          sname=createActionContainerEventButton
                          stext=lang:d=使用动作容器&en=Use ActionContainer
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=createEventButton
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=Listeners
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection
                              sname=createEventSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=createEventSelection
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection/@SelectActionContainerDialog
                                sname=selectActionContainerDialog
                                stitle=lang:d=选择动作容器&en=Select ActionContainer
                                sshell=ognl:buttonComposite.getShell()
                                sactionContext=ognl:parentContext.controlContext
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.DialogActions/@SelectActionContainerDialog
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=SelectActionContainerDialog
                                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection/@SelectActionContainerDialog/@actions
                                  sname=actions
                                  sdescriptors=xworker.lang.actions.SelfAction/@actions1
                                  sinheritDescription=false
                                  sth_createIndex=false
                                  sth_registMyChilds=false
                                  sth_registDisabled=false
                                  sth_mark=false
                                  sid=actions
                                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection/@SelectActionContainerDialog/@actions/@ok
                                    sname=ok
                                    sisSynchronized=false
                                    sthrowException=true
                                    suseOtherAction=false
                                    svarScope=Local
                                    sdisableGlobalContext=false
                                    Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.design.Designer;

def eventName = eventList.getSelection()[0];
def event = new Thing("xworker.swt.widgets.Widget/@Event");
def values = newEventForm.doAction("getValues", actionContext);
event.getAttributes().putAll(values);
event.put("name", eventName);
event.metadata.setId(eventName);
event.ref = actionContainerName + ":" + actionName;
//def eventAction = new Thing(actionDescriptor.metadata.path);

//控件事物
def control = currentControl;
def controlThing = world.getThing(control.getData(Designer.DATA_THING));
//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);
if(eventThing == null){
    //声明事件并添加
    //event.addChild(eventAction);
    controlThing.addChild(event);
    
    controlThing.save();
    
    //让事件生效
    swtContext.peek().put("parent", control);
    event.doAction("create", swtContext);    
}else{    
    //这是只声明了事件，但没有添加相应动作的情形
    //eventThing.addChild(eventAction);
    
    controlThing.save();
}

//编辑事件
actions.doAction("editEvent", actionContext, "eventThing", event);
//添加到已实现，从未实现的事件列表中删除
implementedList.add(eventName);
implementedList.setSelection([eventName] as String[]);
eventList.remove(eventName);
#$@text#$@
                                    sinterpretationType=Action
                                    screateLocalVarScope=false
                                    ssaveReturn=false
                                    sdebugLog=false
                                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                    sinheritDescription=false
                                    sth_createIndex=false
                                    sth_registMyChilds=false
                                    sth_registDisabled=false
                                    sth_mark=false
                                    sid=ok
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1
                          sname=createGroovyEventButton
                          stext=lang:d=使用Groovy&en=Using Groovy
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=createEventButton1
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1/@Listeners
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=Listeners
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1/@Listeners/@createEventSelection
                              sname=createEventSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=createEventSelection
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1/@Listeners/@createEventSelection/@GroovyAction
                                sname=GroovyAction
                                sisSynchronized=false
                                sthrowException=true
                                suseOtherAction=false
                                svarScope=Local
                                sdisableGlobalContext=false
                                Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.design.Designer;

def eventName = eventList.getSelection()[0];
def event = new Thing("xworker.swt.widgets.Widget/@Event");
event.put("name", eventName);
event.metadata.setId(eventName);
def eventAction = new Thing("xworker.lang.actions.GroovyAction");

//控件事物
def control = currentControl;
def controlThing = world.getThing(control.getData(Designer.DATA_THING));
//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);
if(eventThing == null){
    //声明事件并添加
    event.addChild(eventAction);
    controlThing.addChild(event);
    
    controlThing.save();
    
    //让事件生效
    swtContext.peek().put("parent", control);
    event.doAction("create", swtContext);  
    
    eventThing = event;  
}else{    
    //这是只声明了事件，但没有添加相应动作的情形
    eventThing.addChild(eventAction);
    
    controlThing.save();
}

//编辑事件
actions.doAction("editEvent", actionContext, "eventThing", eventThing);
//添加到已实现，从未实现的事件列表中删除
implementedList.add(eventName);
implementedList.setSelection([eventName] as String[]);
eventList.remove(eventName);
#$@text#$@
                                sinterpretationType=Action
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdebugLog=false
                                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=GroovyAction
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2
                          sname=createEventButton
                          stext=lang:d=自定义事件&en=Create Event Listener
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=createEventButton2
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2/@Listeners
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=Listeners
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2/@Listeners/@createEventSelection
                              sname=createEventSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=createEventSelection
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2/@Listeners/@createEventSelection/@GroovyAction
                                sname=GroovyAction
                                sisSynchronized=false
                                sthrowException=true
                                suseOtherAction=false
                                svarScope=Local
                                sdisableGlobalContext=false
                                Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.design.Designer;

def eventName = eventList.getSelection()[0];
def event = new Thing("xworker.swt.widgets.Widget/@Event");
def values = newEventForm.doAction("getValues", actionContext);
event.getAttributes().putAll(values);
event.put("name", eventName);
event.metadata.setId(eventName);
//def eventAction = new Thing(actionDescriptor.metadata.path);

//控件事物
def control = currentControl;
def controlThing = world.getThing(control.getData(Designer.DATA_THING));
//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);
if(eventThing == null){
    //声明事件并添加
    //event.addChild(eventAction);
    controlThing.addChild(event);
    
    controlThing.save();
    
    //让事件生效
    swtContext.peek().put("parent", control);
    event.doAction("create", swtContext);    
}else{    
    //这是只声明了事件，但没有添加相应动作的情形
    //eventThing.addChild(eventAction);
    
    controlThing.save();
}

//编辑事件
actions.doAction("editEvent", actionContext, "eventThing", event);
//添加到已实现，从未实现的事件列表中删除
implementedList.add(eventName);
implementedList.setSelection([eventName] as String[]);
eventList.remove(eventName);
#$@text#$@
                                sinterpretationType=Action
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdebugLog=false
                                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=GroovyAction
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite
                      sname=infoComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=infoComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite/@infoCompositeGridLayout
                        sname=infoCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=infoCompositeGridLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite/@infoBrowser
                        sname=infoBrowser
                        Sdescription=
#$@text#$@
<h1>事件编辑器</h1>

<p>&nbsp;&nbsp;&nbsp; 编辑当前选择的控件的事件。选择一个<strong>事件类型</strong>可以创建事件监听，选择<strong>已实现的事件</strong>可以修改它。</p>

<h2>动作容器</h2>

<p>&nbsp;&nbsp;&nbsp; 动作容器相当于方法和函数的容器，动作容器中的方法可以被多个地方调用，公共的方法可以定义在动作容器中。</p>

<h2>GroovyAction</h2>

<p>&nbsp;&nbsp;&nbsp; 使用脚本语言建议使用Groovy脚本。</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
#$@text#$@
                        sdescriptors=xworker.swt.Widgets/@ThingDescripitonBrowser
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        Sen_description=
#$@text#$@
<h1>Event Editor</h1>

<p>&nbsp;&nbsp;&nbsp; Edit event listener of current selected control.</p>

<h2>GroovyAction</h2>

<p>&nbsp;&nbsp;&nbsp; Groovy scripts is often used in event listener.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
#$@text#$@
                        sth_mark=false
                        sid=infoBrowser
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite/@infoBrowser/@infoBrowserGridData
                          sname=infoBrowserGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=infoBrowserGridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@editStackLayout
                      sname=editStackLayout
                      stopControl=infoComposite
                      sdescriptors=xworker.swt.Layouts/@StackLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=editStackLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions
                  sname=actions
                  sdescriptors=xworker.swt.Widgets/@actions
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=actions
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setSwtContext
                    sname=setSwtContext
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.xwidgets.SelectContent;
import xworker.swt.design.Designer;

import org.eclipse.swt.widgets.Widget;

//SWT控件所在的变量上下文
codeAssistor.setActionContext(swtContext);
codeAssistor.initCache(swtContext);
_g.put("swtContext", swtContext);

//事件监听列表
def dataObject = world.getThing("xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject");
def listeners = dataObject.doAction("query", actionContext);
_g.put("listeners", listeners);
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=setSwtContext
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setSwtContext/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setSwtContext/@ins/@swtContext
                        sname=swtContext
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=swtContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                    sname=selectEvent
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
//判断有没有选择控件和事件
def eventName = null;
def selections = null;
if(event.widget == implementedList){
    selections = implementedList.getSelection();
}else if(event.widget == eventList){
    selections = eventList.getSelection();
}
if(selections != null && selections.length > 0){
    eventName = selections[0];
}
if(eventName == null){
    editStackLayout.topControl = infoComposite;
    editComposite.layout();
    return;
}

//随时保存
actions.doAction("save", actionContext);

//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);

if(eventThing == null){
    //没有设置事件，或事件没有动作
    def values = ["name":eventName];
    newEventForm.doAction("setPartialValues", actionContext, "values", values);
    
    editStackLayout.topControl = newEventComposite;
    editComposite.layout();
}else{
    //编辑事件
    actions.doAction("editEvent", actionContext, "eventThing", eventThing);
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=selectEvent
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getEventThing
                    sname=getEventThing
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.design.Designer;

def control = currentControl;
def thing = world.getThing(control.getData(Designer.DATA_THING));

for(listeners in thing.getChilds("listeners")){
    for(listener in listeners.getChilds()){
        def type = listener.getString("type");
        //println type + " = " + eventName;
        if("on" + type == eventName){
            return listener;
        }
    }
}

for(event in thing.getChilds("Event")){
    if(eventName == event.getString("name")){
        return event;
    }
}

return null;
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=getEventThing
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getEventThing/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getEventThing/@ins/@eventName
                        sname=eventName
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventName
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getControlThing
                    sname=getControlThing
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
//判断有没有选择控件和事件
if(controlList.getSelection() == null || ontrolList.getSelection().length == 0){
    return null;
}

//获取事物
def controlName = controlList.getSelection()[0];
def control = swtContext.get(controlName);
return world.getThing(control.getData(Designer.DATA_THING));
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=getControlThing
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@editEvent
                    sname=editEvent
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
if(eventThing.getChilds().size() == 1 && "GroovyAction" == eventThing.getChilds().get(0).getThingName()){
    //Groovy用代码编辑
    def code = eventThing.getChilds().get(0).getString("code");
    if(code != null){
        codeEditor.setText(code);        
    }else{
        codeEditor.setText("");
    }
    
    editStackLayout.topControl = codeComposite;
    editComposite.layout();
}else{
    //其它用事物编辑器编辑
    thingEditor.editorActions.doAction("setThing", ["thing": eventThing]);
    editStackLayout.topControl = thingEditorComposite;
    editComposite.layout();
}

//保存到全局变量上下文
_g.put("eventActionThing", eventThing);
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editEvent
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@editEvent/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@editEvent/@ins/@eventThing
                        sname=eventThing
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventThing
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                    sname=save
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
if(actionContext.get("eventActionThing") == null){
    return;
}

if(editStackLayout.topControl == codeComposite){
    //保存Groovy代码
    eventActionThing.getChilds().get(0).put("code", codeEditor.getText());
    eventActionThing.save();    
}else if(editStackLayout.topControl == thingEditorComposite){
    //保存事物模型
    thingEditor.editorActions.doAction("save");
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=save
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@remove
                    sname=remove
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;
import xworker.swt.events.SwtListener;
import org.xmeta.util.UtilString;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

if(actionContext.get("eventActionThing") == null){
    return;
}

//提示框
def box = new MessageBox(editComposite.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
box.setText(UtilString.getString("lang:d=移除事件&en=Remove Event", actionContext));
box.setMessage(UtilString.getString("lang:d=确定要移除事件吗？会同时移除事件的模型和控件中的相应监听器！" + 
    "&en=Are you sure you want to remove the event? The model and the corresponding listeners in the control will also be removed at the same time!",
    actionContext));
if(box.open() != SWT.OK){
    return;
}

//事件事物
def eventThing = eventActionThing;
//def controlName = controlList.getSelection()[0];
def control = parentContext.control;//swtContext.get(controlName);

//事件类型
def type = 0;
if(eventThing.getThingName() == "Event"){
    def name = eventThing.getMetadata().getName();
    type = SwtUtils.getSWT(name.substring(2, name.length()));
}else{
    def t = eventThing.getStringBlankAsNull("type");
    if(t == null){
        t = "Selection";
    }
    type = SwtUtils.getSWT(t);
}

def listeners = control.getListeners(type);
if(listeners != null){
    for(lis in listeners){
        if(lis instanceof SwtListener && lis.getThing() == eventThing){
            control.removeListener(type, lis);
            break;
        }
    }
}

//保存事物
def parent = eventThing.getParent();
parent.removeChild(eventThing);
parent.save();

implementedList.remove(implementedList.getSelectionIndex());
actionContext.put("eventActionThing", null);
//回到创建界面
actions.doAction("selectEvent");
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=remove
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setControl
                    sname=setControl
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
//保存控件到全局变量上下文
actionContext.g().put("currentControl", control);

//显示已经有的事件列表
implementedList.removeAll();
eventList.removeAll();

def dataObject = world.getThing("xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject");
def listeners = dataObject.doAction("query", actionContext);

for(listener in listeners){
    def eventName = listener.getString("value");
    if(actions.doAction("getEventThing", actionContext, "eventName", eventName) != null){
        implementedList.add(eventName);
    }else{
        eventList.add(eventName);
    }
}

editStackLayout.topControl = infoComposite;
editComposite.layout();

stackLayout.topControl = eventMainComposite;
mainComposite.layout();
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=setControl
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setControl/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setControl/@ins/@control
                        sname=control
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=control
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@handleNewControl
                    sname=handleNewControl
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

if(mainComposite.isDisposed()){
    return false;
}

if(newControl == parentContext.control){
    return true;
}else{    
    DesignToolDialog.setNewControl(parentContext, newControl);
    //初始化事件监听列表
    actions.doAction("setSwtContext", actionContext, "swtContext", parentContext.controlContext);

    //正在编辑的控件
    actions.doAction("setControl", actionContext, "control", newControl);
    return true;    
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=handleNewControl
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@handleNewControl/@ActionDefined
                      sname=ActionDefined
                      sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ActionDefined
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
                        sname=nosaveTip
                        sshell=ognl:mainComposite.getShell()
                        sicon=ICON_WARNING
                        sbuttons=YES | NO | CANCEL
                        stitle=lang:d=保存模型&en=Save Model
                        smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=nosaveTip
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@menuOperation
                    sname=menuOperation
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
if(event.widget == actionContext.get("designMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=menuOperation
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@menuOperation/@ActionDefined
                      sname=ActionDefined
                      sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ActionDefined
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                        sname=confirm
                        sshell=ognl:mainComposite.getShell()
                        sicon=ICON_QUESTION
                        sbuttons=YES | NO | CANCEL
                        stitle=lang:d=模型已修改&en=Model Has Changed
                        smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=confirm
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@onDispose
                  sname=onDispose
                  sref=xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                  sdescriptors=xworker.swt.widgets.Widget/@Event
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=onDispose
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@stackLayout
                sname=stackLayout
                stopControl=eventMainComposite
                sdescriptors=xworker.swt.Layouts/@StackLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=stackLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

//初始化事件监听列表
actions.doAction("setSwtContext", actionContext, "swtContext", parentContext.controlContext);

//正在编辑的控件
actions.doAction("setControl", actionContext, "control", parentContext.control);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem
          sname=menuItem
          stext=lang:d=菜单&en=Menu
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=menuItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext
            sname=menuContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=menuContext
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite
              sname=topMainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=topMainComposite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@topMainCompositeGridLayout
                sname=topMainCompositeGridLayout
                smakeColumnsEqualWidth=false
                smarginWidth=5
                smarginHeight=5
                smarginLeft=0
                smarginTop=0
                smarginRight=0
                smarginBottom=0
                shorizontalSpacing=5
                sverticalSpacing=5
                sdescriptors=xworker.swt.Layouts/@GridLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=topMainCompositeGridLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite
                sname=mainComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite,xworker.swt.xworker.ThingRegistThing/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainComposite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources
                  sname=resources
                  sdescriptors=xworker.swt.Widgets/@Resource
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=resources
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource
                    sname=I18nResource
                    sdescriptors=xworker.swt.util.Resource/@I18nResource
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=I18nResource
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource/@okButton
                      sname=okButton
                      slabel=确定
                      sen_label=Ok
                      sdescriptors=xworker.lang.util.I18nResource/@resource
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=okButton
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource/@saveButton
                      sname=saveButton
                      slabel=保存
                      sen_label=Save
                      sdescriptors=xworker.lang.util.I18nResource/@resource
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=saveButton
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource/@removeButton
                      sname=removeButton
                      slabel=删除
                      sen_label=Delete
                      sdescriptors=xworker.lang.util.I18nResource/@resource
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=removeButton
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite
                  sname=selectDescriptorComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=selectMenuDescriptorCompsoite
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@GridLayout
                    sname=GridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=GridLayout
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@createMenuLabel
                    sname=createMenuLabel
                    sBORDER=false
                    stype=HORIZONTAL
                    salignment=LEFT
                    stext=lang:d=创建菜单，请选择一个模型。&en=Create new menu, please select a descriptor.
                    scapture=false
                    senabled=true
                    sfont="|10|1|#000000"
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Label
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=createMenuLabel
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@createMenuLabel/@GridData
                      sname=GridData
                      sstyle=FILL_HORIZONTAL
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GridData
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist
                    sname=thingRegist
                    sthing=xworker.swt.Menus
                    sregistType=child
                    sparent=false
                    ssearchByKeywords=true
                    sshowContent=true
                    scontentDisplayType=Composite
                    sforceUseDefaultOpenMethod=false
                    sshowDescBrowser=false
                    sdescBrowserRight=false
                    sautoLoad=true
                    scache=true
                    scheck=false
                    sdescritporForNewThing=xworker.lang.MetaDescriptor3
                    sdescritporChilds=false
                    ssashFormWeights=40,60
                    sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingRegist
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist/@thingRegistGridData
                      sname=thingRegistGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingRegistGridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist/@actions
                      sname=actions
                      sdescriptors=xworker.swt.xworker.ThingRegistSelector/@actions1
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist/@actions/@selected
                        sname=selected
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
if(actionContext.get("selectButton") == null){
    return;
}
if(thing == null){
    selectButton.setEnabled(false);
}else{
    selectButton.setEnabled(true);
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selected
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite
                  sname=editorComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=editorComposite
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite/@editorCompositeGridLayout
                    sname=editorCompositeGridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editorCompositeGridLayout
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite/@thingEditor
                    sname=thingEditor
                    stitle=true
                    suseRootThing=false
                    ssaveActionContainer=false
                    sdescriptors=xworker.swt.Widgets/@ThingEditor
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingEditor
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite/@thingEditor/@thingEditorGridData
                      sname=thingEditorGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.Commons/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditorGridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@nosupportLabel
                  sname=nosupportLabel
                  sBORDER=false
                  sstyle=WRAP
                  stype=HORIZONTAL
                  salignment=LEFT
                  stext=lang:d=不能编辑菜单模型，控件已设置菜单，但菜单没有绑定模型。&en=Can not edit menu model, control has a menu, but can not find model of the menu.
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Label
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=nosupportLabel
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@stackLayout
                  sname=stackLayout
                  stopControl=editorComposite
                  sdescriptors=xworker.swt.Layouts/@StackLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=stackLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@mainCompositeGridData
                  sname=mainCompositeGridData
                  sstyle=FILL_BOTH
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=BEGINNING
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=mainCompositeGridData
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite
                sname=buttonComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=buttonComposite
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@GridData
                  sname=GridData
                  sstyle=FILL_HORIZONTAL
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=END
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@RowLayout
                  sname=RowLayout
                  sfill=false
                  sjustify=false
                  smarginWidth=0
                  smarginHeight=0
                  smarginLeft=3
                  smarginTop=3
                  smarginRight=3
                  smarginBottom=3
                  spack=true
                  sspacing=3
                  stype=SWT.HORIZONTAL
                  swrap=true
                  sdescriptors=xworker.swt.Layouts/@RowLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=RowLayout
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405
                  sname=saveButton
                  stext=lang:d=保存&en=Save
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=2405
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2406
                    sname=RowData
                    sexclude=false
                    swidth=80
                    sheight=-1
                    sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2406
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2407
                    sname=Listeners
                    sdescriptors=xworker.swt.widgets.Widget/@Listeners
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2407
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2407/@2408
                      sname=saveButtonSelection
                      stype=Selection
                      sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=2408
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2407/@2408/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.InjectableComposite;
import org.eclipse.swt.widgets.Decorations;

def ac = parentContext.controlContext;
def control = parentContext.control;

//获取编辑的菜单
thingEditor.editorActions.doAction("save");

//销毁原来的菜单
if(actionContext.get("oldMenu") != null){
    if(oldMenu.isDisposed() == false){
        oldMenu.dispose();        
    }
    if(control instanceof Decorations){
        control.setMenuBar(null);
    }else{
        control.setMenu(null);
    }
}

//设置菜单，重新创建菜单
ac.peek().put("parent", control);
actionContext.g().put("oldMenu",  menuThing.doAction("create", ac));
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409
                  sname=removeButton
                  stext=lang:d=删除&en=Remove
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=2409
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2410
                    sname=RowData
                    sexclude=false
                    swidth=80
                    sheight=-1
                    sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2410
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411
                    sname=Listeners
                    sdescriptors=xworker.swt.widgets.Widget/@Listeners
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2411
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412
                      sname=removeButtonSelection
                      stype=Selection
                      sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=2412
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412/@confirm
                        sname=confirm
                        sshell=ognl:removeButton.getShell()
                        sicon=ICON_QUESTION
                        sbuttons=OK | CANCEL
                        stitle=lang:d=删除菜单&en=Remove Menu
                        smessage=lang:d=确实要删除菜单吗？&en=Are you sure to remove the menu?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=confirm
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412/@confirm/@actions
                          sname=actions
                          sdescriptors=xworker.lang.actions.SelfAction/@actions1
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=actions
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412/@confirm/@actions/@ok
                            sname=ok
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import org.eclipse.swt.widgets.Decorations;

if(actionContext.get("oldMenu") != null){
    if(oldMenu.isDisposed() == false){
        oldMenu.dispose();
    }
}
def control = parentContext.control;
if(control instanceof Decorations){
    control.setMenuBar(null);
}else{
    control.setMenu(null);
}

def thing = parentContext.controlThing;
thing.removeChild(menuThing);
thing.save();

actionContext.g().put("menuThing", null);
def action = world.getAction("xworker.swt.design.DesignToolBase/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@init");
action.run(actionContext);
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=ok
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033
                  sname=selectButton
                  stext=lang:d=选择&en=Select
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=false
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=1033
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1034
                    sname=RowData
                    sexclude=false
                    swidth=80
                    sheight=-1
                    sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=1034
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1035
                    sname=Listeners
                    sdescriptors=xworker.swt.widgets.Widget/@Listeners
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=1035
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1035/@1036
                      sname=selectButtonSelection
                      stype=Selection
                      sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=1036
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1035/@1036/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import org.xmeta.Thing;

//获取描述者
def desc = thingRegist.doAction("getThing", actionContext);
def thing = new Thing(desc.getMetadata().getPath());

//设置新的事物进入编辑
thingEditor.editorActions.doAction("setThing", actionContext, "thing", thing);
stackLayout.topControl = editorComposite;
mainComposite.layout();

parentContext.controlThing.addChild(thing);
parentContext.controlThing.save();

actionContext.g().put("menuThing", thing);

saveButton.setVisible(true);
removeButton.setVisible(true);
selectButton.setVisible(false);
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
if(event.widget == actionContext.get("designMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

if(newControl == parentContext.control){
    return true;
}else{
    if(stackLayout.topControl == editorComposite){
        //自动保存
        saveButtonSelection.handleEvent(null);
    }
    DesignToolDialog.setNewControl(parentContext, newControl);
    
    actions.doAction("doInit");
    return true;
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
                      sname=nosaveTip
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_WARNING
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=保存模型&en=Save Model
                      smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=nosaveTip
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@doInit
                  sname=doInit
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.eclipse.swt.widgets.Decorations;
import org.eclipse.swt.widgets.Control;
import xworker.swt.design.Designer;

def menu = null;
def control = parentContext.control;
def m = null;
if(control instanceof Decorations){
    m = control.getMenuBar();    
}else{
    m = control.getMenu();
}
if(m != null && m.isDisposed() == false){
    menu = Designer.getThing(m);
    if(menu == null){        
        stackLayout.topControl = nosupportLabel;
        mainComposite.layout();
        
        saveButton.setVisible(false);
        removeButton.setVisible(false);
        selectButton.setVisible(false);
        return;
    }
    
    actionContext.g().put("oldMenu", m);
}


//获取事物
if(menu == null){
    stackLayout.topControl = selectDescriptorComposite;
    mainComposite.layout();
    
    saveButton.setVisible(false);
    removeButton.setVisible(false);
    selectButton.setVisible(true);
}else{
    thingEditor.editorActions.doAction("setThing", ["thing":menu]);
    stackLayout.topControl = editorComposite;
    mainComposite.layout();
    
    actionContext.g().put("menuThing", menu);
    
    saveButton.setVisible(true);
    removeButton.setVisible(true);
    selectButton.setVisible(false);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=doInit
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);


//初始化菜单
actions.doAction("doInit");
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem
          sname=actionItem
          stext=lang:d=动作&en=Action
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx
            sname=actionCtx
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=actionCtx
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder
              sname=mainTabFolder
              sstyle=BOTTOM
              sBORDER=false
              sFLAT=false
              sCLOSE=false
              sSINGLE=false
              sMRUVisible=false
              ssimple=false
              sdisposeControlOnItemClosed=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@CTabFolder
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainTabFolder
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@onSelection
                sname=onSelection
                sdescriptors=xworker.swt.widgets.Widget/@Event
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=onSelection
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@onSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
def item = event.item;

//选择合适的组件
def ac = null;
if(item == actionContainerItem){
    ac = actionContainerContext;
}else if(item == initItem){
    ac = initContext;
}else if(item == actionContextItem){
    ac = actionContextContext;
}

if(ac != null){
    return ac.actions.doAction("handleNewControl", actionContext, 
          "newControl", parentContext.control, "force" , true);
}
return false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem
                sname=actionContainerItem
                stext=lang:d=动作容器&en=ActionContainer
                sCLOSE=false
                sdelayReload=false
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actionContainerItem
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext
                  sname=actionContainerContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=actionContainerContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite1
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@editorComposite
                        sname=editorComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=editorComposite
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@editorComposite/@editorCompositeFillLayout
                          sname=editorCompositeFillLayout
                          stype=SWT.HORIZONTAL
                          sdescriptors=xworker.swt.Layouts/@FillLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=editorCompositeFillLayout
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@editorComposite/@13564
                          sname=thingEditor
                          stitle=true
                          suseRootThing=false
                          ssaveActionContainer=true
                          svariablesActionContext=ognl:parentContext.controlContext
                          sdescriptors=xworker.swt.xworker.ThingEditor
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=13564
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite
                        sname=actionsComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actionsComposite
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@shellGridLayout
                          sname=shellGridLayout
                          smakeColumnsEqualWidth=false
                          smarginWidth=5
                          smarginHeight=5
                          smarginLeft=0
                          smarginTop=0
                          smarginRight=0
                          smarginBottom=0
                          shorizontalSpacing=5
                          sverticalSpacing=5
                          sdescriptors=xworker.swt.Layouts/@GridLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=shellGridLayout
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list
                          sname=list
                          sstyle=SINGLE
                          sH_SCROLL=true
                          sV_SCROLL=true
                          sBORDER=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@List
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=list
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@22553
                            sname=GridData
                            sstyle=FILL_BOTH
                            shorizontalIndent=0
                            swidth=-1
                            sheight=-1
                            shorizontalAlignment=BEGINNING
                            sverticalAlignment=CENTER
                            shorizontalSpan=1
                            sverticalSpan=1
                            sgrabExcessHorizontalSpace=false
                            sgrabExcessVerticalSpace=false
                            sdescriptors=xworker.swt.layout.GridData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=22553
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@onSelection
                            sname=onSelection
                            sdescriptors=xworker.swt.widgets.Widget/@Event
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=onSelection
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@onSelection/@23852
                              sname=Enabled
                              smethod=enable
                              scontrolList=okButton
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.ControlActions/@Enabled
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=23852
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@onDefaultSelection
                            sname=onDefaultSelection
                            sref=xworker.swt.design.DesignToolBase/@design/@Composite/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sdescriptors=xworker.swt.widgets.Widget/@Event
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=onDefaultSelection
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@stackLayout
                        sname=stackLayout
                        stopControl=actionsComposite
                        sdescriptors=xworker.swt.Layouts/@StackLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=stackLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton
                        sname=okButton
                        stext=lang:d=选择(&amp;S)&en=Select(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=false
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import org.xmeta.util.UtilString;
import org.xmeta.util.ActionContainer;

if(stackLayout.topControl == actionsComposite){
    //选择动作容器的界面
    def act = parentContext.controlContext.get(list.getSelection()[0]);
    if(act != null && act instanceof ActionContainer){
        def actionContainer = act.getThing();
        //保存原来
        thingEditor.doAction("save");
        
        //设置新事物
        thingEditor.doAction("setThing", actionContext, "thing", actionContainer);
        
        _g.put("actionContainer", actionContainer);
        
        def text = UtilString.getString("lang:d=保存(&amp;S)&en=Save(&amp;S)", actionContext);
        okButton.setText(text);
        stackLayout.topControl = editorComposite;
        mainComposite.layout();
    }
}else{
    //保存
    thingEditor.doAction("save");

    //重新创建
    actionContainer.doAction("create", parentContext.controlContext);
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton
                        sname=createButton
                        stext=lang:d=创建动作容器&en=Create New ActionContainer
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=createButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;
import org.xmeta.util.UtilString;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);
def actionContainer = thing.getThing("ActionContainer@0");
if(actionContainer == null){
    def name = prompt(actionContext);
    if(name == null || "" == name){
        name = "actions";
    }
    actionContainer = new Thing("xworker.swt.Widgets/@actions");
    actionContainer.put("name", name);
    thing.addChild(actionContainer);
    thing.save();
    
    actionContainer.doAction("create", parentContext.controlContext);
}
thingEditor.doAction("setThing", actionContext, "thing",  actionContainer);   
_g.put("actionContainer", actionContainer);
createButton.setEnabled(false);

def text = UtilString.getString("lang:d=保存(&amp;S)&en=Save(&amp;S)", actionContext);
okButton.setText(text);
stackLayout.topControl = editorComposite;
mainComposite.layout();
        
def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection/@GroovyAction/@ActionDefined/@prompt
                                sname=prompt
                                stitle=lang:d=创建动作容器&en=Create ActionContainer
                                smessage=lang:d=请输入新的动作容器的名称。&en=Please input the name of new ActionContainer.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@Prompt
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=prompt
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@selectOtherActionContainerButton
                        sname=selectOtherActionContainerButton
                        stext=lang:d=选择其它动作容器&en=Select Other ActionContainer
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;
import org.xmeta.util.ActionContainer;
import org.xmeta.util.UtilString;

//列出已有的动作容器
list.removeAll();
for(key in parentContext.controlContext.keySet()){
    def obj = parentContext.controlContext.get(key);    
    if(obj != null && obj instanceof ActionContainer){
        list.add(key);
    }
}

def text = UtilString.getString("lang:d=选择(&amp;S)&en=Select(&amp;S)", actionContext);
okButton.setText(text);
okButton.setEnabled(false);

stackLayout.topControl = actionsComposite;
mainComposite.layout();
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);

return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;
import org.xmeta.util.ActionContainer;

list.removeAll();

//列出已有的动作容器
for(key in parentContext.controlContext.keySet()){
    def obj = parentContext.controlContext.get(key);    
    if(obj != null && obj instanceof ActionContainer){
        list.add(key);
    }
}

//判断是否有根动作容器
def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);
def actionContainer = thing.getThing("ActionContainer@0");
if(actionContainer != null){
    createButton.setEnabled(false);
}else{
    createButton.setEnabled(true);
}
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem
                sname=initItem
                stext=lang:d=初始化动作&en=InitAction
                sCLOSE=false
                sdelayReload=true
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=initItem
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext
                  sname=initContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=initContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite/@13257
                        sname=FillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.layout.FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13257
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite/@13564
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=true
                        svariablesActionContext=ognl:parentContext.controlContext
                        sdescriptors=xworker.swt.xworker.ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13564
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@saveButton
                        sname=saveButton
                        stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
//保存
thingEditor.doAction("save");
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton
                        sname=executeButton
                        stext=lang:d=执行(&amp;E)&en=Execute(&amp;E)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
if("OK" == confirm(actionContext)){
    thingEditor.doAction("save");

    initAction.doAction("create", parentContext.controlContext);
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined/@confirm
                                sname=confirm
                                sshell=ognl:executeButton.getShell()
                                sicon=ICON_QUESTION
                                sbuttons=OK | CANCEL
                                stitle=lang:d=执行&en=Execute
                                smessage=lang:d=初始化动作一般在创建界面时只执行一次，确认要执行吗？&en=nitialization actions are usually performed only once at the time they create the interface. Do you want to execute?
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=confirm
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);

//由于RunAction可以存在多个，所以只管理设计器自己生成的那个
def initAction = null;
def sytemAuthor = "__designer_auto_manager__";
for(ia in thing.getChilds("RunAction")){
    if(ia.get("th_author") == sytemAuthor){
        initAction = ia;
        break;
    }
}
if(initAction == null){
    initAction = new Thing("xworker.swt.xworker.RunAction");
    initAction.put("th_author", sytemAuthor);
    //actionContainer.put("name", "actions");
    thing.addChild(initAction);
    thing.save();
}else{
    //初始化应该总是最后一个子节点
    def childs = thing.getChilds();
    if(childs.indexOf(initAction) < childs.size() - 1){
         thing.removeChild(initAction);
         thing.addChild(initAction, childs.size());
                  
         thing.save();
         initAction.getMetadata().setRemoved(false);
    }
}

thingEditor.doAction("setThing", actionContext, "thing",  initAction);   
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
_g.put("initAction", initAction);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@init
                      sname=init
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
def parentContext = actionContext.get("parentContext").pContext;
actionContext.g().put("parentContext", parentContext);

//初始化菜单
actions.doAction("doInit");
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.widgets.Widget/@Code
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=init
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem
                sname=actionContextItem
                stext=lang:d=变量上下文&en=ActionContext
                sCLOSE=false
                sdelayReload=true
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actionContextItem
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext
                  sname=actionContextContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=actionContextContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite
                      sname=Composite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=Composite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite/@compositeFillLayout
                        sname=compositeFillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.Layouts/@FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=compositeFillLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite/@actionContextViewer
                        sname=actionContextViewer
                        sshowStack=false
                        sdescriptors=xworker.swt.Widgets/@ActionContextViewer
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actionContextViewer
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        scode=actionContextViewer.actions.doAction("setActionContext", actionContext, "ac", parentContext.controlContext);
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@init
                      sname=init
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
def parentContext = actionContext.get("parentContext").pContext;
actionContext.g().put("parentContext", parentContext);

//初始化菜单
actions.doAction("doInit");
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.widgets.Widget/@Code
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=init
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
def item = mainTabFolder.getSelection();

//设计界面已经关闭了
if(mainTabFolder.isDisposed()){
    return false;
}

//选择合适的组件
def ac = null;
if(item == actionContainerItem){
    ac = actionContainerContext;
}else if(item == initItem){
    ac = initContext;
}else if(item == actionContextItem){
    ac = actionContextContext;
}

if(ac != null){
    return ac.actions.doAction("handleNewControl", actionContext, 
           "newControl", newControl, "force", null);
}
return false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", parentContext);

actionContainerContext.put("parentContext", parentContext);
//println parentContext.control;
actionContainerContext.actions.doAction("handleNewControl", actionContext, 
           "newControl", parentContext.control, "force", null);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem
          sname=dataItem
          stext=lang:d=数据&en=Data
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=dataItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext
            sname=dataContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=dataContext
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder
              sname=mainTabFolder
              sstyle=BOTTOM
              sBORDER=false
              sFLAT=false
              sCLOSE=false
              sSINGLE=false
              sMRUVisible=false
              ssimple=false
              sdisposeControlOnItemClosed=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@CTabFolder
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainTabFolder
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@onSelection
                sname=onSelection
                sdescriptors=xworker.swt.widgets.Widget/@Event
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=onSelection
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@onSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
def item = event.item;

def ac = null;
if(item == dataStoresItem){
    ac = dataStoresContext;
}else if(item == dataModelsItem){
    ac = dataModelsContext;
}else if(item == treeModelsItem){
    ac = dataModelsContext;
}


if(ac != null){
    return ac.actions.doAction("handleNewControl", actionContext, 
          "newControl", parentContext.control, "force" , true);
}
return false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem
                sname=dataStoresItem
                stext=lang:d=数据仓库&en=Data Stores
                sCLOSE=false
                sdelayReload=false
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=dataModelsItem
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext
                  sname=dataStoresContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=dataStoresContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@mainComposite/@13257
                        sname=FillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.layout.FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13257
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@mainComposite/@13564
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=true
                        svariablesActionContext=ognl:parentContext.controlContext
                        sdescriptors=xworker.swt.xworker.ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13564
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@saveButton
                        sname=saveButton
                        stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
//保存
thingEditor.doAction("save");
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton
                        sname=createButton
                        stext=lang:d=创建(&amp;C)&en=Create(&amp;C)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
thingEditor.doAction("save");

//执行重新创建数据仓库的方法
def thing = thingEditor.doAction("getThing", actionContext);
if(thing.getThingName() == "DataStores"){
    for(child in thing.getChilds()){
        child.doAction("create", parentContext.controlContext);
    }
}else{
    thing.doAction("create", parentContext.controlContext);
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined/@confirm
                                sname=confirm
                                sshell=ognl:executeButton.getShell()
                                sicon=ICON_QUESTION
                                sbuttons=OK | CANCEL
                                stitle=lang:d=创建&en=Create
                                smessage=lang:d=初始化动作一般在创建界面时只执行一次，确认要执行吗？&en=nitialization actions are usually performed only once at the time they create the interface. Do you want to execute?
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=confirm
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton1
                        sname=reloadButton
                        stext=lang:d=刷新(&amp;R)&en=Refresh(&amp;R)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton1
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton1/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton1/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
thingEditor.doAction("save");

//if("OK" == confirm(actionContext)){
def thing = thingEditor.doAction("getThing", actionContext);
if(thing.getThingName() == "DataStores"){
    for(child in thing.getChilds()){
        reload(child, parentContext.controlContext);
    }
}else{
    reload(thing, parentContext.controlContext);
}

def reload(thing, context){
    def dataStore = context.get(thing.getMetadata().getName());
    if(dataStore == null){
        thing.doAction("create", context);        
    }else{
        dataStore.doAction("reload", context);
    }
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton1/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton1/@onSelection/@GroovyAction/@ActionDefined/@confirm
                                sname=confirm
                                sshell=ognl:executeButton.getShell()
                                sicon=ICON_QUESTION
                                sbuttons=OK | CANCEL
                                stitle=lang:d=创建&en=Create
                                smessage=lang:d=初始化动作一般在创建界面时只执行一次，确认要执行吗？&en=nitialization actions are usually performed only once at the time they create the interface. Do you want to execute?
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=confirm
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem/@dataStoresContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);
def initAction = null;
def sytemAuthor = "__designer_auto_manager__";
for(ia in thing.getChilds("DataStores")){
    if(ia.get("th_author") == sytemAuthor){
        initAction = ia;
        break;
    }
}
if(initAction == null){
    initAction = new Thing("xworker.swt.Widgets/@DataStores");
    //actionContainer.put("name", "actions");
    initAction.put("th_author", sytemAuthor);
    thing.addChild(initAction);
    thing.save();
}else{
    //初始化应该总是最后一个子节点
    def childs = thing.getChilds();
    if(childs.indexOf(initAction) < childs.size() - 2){
         thing.removeChild(initAction);
         thing.addChild(initAction, childs.size() - 1);

         thing.save();
         initAction.getMetadata().setRemoved(false);
    }    
}

initAction = thing.getThing("DataStores@0");
thingEditor.doAction("setThing", actionContext, "thing",  initAction);   
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
_g.put("initAction", initAction);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1
                sname=dataModelsItem
                stext=lang:d=数据模型&en=Data Models
                sCLOSE=false
                sdelayReload=true
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=dataModelsItem1
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext
                  sname=dataModelsContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=dataModelsContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@mainComposite/@13257
                        sname=FillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.layout.FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13257
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@mainComposite/@13564
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=true
                        svariablesActionContext=ognl:parentContext.controlContext
                        sdescriptors=xworker.swt.xworker.ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13564
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@saveButton
                        sname=saveButton
                        stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
//保存
thingEditor.doAction("save");
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton
                        sname=createButton
                        stext=lang:d=创建(&amp;C)&en=Create(&amp;C)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
//if("OK" == confirm(actionContext)){
    thingEditor.doAction("save");

    initAction.doAction("create", parentContext.controlContext);
//}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined/@confirm
                                sname=confirm
                                sshell=ognl:createButton.getShell()
                                sicon=ICON_QUESTION
                                sbuttons=OK | CANCEL
                                stitle=lang:d=执行&en=Execute
                                smessage=lang:d=初始化动作一般在创建界面时只执行一次，确认要执行吗？&en=nitialization actions are usually performed only once at the time they create the interface. Do you want to execute?
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=confirm
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);
def initAction = null;
def sytemAuthor = "__designer_auto_manager__";
for(ia in thing.getChilds("Models")){
    if(ia.get("th_author") == sytemAuthor){
        initAction = ia;
        break;
    }
}

if(initAction == null){
    initAction = new Thing("xworker.swt.model.Models");
    initAction.put("th_author", sytemAuthor);
    //actionContainer.put("name", "actions");
    thing.addChild(initAction);
    thing.save();
}else{
    //初始化应该总是最后一个子节点
    def childs = thing.getChilds();
    if(childs.indexOf(initAction) < childs.size() - 2){
         thing.removeChild(initAction);
         thing.addChild(initAction, childs.size() - 1);
                  
         thing.save();
         initAction.getMetadata().setRemoved(false);
    }
}

thingEditor.doAction("setThing", actionContext, "thing",  initAction);   
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
_g.put("initAction", initAction);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem1/@dataModelsContext/@topMainComposite/@init
                      sname=init
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
def parentContext = actionContext.get("parentContext").pContext;
actionContext.g().put("parentContext", parentContext);

//初始化菜单
actions.doAction("doInit");
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.widgets.Widget/@Code
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=init
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11
                sname=treeModelsItem
                stext=lang:d=树模型&en=Tree Models
                sCLOSE=false
                sdelayReload=true
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=dataModelsItem11
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext
                  sname=dataModelsContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=dataModelsContext
                    @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@mainComposite/@13257
                        sname=FillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.layout.FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13257
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@mainComposite/@13564
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=true
                        svariablesActionContext=ognl:parentContext.controlContext
                        sdescriptors=xworker.swt.xworker.ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13564
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@saveButton
                        sname=saveButton
                        stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
//保存
thingEditor.doAction("save");
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton
                        sname=createButton
                        stext=lang:d=创建(&amp;C)&en=Create(&amp;C)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
if("OK" == confirm(actionContext)){
    thingEditor.doAction("save");

    initAction.doAction("create", parentContext.controlContext);
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined/@confirm
                                sname=confirm
                                sshell=ognl:executeButton.getShell()
                                sicon=ICON_QUESTION
                                sbuttons=OK | CANCEL
                                stitle=lang:d=执行&en=Execute
                                smessage=lang:d=初始化动作一般在创建界面时只执行一次，确认要执行吗？&en=nitialization actions are usually performed only once at the time they create the interface. Do you want to execute?
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=confirm
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);

def initAction = null;
def sytemAuthor = "__designer_auto_manager__";
for(ia in thing.getChilds("TreeModels")){
    if(ia.get("th_author") == sytemAuthor){
        initAction = ia;
        break;
    }
}
if(initAction == null){
    initAction = new Thing("xworker.swt.Widgets/@TreeModels");
    initAction.put("th_author", sytemAuthor);
    //actionContainer.put("name", "actions");
    thing.addChild(initAction);
    thing.save();
}else{
    //应该放在后面初始化，要不initAction提前
    def childs = thing.getChilds();
    if(childs.indexOf(initAction) < childs.size() - 2){
         thing.removeChild(initAction);
         thing.addChild(initAction, childs.size() - 1);
         
         thing.save();
         initAction.getMetadata().setRemoved(false);
    }
}

initAction = thing.getThing("TreeModels@0");
thingEditor.doAction("setThing", actionContext, "thing",  initAction);   
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
_g.put("initAction", initAction);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                      @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@dataModelsItem11/@dataModelsContext/@topMainComposite/@init
                      sname=init
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
def parentContext = actionContext.get("parentContext").pContext;
actionContext.g().put("parentContext", parentContext);

//初始化菜单
actions.doAction("doInit");
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.widgets.Widget/@Code
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=init
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
//设计界面已经关闭了
if(mainTabFolder.isDisposed()){
    return false;
}

def item = mainTabFolder.getSelection();
//println item;
//选择合适的组件
def ac = null;
if(item == dataStoresItem){
    ac = dataStoresContext;
}else if(item == dataModelsItem){
    ac = dataModelsContext;
}else if(item == treeModelsItem){
    ac = dataModelsContext;
}

if(ac != null){
    //println "xxxxxxxxxxxxx";
    return ac.actions.doAction("handleNewControl", actionContext, 
           "newControl", newControl, "force", null);
}
return false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@dataItem/@dataContext/@mainTabFolder/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", parentContext);

dataStoresContext.put("parentContext", parentContext);
//println parentContext.control;
dataStoresContext.actions.doAction("handleNewControl", actionContext, 
           "newControl", parentContext.control, "force", null);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem
          sname=toolsItem
          stext=lang:d=工具&en=Tools
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=toolsItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext
            sname=toolsContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=toolsContext
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite
              sname=Composite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              spack=false
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=Composite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite/@compositeFillLayout
                sname=compositeFillLayout
                stype=SWT.HORIZONTAL
                sdescriptors=xworker.swt.Layouts/@FillLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=compositeFillLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite/@thingRegist
                sname=thingRegist
                sregistType=child
                sparent=false
                ssearchByKeywords=true
                sshowContent=true
                scontentDisplayType=Composite
                sforceUseDefaultOpenMethod=false
                sshowDescBrowser=false
                sdescBrowserRight=false
                sautoLoad=true
                scache=true
                scheck=false
                sdescritporForNewThing=xworker.message.MessageWithToolbar
                sdescritporChilds=false
                sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=thingRegist
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite/@thingRegist/@16609
                  sname=GridLayout
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.layout.GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=16609
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.util.UtilString;
import xworker.util.ThingUtils;

if(Composite.isDisposed()){
    return false;
}
//println "xxxxx";
//不支持XWorker属性编辑器中的控件
//if(isAttribute && rootControl == null){
//    return false;
//}
def oldControl = actionContext.control;
def newControlThing = Designer.getThing(newControl);
if(actionContext.get("controlThing") == newControlThing && oldControl != null && oldControl.isDisposed()){
    //新选择的控件是当前的控件，就不刷新注册列表了
    return true;
}

def pContext = parentContext.parentContext;
actionContext.g().put("control", newControl);
actionContext.g().put("controlContext", pContext.newControlContext);
actionContext.g().put("parentContext", pContext.parentContext);
actionContext.g().put("controlThing", pContext.newControlThing);
actionContext.g().put("rootCreator", pContext.rootCreator);
actionContext.g().put("rootControl", pContext.rootControl);
actionContext.g().put("isAttribute", pContext.isAttribute);
actionContext.g().put("creator", pContext.creator);
actionContext.g().put("creatorControl", pContext.creatorControl);

def thing = creator != null ? creator : newControlThing;
if(creator != null && creator != newControlThing){
    //加入复合控件的索引
    thingRegist.doAction("setExtraThings", actionContext, "extraThings", 
          ["xworker.swt.design.guide.CompoundGuideIndex"]);
}else{
        //加入复合控件的索引
    thingRegist.doAction("setExtraThings", actionContext, "extraThings", 
          ["xworker.swt.widgets.Widget"]);
}

def label = UtilString.getString("lang:d=向导&en=Guide", actionContext);
label = label + " - " + thing.getMetadata().getLabel() + "(" + thing.getThingName() + ")";
Composite.getShell().setText(label);

actionContext.g().put("controlThing", thing);

thingRegist.doAction("init", actionContext, 
    "thing", thing,
    "type", "designGuide",
    "keywords", "");
thingRegist.doAction("refresh", actionContext);
return true;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@toolsItem/@toolsContext/@Composite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

def parentContext = parentContext.parentContext;

actions.doAction("handleNewControl", actionContext,
       "newControl", parentContext.control, "force", null);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem
          sname=helpItem
          stext=lang:d=帮助&en=Help
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=helpItem
            @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext
            sname=helpContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=helpContext
              @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainComposite
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite/@mainCompositeFillLayout
                sname=mainCompositeFillLayout
                stype=SWT.HORIZONTAL
                sdescriptors=xworker.swt.Layouts/@FillLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainCompositeFillLayout
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite/@helpRegist
                sname=helpRegist
                sregistType=designHelper
                sparent=false
                ssearchByKeywords=true
                sshowContent=true
                scontentDisplayType=Composite
                sforceUseDefaultOpenMethod=false
                sshowDescBrowser=false
                sdescBrowserRight=false
                sautoLoad=false
                scache=true
                scheck=false
                sdescritporForNewThing=xworker.message.MessageWithToolbar
                sdescritporChilds=false
                sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=helpRegist
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

if(actionContext.get("oldControl") == newControl){
    return true;
}
actionContext.g().put("oldControl", newControl);

DesignToolDialog.setNewControl(parentContext, newControl);
actions.doAction("doInit", actionContext);

return true;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                  @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite/@actions/@doInit
                  sname=doInit
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.xmeta.Thing;

def thing = new Thing();
def exts = parentContext.controlThing.getMetadata().getPath();
def description = parentContext.controlThing.getDescriptor().getMetadata().getDescription();
for(desc in parentContext.controlThing.getAllDescriptors()){
    exts = exts + "," + desc.getMetadata().getPath();
}

thing.set("extends", exts);
thing.set("description", description);

helpRegist.doAction("init", actionContext, "thing", thing,
    "type", "designHelper", "keywords", null, "descritporForNewThing", null);
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=doInit
                @/@insert/@Composite/@mainSashForm/@mainTabFolder/@helpItem/@helpContext/@mainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

actions.doAction("doInit", actionContext);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
      @/@insert/@Composite/@actions
      sname=actions
      sdescriptors=xworker.swt.Widgets/@actions
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actions
        @/@insert/@Composite/@actions/@handleNewControl
        sname=handleNewControl
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        svarScope=Local
        sdisableGlobalContext=false
        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignShellActions;

//不支持XWorker属性编辑器中的控件
//if(isAttribute && rootControl == null){
//    return false;
//}

def item = mainTabFolder.getSelection();
//如果是复合控件，选择根节点
if((isAttribute && rootControl == null) || (rootControl != null && rootControl != newControl)){
    //Designer.setCurrentDesignControl(rootControl);
    onCompound(actionContext);
    item = toolsItem;
    mainTabFolder.setSelection(item);
    actionContext.g().put("controlType", "compound");
}else{
    onControl(actionContext);
    actionContext.g().put("controlType", "control");
}

//设计界面已经关闭了
if(mainTabFolder.isDisposed()){
    return false;
}

//选择合适的组件
def ac = null;
if(item == designItem){
    ac = designContext;
}else if(item == eventItem){
    ac = eventContext;
}else if(item == moveItem){
    ac = moveContext;
}else if(item == eventItem){
    ac = eventContext;
}else if(item == menuItem){
    ac = menuContext;
}else if(item == modelItem){
    ac = modelContext;
    //在模型编辑器找不到controTree变量，这里初始化传入
    ac.put("controlTree", controlTree);
}else if(item == actionItem){
    ac = actionCtx;
}else if(item == helpItem){
    ac = helpContext;
}else if(item == dataItem){
    ac = dataContext;
}else if(item == toolsItem){
    ac = toolsContext;
}


if(ac != null){
    def result = ac.actions.doAction("handleNewControl", actionContext, 
           "newControl", newControl, "force", null);
    if(result){
        actionContext.peek().put("noTreeControlSelection", true);
        if(rootControl != null){
            DesignShellActions.designTreeInit(actionContext, controlTree, rootControl, true);
        }else{
            DesignShellActions.designTreeInit(actionContext, controlTree, newControl, true);
        }
    }

    return result;
}

return false;
#$@text#$@
        sinterpretationType=Action
        screateLocalVarScope=false
        ssaveReturn=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=handleNewControl
          @/@insert/@Composite/@actions/@handleNewControl/@ActionDefined
          sname=ActionDefined
          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=ActionDefined
            @/@insert/@Composite/@actions/@handleNewControl/@ActionDefined/@onCompound
            sname=onCompound
            smethod=disable
            scontrolList=designToolBar,designItem,moveItem,eventItem,menuItem,actionItem,dataItem,modelItem
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.ControlActions/@Enabled
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=onCompound
            @/@insert/@Composite/@actions/@handleNewControl/@ActionDefined/@onCompound1
            sname=onControl
            smethod=enable
            scontrolList=designToolBar,designItem,moveItem,eventItem,menuItem,actionItem,dataItem,modelItem
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.ControlActions/@Enabled
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=onCompound1
      @/@insert/@Composite/@init
      sname=init
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.DesignShellActions;

//注册toolActions
parentContext.g().put("toolActions", actions);

DesignShellActions.designTreeInit(actionContext, controlTree, parentContext.control, true);

//设置被隔离的各上下文的变量
modelContext.g().put("parentContext", parentContext);
modelContext.actions.doAction("handleNewControl", actionContext, 
           "newControl", parentContext.control, "force", null,
           "rootControl", parentContext.rootControl,
           "isAttribute", parentContext.isAttribute,
           "rootCreator", parentContext.rootCreator,           
           "newControlThing", parentContext.controlThing,
           "creator", parentContext.creator,
           "creatorControl", parentContext.creatorControl);

//layout.g().put("parentContext", parentContext);
//event.g().put("parentContext", parentContext);



/*
def parentControl = parentContext.control.getParent();

if(parentControl instanceof TabFolder || parentControl instanceof CTabFolder
    || parentControl instanceof SashForm || parentControl instanceof ScrolledComposite){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
}

if(parentContext.controlThing.getThingName() == "InjectableComposite"){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    insideButton.setEnabled(false);
}*/
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.swt.Widgets/@Code
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=init
      @/@insert/@Composite/@14835
      sname=RunAction
      sdescriptors=xworker.swt.xworker.RunAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=14835
  @/@simpleDesignTool
  sname=simpleDesignTool
  slabel=编辑模型
  swidth=800
  sheight=600
  snoReturnButton=true
  svisible=true
  sgroup=-10000|设计
  sen_label=Edit Model
  sen_group=-10000|Design
  sdescriptors=xworker.swt.design.DesignTool/@Composite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_noThingRegistViewer=false
  sth_fileMonitor=false
  sth_deprecated=false
  sth_mark=false
  sth_registQueryOnlySelf=false
  snotXmlAttribute=false
  sjson_isArray=false
  sid=simpleDesignTool
    @/@simpleDesignTool/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Composite
      @/@simpleDesignTool/@Composite/@VariablesDescs
      sname=VariablesDescs
      sdescriptors=xworker.lang.MetaThing/@VariablesDesc
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_fileMonitor=false
      sth_mark=false
      sid=VariablesDescs
        @/@simpleDesignTool/@Composite/@VariablesDescs/@currentSelectControl
        sname=currentControl
        svarName=currentControl
        spassive=false
        stype=object
        sclassName=org.eclipse.swt.widgets.Control
        sdescriptors=xworker.lang.MetaThing/@VariablesDesc/@Object
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=currentSelectControl
        @/@simpleDesignTool/@Composite/@VariablesDescs/@treeItem
        sname=treeItem
        svarName=treeItem
        spassive=false
        stype=object
        sclassName=org.eclipse.swt.widgets.TreeItem
        sdescriptors=xworker.lang.MetaThing/@VariablesDesc/@Object
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=treeItem
        @/@simpleDesignTool/@Composite/@VariablesDescs/@currentIsAction
        sname=currentIsAction
        svarName=currentIsAction
        spassive=false
        stype=object
        sclassName=java.lang.Boolean
        sdescriptors=xworker.lang.MetaThing/@VariablesDesc/@Object
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=currentIsAction
      @/@simpleDesignTool/@Composite/@resources
      sname=resources
      sdescriptors=xworker.swt.Widgets/@Resource
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=resources
        @/@simpleDesignTool/@Composite/@resources/@parentImage
        sname=parentImage
        stype=Image
        simageFile=icons/application_get.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=parentImage
        @/@simpleDesignTool/@Composite/@resources/@controlsImage
        sname=controlsImage
        stype=Image
        simageFile=icons/page_white_stack.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=controlsImage
        @/@simpleDesignTool/@Composite/@resources/@toolsMenuImage
        sname=toolsMenuImage
        stype=Image
        simageFile=icons/cog.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=toolsMenuImage
        @/@simpleDesignTool/@Composite/@resources/@toolsImage
        sname=toolsImage
        stype=Image
        simageFile=icons/house.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=toolsImage
        @/@simpleDesignTool/@Composite/@resources/@copyImage
        sname=copyImage
        stype=Image
        simageFile=icons/xworker/copy.gif
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=copyImage
        @/@simpleDesignTool/@Composite/@resources/@pasteImage
        sname=pasteImage
        stype=Image
        simageFile=icons/xworker/paste.gif
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=pasteImage
      @/@simpleDesignTool/@Composite/@EventFilter
      sname=EventFilter
      sdescriptors=xworker.swt.Widgets/@EventFilter
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=EventFilter
        @/@simpleDesignTool/@Composite/@EventFilter/@Listener
        sname=Listener
        stype=KeyDown
        sdescriptors=xworker.swt.events.EventFilter/@listeners/@Listener
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=Listener
          @/@simpleDesignTool/@Composite/@EventFilter/@Listener/@KeySwitch
          sname=KeySwitch
          sinterpretationType=Self
          sattributeTemplate=false
          schildsAttributeTemplate=false
          svarScope=Local
          sisSynchronized=false
          sthrowException=true
          screateLocalVarScope=false
          ssaveReturn=false
          sdisableGlobalContext=false
          sdebugLog=false
          sdescriptors=xworker.swt.actions.EventActions/@KeySwitch
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=KeySwitch
            @/@simpleDesignTool/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12
            sname=ctrl3
            sCtrl=true
            sShift=false
            sAlt=false
            skey=3
            sdescriptors=xworker.swt.actions.EventActions/@KeySwitch/@Case
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=ctrl12
              @/@simpleDesignTool/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12/@actions
              sname=actions
              sdescriptors=xworker.swt.actions.EventActions/@KeySwitch/@Case/@actions1
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=actions
                @/@simpleDesignTool/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12/@actions/@doEvent
                sname=doEvent
                srefActionPath=xworker.swt.design.DesignToolBase/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener/@GroovyAction
                skeepSelf=true
                sinterpretationType=Self
                sattributeTemplate=false
                schildsAttributeTemplate=false
                svarScope=Local
                sisSynchronized=false
                sthrowException=true
                screateLocalVarScope=false
                ssaveReturn=false
                sdisableGlobalContext=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@RefAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=doEvent
      @/@simpleDesignTool/@Composite/@compositeGridLayout
      sname=compositeGridLayout
      smakeColumnsEqualWidth=false
      smarginWidth=5
      smarginHeight=5
      smarginLeft=0
      smarginTop=0
      smarginRight=0
      smarginBottom=0
      shorizontalSpacing=5
      sverticalSpacing=5
      sdescriptors=xworker.swt.Layouts/@GridLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=compositeGridLayout
      @/@simpleDesignTool/@Composite/@mainCoolbar
      sname=mainCoolbar
      stype=HORIZONTAL
      sBORDER=false
      sFLAT=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@CoolBar
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=mainCoolbar
        @/@simpleDesignTool/@Composite/@mainCoolbar/@editorToolBarGirdDAta
        sname=editorToolBarGirdDAta
        sstyle=FILL_HORIZONTAL
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=editorToolBarGirdDAta
        @/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem
        sname=mainCoolItem
        sDROP_DOWN=false
        sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=mainCoolItem
          @/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar
          sname=editorToolBar
          stype=HORIZONTAL
          sFLAT=false
          sWRAP=false
          sBORDER=false
          sSHADOW_OUT=false
          sRIGHT=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@ToolBar
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=editorToolBar
            @/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem
            sname=toolsMenuItem
            stype=DROP_DOWN
            simage=toolsImage
            stoolTiptext=lang:d=工具列表(Ctrl + 3)&en=Tools(Ctrl + 3)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=designItem
              @/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=Listener
                  @/@simpleDesignTool/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.util.SwtUtils;

def menu = DesignToolDialog.createOperationGroupsMenu(mainTabFolder, actionContext)
SwtUtils.showMenuByWidget(event.widget, menu);
event.doit = false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
        @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem
        sname=toolMenuItem
        sDROP_DOWN=false
        sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=toolMenuItem
          @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar
          sname=toolsToolBar
          stype=HORIZONTAL
          sFLAT=false
          sWRAP=false
          sBORDER=false
          sSHADOW_OUT=false
          sRIGHT=false
          scapture=false
          senabled=true
          sredraw=true
          spack=false
          svisible=true
          sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem/@ToolBar
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_fileMonitor=false
          sth_mark=false
          sid=toolsToolBar
            @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@saveButton
            sname=saveButton
            stype=SWT.PUSH
            stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=saveButton
              @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@saveButton/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=listeners
                @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@saveButton/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=Listener
                  @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@saveButton/@listeners/@Listener/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
if(currentControl == null){
    return;
}

thingEditor.doAction("save");
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
            @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@applyButton
            sname=applyButton
            stype=SWT.PUSH
            stext=lang:d=应用(&amp;Z)&en=Apply(&amp;Z)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=applyButton
              @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@applyButton/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=listeners
                @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@applyButton/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=Listener
                  @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@applyButton/@listeners/@Listener/@okButtonSelesion
                  sname=applyButtonSelesion
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import org.eclipse.swt.widgets.Shell;
import xworker.swt.design.DesignShellActions;

if(currentControl == null){
    return;
}

//保存事物
thingEditor.doAction("save");

if(currentIsAction){
}else{
    //更新界面
    DesignTools.update(currentControl, true);
    
    if(currentControl.isDisposed() == false){
        //如果更新的COntrol没有销毁，那么不会自动触发更新树，这时子节点为dispose的
        //所以只要手动更新
        actions.doAction("handleNewControl", actionContext, 
             "newControl", currentControl);
    }
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=okButtonSelesion
            @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@delteButton
            sname=delteButton
            stype=SWT.PUSH
            stext=lang:d=删除(&amp;D)&en=Remove(&amp;D)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=delteButton
              @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@delteButton/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=listeners
                @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@delteButton/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=Listener
                  @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@delteButton/@listeners/@Listener/@run
                  sname=run
                  sshell=ognl:mainCoolbar.getShell()
                  sicon=ICON_QUESTION
                  sbuttons=OK | CANCEL
                  stitle=lang:d=删除控件&en=Delete Control
                  smessage=lang:d=注意控件删除后不可恢复，确实要删除当前的控件么？&en=Note that the controls cannot be restored after removal. Are you sure you want to delete the current control?
                  sinterpretationType=Self
                  sattributeTemplate=false
                  schildsAttributeTemplate=false
                  svarScope=Local
                  sisSynchronized=false
                  sthrowException=true
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdisableGlobalContext=false
                  sdebugLog=false
                  sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=run
                    @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@delteButton/@listeners/@Listener/@run/@actions
                    sname=actions
                    sdescriptors=xworker.lang.actions.SelfAction/@actions1
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=actions
                      @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@delteButton/@listeners/@Listener/@run/@actions/@ok
                      sname=ok
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;

if(currentControl == null){
    return;
}

def parentControl = currentControl.getParent();
DesignTools.remove(currentControl);

if(parentControl != null){
    //Designer.setCurrentDesignControl(parentControl);
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ok
            @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@openButton
            sname=openButton
            stype=SWT.PUSH
            stext=lang:d=在IDE中打开(&amp;O)&en=Open In IDE(&amp;O)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=openButton
              @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@openButton/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=listeners
                @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@openButton/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=Listener
                  @/@simpleDesignTool/@Composite/@mainCoolbar/@toolMenuItem/@toolsToolBar/@openButton/@listeners/@Listener/@ideOpenThing
                  sname=ideOpenThing
                  sthing=var:currentThing
                  sinterpretationType=Self
                  sattributeTemplate=false
                  schildsAttributeTemplate=false
                  svarScope=Local
                  sisSynchronized=false
                  sthrowException=true
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdisableGlobalContext=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.utils.XWorkerActions/@ideOpenThing
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=ideOpenThing
      @/@simpleDesignTool/@Composite/@mainSashForm
      sname=mainSashForm
      sstyle=HORIZONTAL
      sSMOOTH=false
      sweights=30,70
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      spack=false
      svisible=true
      sdescriptors=xworker.swt.Widgets/@SashForm
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=mainSashForm
        @/@simpleDesignTool/@Composite/@mainSashForm/@GridData
        sname=GridData
        sstyle=FILL_BOTH
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=GridData
        @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder
        sname=leftTabFolder
        sstyle=TOP
        sBORDER=false
        sFLAT=false
        sCLOSE=false
        sSINGLE=false
        sMRUVisible=false
        ssimple=false
        sdisposeControlOnItemClosed=false
        suseItemTopRightControl=false
        sH_SCROLL=false
        sV_SCROLL=false
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        scapture=false
        senabled=true
        sredraw=true
        spack=false
        svisible=true
        sdescriptors=xworker.swt.Widgets/@CTabFolder
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=leftTabFolder
          @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@controlTabItem
          sname=controlTabItem
          stext=lang:d=控件&en=Controls
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_fileMonitor=false
          sth_mark=false
          sid=controlTabItem
            @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@controlTabItem/@controlTree
            sname=controlTree
            sselectStyle=SINGLE
            sV_SCROLL=true
            sH_SCROLL=true
            sCHECK=false
            sFULL_SELECTION=false
            sHIDE_SELECTION=false
            sBORDER=false
            slineVisible=false
            smultipleColumns=false
            sheaderVisible=false
            ssortIndicator=false
            smoveableColumns=false
            sheadImages=false
            ssubImages=false
            scheckSelection=false
            scapture=false
            senabled=true
            sredraw=true
            spack=false
            svisible=true
            sdescriptors=xworker.swt.Widgets/@Tree
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=controlTree
              @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@controlTabItem/@controlTree/@Listeners
              sname=Listeners
              sdescriptors=xworker.swt.widgets.Widget/@Listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=Listeners
                @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@controlTabItem/@controlTree/@Listeners/@treeSelection
                sname=treeSelection
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_mark=false
                sid=treeSelection
                  @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@controlTabItem/@controlTree/@Listeners/@treeSelection/@treeSelection
                  sname=treeSelection
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;

//println "tree Sleection";
if(actionContext.get("noTreeControlSelection") == true){
    return;
}
//选择控件
def data = event.item.data;
if(data.control.isDisposed()){
    return;
}

if(data.control.isVisible() == false){
    data.control.setVisible(true);
}
Designer.setCurrentDesignControl(data.control);
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=treeSelection
          @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@eventTabItem
          sname=eventTabItem
          stext=lang:d=事件和动作&en=Events &amp; Actions
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_fileMonitor=false
          sth_mark=false
          sid=eventTabItem
            @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@eventTabItem/@eventsTree
            sname=eventsTree
            sselectStyle=SINGLE
            sV_SCROLL=true
            sH_SCROLL=true
            sCHECK=false
            sFULL_SELECTION=false
            sHIDE_SELECTION=false
            sBORDER=false
            slineVisible=false
            smultipleColumns=false
            sheaderVisible=false
            ssortIndicator=false
            smoveableColumns=false
            sheadImages=false
            ssubImages=false
            scheckSelection=false
            scapture=false
            senabled=true
            sredraw=true
            spack=false
            svisible=true
            sdescriptors=xworker.swt.Widgets/@Tree
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=eventsTree
              @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@eventTabItem/@eventsTree/@Listeners
              sname=Listeners
              sdescriptors=xworker.swt.widgets.Widget/@Listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=Listeners
                @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@eventTabItem/@eventsTree/@Listeners/@eventsTreeSelection
                sname=eventsTreeSelection
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=eventsTreeSelection
                  @/@simpleDesignTool/@Composite/@mainSashForm/@leftTabFolder/@eventTabItem/@eventsTree/@Listeners/@eventsTreeSelection/@eventsTreeSelection
                  sname=eventsTreeSelection
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
//先保存
if(thingEditor.doAction("isModified")){
    thingEditor.doAction("save");
}    

def currentEventThing = eventsTree.getSelection()[0].getData();
def thing = getRootItem(eventsTree.getSelection()[0]).getData();
thingEditor.doAction("setThing", actionContext, "thing", thing);
thingEditor.doAction("selectThing", actionContext, "thing", currentEventThing);
actionContext.g().put("currentIsAction", true);
applyButton.setEnabled(false);

def getRootItem(treeItem){
    if(treeItem.getParentItem() == null){
        return treeItem;
    }else{
        return getRootItem(treeItem.getParentItem());
    }
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_fileMonitor=false
                  sth_mark=false
                  sid=eventsTreeSelection
        @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder
        sname=mainTabFolder
        sstyle=TOP
        sBORDER=true
        sFLAT=true
        sCLOSE=false
        ssimple=true
        sdisposeControlOnItemClosed=false
        sH_SCROLL=false
        sV_SCROLL=false
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@CTabFolder
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=mainTabFolder
          @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem
          sname=modelItem
          stext=lang:d=模型&en=Model
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=modelItem
            @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite
            sname=topMainComposite
            sBORDER=false
            sH_SCROLL=false
            sV_SCROLL=false
            sNO_BACKGROUND=false
            sNO_FOCUS=false
            sNO_MERGE_PAINTS=false
            sNO_REDRAW_RESIZE=false
            sNO_RADIO_GROUP=false
            sEMBEDDED=false
            sDOUBLE_BUFFERED=false
            scapture=false
            senabled=true
            sredraw=true
            svisible=true
            sdescriptors=xworker.swt.Widgets/@Composite
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=topMainComposite
              @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@topMainCompositeGridLayout
              sname=topMainCompositeGridLayout
              smakeColumnsEqualWidth=false
              smarginWidth=5
              smarginHeight=5
              smarginLeft=0
              smarginTop=0
              smarginRight=0
              smarginBottom=0
              shorizontalSpacing=5
              sverticalSpacing=5
              sdescriptors=xworker.swt.Layouts/@GridLayout
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=topMainCompositeGridLayout
              @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=Composite
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@editComposite
                sname=editComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=editComposite
                  @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@editComposite/@editCompositeGridLayout
                  sname=editCompositeGridLayout
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=editCompositeGridLayout
                  @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@editComposite/@thingEditor
                  sname=thingEditor
                  sthingPath=var:parentContext.thing
                  stitle=true
                  suseRootThing=false
                  ssaveActionContainer=true
                  svariablesActionContext=ognl:parentContext.controlContext
                  sdescriptors=xworker.swt.Widgets/@ThingEditor
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=thingEditor
                    @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@editComposite/@thingEditor/@thingEditrGridData
                    sname=thingEditrGridData
                    sstyle=FILL_BOTH
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.Commons/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingEditrGridData
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@reselectInfoComposite
                sname=reselectInfoComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=reselectInfoComposite
                  @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@reselectInfoComposite/@reselectInfoCompositeGridLayout
                  sname=reselectInfoCompositeGridLayout
                  stype=SWT.HORIZONTAL
                  sdescriptors=xworker.swt.Layouts/@FillLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=reselectInfoCompositeGridLayout
                  @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@reselectInfoComposite/@infoBrowser
                  sname=infoBrowser
                  sdescriptors=xworker.swt.Widgets/@ThingDescripitonBrowser
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=infoBrowser
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@stackLayout
                sname=stackLayout
                stopControl=editComposite
                sdescriptors=xworker.swt.Layouts/@StackLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=stackLayout
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@topMainComposite/@Composite/@GridData
                sname=GridData
                sstyle=FILL_BOTH
                shorizontalIndent=0
                swidth=-1
                sheight=-1
                shorizontalAlignment=BEGINNING
                sverticalAlignment=CENTER
                shorizontalSpan=1
                sverticalSpan=1
                sgrabExcessHorizontalSpace=false
                sgrabExcessVerticalSpace=false
                sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=GridData
          @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem
          sname=actionContextItem
          stext=lang:d=变量上下文&en=Action Context
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionItem
            @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@topMainComposite
            sname=topMainComposite
            sBORDER=false
            sH_SCROLL=false
            sV_SCROLL=false
            sNO_BACKGROUND=false
            sNO_FOCUS=false
            sNO_MERGE_PAINTS=false
            sNO_REDRAW_RESIZE=false
            sNO_RADIO_GROUP=false
            sEMBEDDED=false
            sDOUBLE_BUFFERED=false
            scapture=false
            senabled=true
            sredraw=true
            svisible=true
            sdescriptors=xworker.swt.Widgets/@Composite
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=topMainComposite
              @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@topMainComposite/@topMainCompositeGridLayout
              sname=topMainCompositeGridLayout
              smakeColumnsEqualWidth=false
              smarginWidth=5
              smarginHeight=5
              smarginLeft=0
              smarginTop=0
              smarginRight=0
              smarginBottom=0
              shorizontalSpacing=5
              sverticalSpacing=5
              sdescriptors=xworker.swt.Layouts/@GridLayout
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=topMainCompositeGridLayout
              @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@topMainComposite/@Composite
              sname=Composite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=Composite
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@topMainComposite/@Composite/@compositeFillLayout
                sname=compositeFillLayout
                stype=SWT.HORIZONTAL
                sdescriptors=xworker.swt.Layouts/@FillLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=compositeFillLayout
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@topMainComposite/@Composite/@actionContextViewer
                sname=actionContextViewer
                sshowStack=false
                sdescriptors=xworker.swt.Widgets/@ActionContextViewer
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actionContextViewer
                @/@simpleDesignTool/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@topMainComposite/@Composite/@GridData
                sname=GridData
                sstyle=FILL_BOTH
                shorizontalIndent=0
                swidth=-1
                sheight=-1
                shorizontalAlignment=BEGINNING
                sverticalAlignment=CENTER
                shorizontalSpan=1
                sverticalSpan=1
                sgrabExcessHorizontalSpace=false
                sgrabExcessVerticalSpace=false
                sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=GridData
      @/@simpleDesignTool/@Composite/@actions
      sname=actions
      sdescriptors=xworker.swt.Widgets/@actions
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actions
        @/@simpleDesignTool/@Composite/@actions/@handleNewControl
        sname=handleNewControl
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        svarScope=Local
        sdisableGlobalContext=false
        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignShellActions;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;

if(actionContext.get("currentControl") != null){
    if(thingEditor.doAction("isModified")){    
        //当前编辑的已修改，提示是否保存
        nosaveTip(actionContext, "newControl", newControl, 
             "oldControl", currentControl);
    }
}

//println "handerNewControl";
//初始化控件树
def rootControl = Designer.getCreatorControl(newControl);
if(rootControl != null){
    //是组合控件
    DesignShellActions.designTreeInit(actionContext, controlTree, rootControl, true);    
    selectControl(rootControl, controlTree);
}else{
    //是普通控件
    DesignShellActions.designTreeInit(actionContext, controlTree, newControl, true);
    selectControl(newControl, controlTree);
}

//初始化动作和事件树
eventsTree.removeAll();
if(controlTree.getItems().length > 0){
    rootControl = controlTree.getItems()[0].getData().control;
    DesignShellActions.initEventsAndActions(eventsTree, rootControl, actionContext);
    leftTabFolder.setSelection(controlTabItem);
}

//进入编辑状态
actions.doAction("initEditor", actionContext);

return true;

def selectControl(control, tree){
    for(item in controlTree.getItems()){
        if(selectCurrentControl(control, item)){
            return;
        }
    }
}

//在controlTree上选中当前正在编辑的节点
def selectCurrentControl(currentControl, treeItem){
    def data = treeItem.getData();
    if(data == null){
        return false;
    }
    
    if(data.control == currentControl){
        treeItem.getParent().setSelection(treeItem);
        return true;
    }
    
    for(item in treeItem.getItems()){
        if(selectCurrentControl(currentControl, item)){
            return true;
        }
    }
    
    return false;
}
#$@text#$@
        sinterpretationType=Action
        screateLocalVarScope=false
        ssaveReturn=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=handleNewControl
          @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined
          sname=ActionDefined
          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=ActionDefined
            @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined/@onCompound
            sname=onCompound
            smethod=disable
            scontrolList=designToolBar,designItem,moveItem,eventItem,menuItem,actionItem,dataItem,modelItem
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.ControlActions/@Enabled
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=onCompound
            @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined/@onCompound1
            sname=onControl
            smethod=enable
            scontrolList=designToolBar,designItem,moveItem,eventItem,menuItem,actionItem,dataItem,modelItem
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.ControlActions/@Enabled
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=onCompound1
            @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
            sname=nosaveTip
            sshell=ognl:mainComposite.getShell()
            sicon=ICON_WARNING
            sbuttons=YES | NO
            stitle=lang:d=保存模型&en=Save Model
            svariables=newControl,oldControl,thing,controlContext
            smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=nosaveTip
              @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions
              sname=actions
              sdescriptors=xworker.lang.actions.SelfAction/@actions1
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=actions
                @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@ok
                sname=yes
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

//保存事物
thingEditor.doAction("save");

//更新界面
DesignToolDialog.applyControl(oldControl, currentThing, actionContext);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=ok
                @/@simpleDesignTool/@Composite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@no
                sname=no
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=no
        @/@simpleDesignTool/@Composite/@actions/@initEditor
        sname=initEditor
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        svarScope=Local
        sdisableGlobalContext=false
        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignToolDialog;

if(controlTree.getSelectionCount() <= 0){
    topMainComposite.setEnabled(true);
    thingEditor.doAction("setThing", actionContext, "thing" ,null);
    actionContext.g().put("currentThing", null);
    actionContext.g().put("currentControl", null);
    saveButton.setEnabled(false);
    applyButton.setEnabled(false);
    delteButton.setEnabled(false);
    openButton.setEnabled(false);
    return;
}else{
    topMainComposite.setEnabled(true);
    saveButton.setEnabled(true);
    applyButton.setEnabled(true);
    delteButton.setEnabled(true);
    openButton.setEnabled(true);
}    

//当前控件树的选择
def data = controlTree.getSelection()[0].getData();
def thing = data.thing;
def control = data.control;
def controlContext = Designer.getActionContext(data.control);
controlTree.getShell().setText(thing.getMetadata().getName() + "(" + thing.getThingName() + ")")
//println data.control;


//编辑事物模型
thingEditor.doAction("setThing",actionContext, "thing", thing);
//设置编辑器的辅助变量上下文
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", controlContext);
//变量上下文浏览器
actionContextViewer.doAction("setActionContext", actionContext, "ac", controlContext);
actionContext.g().put("currentThing", thing);
actionContext.g().put("currentControl", control);
actionContext.g().put("currentIsAction", false);
#$@text#$@
        sinterpretationType=Action
        screateLocalVarScope=false
        ssaveReturn=false
        sswitchResult=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=initEditor
      @/@simpleDesignTool/@Composite/@init
      sname=init
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.DesignShellActions;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;


//注册toolActions
parentContext.g().put("toolActions", actions);

//设置
actions.doAction("handleNewControl", actionContext, "newControl", parentContext.control);
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.swt.Widgets/@Code
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=init
  @/@Layout
  sname=Layout
  slabel=设计
  swidth=800
  sheight=600
  snoReturnButton=true
  svisible=true
  sgroup=-10000|设计
  sen_label=Design
  sen_group=-10000|Design
  sdescriptors=xworker.swt.design.DesignTool/@Composite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_noThingRegistViewer=false
  sth_fileMonitor=false
  sth_deprecated=false
  sth_mark=false
  sth_registQueryOnlySelf=false
  snotXmlAttribute=false
  sjson_isArray=false
  sid=Layout
    @/@Layout/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Composite
      @/@Layout/@Composite/@resources
      sname=resources
      sdescriptors=xworker.swt.Widgets/@Resource
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=resources
        @/@Layout/@Composite/@resources/@parentImage
        sname=parentImage
        stype=Image
        simageFile=icons/application_get.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=parentImage
        @/@Layout/@Composite/@resources/@controlsImage
        sname=controlsImage
        stype=Image
        simageFile=icons/page_white_stack.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=controlsImage
        @/@Layout/@Composite/@resources/@toolsMenuImage
        sname=toolsMenuImage
        stype=Image
        simageFile=icons/cog.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=toolsMenuImage
        @/@Layout/@Composite/@resources/@toolsImage
        sname=toolsImage
        stype=Image
        simageFile=icons/house.png
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=toolsImage
        @/@Layout/@Composite/@resources/@copyImage
        sname=copyImage
        stype=Image
        simageFile=icons/xworker/copy.gif
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=copyImage
        @/@Layout/@Composite/@resources/@pasteImage
        sname=pasteImage
        stype=Image
        simageFile=icons/xworker/paste.gif
        sdescriptors=xworker.swt.util.Resource/@Image
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=pasteImage
      @/@Layout/@Composite/@EventFilter
      sname=EventFilter
      sdescriptors=xworker.swt.Widgets/@EventFilter
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=EventFilter
        @/@Layout/@Composite/@EventFilter/@Listener
        sname=Listener
        stype=KeyDown
        sdescriptors=xworker.swt.events.EventFilter/@listeners/@Listener
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=Listener
          @/@Layout/@Composite/@EventFilter/@Listener/@KeySwitch
          sname=KeySwitch
          sinterpretationType=Self
          sattributeTemplate=false
          schildsAttributeTemplate=false
          svarScope=Local
          sisSynchronized=false
          sthrowException=true
          screateLocalVarScope=false
          ssaveReturn=false
          sdisableGlobalContext=false
          sdebugLog=false
          sdescriptors=xworker.swt.actions.EventActions/@KeySwitch
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=KeySwitch
            @/@Layout/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12
            sname=ctrl3
            sCtrl=true
            sShift=false
            sAlt=false
            skey=3
            sdescriptors=xworker.swt.actions.EventActions/@KeySwitch/@Case
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=ctrl12
              @/@Layout/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12/@actions
              sname=actions
              sdescriptors=xworker.swt.actions.EventActions/@KeySwitch/@Case/@actions1
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=actions
                @/@Layout/@Composite/@EventFilter/@Listener/@KeySwitch/@ctrl12/@actions/@doEvent
                sname=doEvent
                srefActionPath=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener/@GroovyAction
                skeepSelf=true
                sinterpretationType=Self
                sattributeTemplate=false
                schildsAttributeTemplate=false
                svarScope=Local
                sisSynchronized=false
                sthrowException=true
                screateLocalVarScope=false
                ssaveReturn=false
                sdisableGlobalContext=false
                sdebugLog=false
                sdescriptors=xworker.lang.actions.Actions/@RefAction
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=doEvent
      @/@Layout/@Composite/@compositeGridLayout
      sname=compositeGridLayout
      smakeColumnsEqualWidth=false
      smarginWidth=5
      smarginHeight=5
      smarginLeft=0
      smarginTop=0
      smarginRight=0
      smarginBottom=0
      shorizontalSpacing=5
      sverticalSpacing=5
      sdescriptors=xworker.swt.Layouts/@GridLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=compositeGridLayout
      @/@Layout/@Composite/@mainCoolbar
      sname=mainCoolbar
      stype=HORIZONTAL
      sBORDER=false
      sFLAT=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@CoolBar
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=mainCoolbar
        @/@Layout/@Composite/@mainCoolbar/@editorToolBarGirdDAta
        sname=editorToolBarGirdDAta
        sstyle=FILL_HORIZONTAL
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=editorToolBarGirdDAta
        @/@Layout/@Composite/@mainCoolbar/@mainCoolItem
        sname=mainCoolItem
        sDROP_DOWN=false
        sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=mainCoolItem
          @/@Layout/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar
          sname=editorToolBar
          stype=HORIZONTAL
          sFLAT=false
          sWRAP=false
          sBORDER=false
          sSHADOW_OUT=false
          sRIGHT=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@ToolBar
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=editorToolBar
            @/@Layout/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem
            sname=toolsMenuItem
            stype=DROP_DOWN
            simage=toolsImage
            stoolTiptext=lang:d=工具列表(Ctrl + 3)&en=Tools(Ctrl + 3)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=designItem
              @/@Layout/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@Layout/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener
                sname=Listener
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=Listener
                  @/@Layout/@Composite/@mainCoolbar/@mainCoolItem/@editorToolBar/@designItem/@listeners/@Listener/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.util.SwtUtils;

def menu = DesignToolDialog.createOperationGroupsMenu(mainTabFolder, actionContext)
SwtUtils.showMenuByWidget(event.widget, menu);
event.doit = false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
        @/@Layout/@Composite/@mainCoolbar/@designCoolItem
        sname=designCoolItem
        sDROP_DOWN=false
        sdescriptors=xworker.swt.widgets.CoolBar/@CoolItem
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=designCoolItem
          @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar
          sname=designToolBar
          stype=HORIZONTAL
          sFLAT=false
          sWRAP=false
          sBORDER=false
          sSHADOW_OUT=false
          sRIGHT=false
          scapture=false
          senabled=true
          sredraw=true
          svisible=true
          sdescriptors=xworker.swt.Widgets/@ToolBar
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=editorToolBar
            @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2
            sname=copyItem
            stype=PUSH
            simage=copyImage
            stoolTiptext=lang:d=复制控件(Ctrl + C)&en=Copy(Ctrl +C)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=toolsItem2
              @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2/@listeners/@toolsItemSelection
                sname=toolsItemSelection
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=toolsItemSelection
                  @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem2/@listeners/@toolsItemSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.ui.swt.Clipboard;

Thing thing = parentContext.controlThing;
if(thing != null){
    Clipboard.add(thing.detach(false));
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
            @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21
            sname=pasteItem
            stype=PUSH
            simage=pasteImage
            stoolTiptext=lang:d=粘贴代码(Alt + V)&en=Copy(ALT + V)
            senabled=true
            sdescriptors=xworker.swt.widgets.ToolBar/@ToolItem
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=toolsItem21
              @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners
              sname=listeners
              sdescriptors=xworker.swt.events.Listeners/@listeners
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=listeners
                @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection
                sname=pasteCodeItemSelection
                stype=Selection
                sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=toolsItemSelection
                  @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
if(actionContext.get("designContext") == null){
    confirm(actionContext);
    return;
}

//先选中设计标签页
mainTabFolder.setSelection(designItem);
designContext.mainTabFolder.setSelection(designContext.insertableControlsItem);

//选中粘贴代码的事物
def thing = world.getThing("xworker.swtshare.p2018.p06.p09.PasteCode");
if(thing != null){
    designContext.controlRegist.doAction("selectThing", actionContext, "thing", thing);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                    @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection/@GroovyAction/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainCoolbar/@designCoolItem/@editorToolBar/@toolsItem21/@listeners/@toolsItemSelection/@GroovyAction/@ActionDefined/@confirm
                      sname=confirm
                      sshell=var:shell
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=粘贴代码&en=Paste Code
                      smessage=lang:d=请先选择插入标签页。&en=Please select Insert TabItem.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
      @/@Layout/@Composite/@mainSashForm
      sname=mainSashForm
      sstyle=HORIZONTAL
      sSMOOTH=false
      sweights=30,70
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      spack=false
      svisible=true
      sdescriptors=xworker.swt.Widgets/@SashForm
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=mainSashForm
        @/@Layout/@Composite/@mainSashForm/@GridData
        sname=GridData
        sstyle=FILL_BOTH
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=GridData
        @/@Layout/@Composite/@mainSashForm/@controlTree
        sname=controlTree
        sselectStyle=SINGLE
        sV_SCROLL=true
        sH_SCROLL=true
        sCHECK=false
        sFULL_SELECTION=false
        sHIDE_SELECTION=false
        sBORDER=false
        slineVisible=false
        smultipleColumns=false
        sheaderVisible=false
        ssortIndicator=false
        smoveableColumns=false
        sheadImages=false
        ssubImages=false
        scheckSelection=false
        scapture=false
        senabled=true
        sredraw=true
        spack=false
        svisible=true
        sdescriptors=xworker.swt.Widgets/@Tree
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=controlTree
          @/@Layout/@Composite/@mainSashForm/@controlTree/@Listeners
          sname=Listeners
          sdescriptors=xworker.swt.widgets.Widget/@Listeners
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=Listeners
            @/@Layout/@Composite/@mainSashForm/@controlTree/@Listeners/@treeSelection
            sname=treeSelection
            stype=Selection
            sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_mark=false
            sid=treeSelection
              @/@Layout/@Composite/@mainSashForm/@controlTree/@Listeners/@treeSelection/@treeSelection
              sname=treeSelection
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
import xworker.swt.design.Designer;

if(actionContext.get("noTreeControlSelection") == true){
    return;
}
//选择控件
def data = event.item.data;

if(data.control == null || data.control.isDisposed()){
    event.item.dispose();
    return;
}

//println "sssssss" + data;
if(data.control.isVisible() == false){
    data.control.setVisible(true);
}
Designer.setCurrentDesignControl(data.control);

//关闭窗口
//shell.dispose();
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sswitchResult=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=treeSelection
        @/@Layout/@Composite/@mainSashForm/@mainTabFolder
        sname=mainTabFolder
        sstyle=TOP
        sBORDER=true
        sFLAT=true
        sCLOSE=false
        ssimple=true
        sdisposeControlOnItemClosed=false
        sH_SCROLL=false
        sV_SCROLL=false
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@CTabFolder
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=mainTabFolder
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@onSelection
          sname=onSelection
          sdescriptors=xworker.swt.widgets.Widget/@Event
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=onSelection
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@onSelection/@GroovyAction
            sname=mainTabFolderSelection
            sisSynchronized=false
            sthrowException=true
            suseOtherAction=false
            svarScope=Local
            sdisableGlobalContext=false
            Scode=
#$@text#$@
import xworker.swt.design.DesignShellActions;

def item = event.item;

if(actionContext.get("controlType") == "compound"){
    boolean disable = false;
    if(item == designItem){
        disable = true;
    }else if(item == moveItem){
        disable = true;
    }
    if(disable){
        mainTabFolder.setSelection(toolsItem);
        return;
    }
}

//选择合适的组件
def ac = null;
if(item == designItem){
    ac = designContext;
}else if(item == moveItem){
    ac = moveContext;    
    ac.g().put("srcControl", null);
}else if(item == modelItem){
    ac = modelContext;
}else if(item == eventItem){
    ac = eventContext;
}else if(item == menuItem){
    ac = menuContext;
}else if(item == actionItem){
    ac = actionCtx;
}

if(ac != null){
    //由于parentContext被替换了，所以把本actionContext作为designContext
    ac.g().put("designContext", actionContext);
    return ac.actions.doAction("handleNewControl", actionContext, 
          "newControl", parentContext.control, "force" , true);
}
return false;
#$@text#$@
            sinterpretationType=Action
            screateLocalVarScope=false
            ssaveReturn=false
            sswitchResult=false
            sdebugLog=false
            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=GroovyAction
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem
          sname=designItem
          stext=lang:d=插入&en=Insert
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=designItem
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design
            sname=designContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=design
              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainComposite
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder
                sname=mainTabFolder
                sstyle=TOP
                sBORDER=false
                sFLAT=false
                sCLOSE=false
                sdisposeControlOnItemClosed=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@CTabFolder
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainTabFolder
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@onSelection
                  sname=onSelection
                  sdescriptors=xworker.swt.widgets.Widget/@Event
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=onSelection
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@onSelection/@GroovyAction
                    sname=GroovyAction
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
def selected = false;
if(event.item == insertableControlsItem){
    if(controlRegist.doAction("getThing") != null){
        actionContext.g()
    }
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=GroovyAction
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@insertableControls
                  sname=insertableControlsItem
                  stext=lang:d=控件向导&en=Control Guide
                  sCLOSE=false
                  sdelayReload=false
                  sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=insertableControls
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@insertableControls/@controlRegist
                    sname=controlRegist
                    sthing=xworker.swt.design.DesignToolControlIndex
                    sregistType=control
                    sparent=false
                    ssearchByKeywords=true
                    sshowContent=true
                    scontentDisplayType=Composite
                    sforceUseDefaultOpenMethod=false
                    sshowDescBrowser=false
                    sdescBrowserRight=false
                    sautoLoad=true
                    scache=true
                    scheck=false
                    sdescritporForNewThing=xworker.swt.design.InjectableControl
                    sdescritporChilds=false
                    ssashFormWeights=30,70
                    sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=controlRegist
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem
                  sname=modelItem
                  stext=lang:d=控件模型&en=Control Model
                  sCLOSE=false
                  sdelayReload=false
                  sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=modelItem
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm
                    sname=modelSashForm
                    sstyle=HORIZONTAL
                    sSMOOTH=false
                    sweights=30,70
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@SashForm
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=modelSashForm
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@modelRegist
                      sname=modelRegist
                      sthing=xworker.swt.Widgets
                      sregistType=child
                      sparent=false
                      ssearchByKeywords=true
                      sshowContent=false
                      scontentDisplayType=Composite
                      sforceUseDefaultOpenMethod=false
                      sshowDescBrowser=false
                      sdescBrowserRight=false
                      sautoLoad=true
                      scache=true
                      scheck=false
                      sdescritporForNewThing=xworker.lang.MetaDescriptor3
                      sdescritporChilds=false
                      sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=modelRegist
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@modelRegist/@actions
                        sname=actions
                        sdescriptors=xworker.swt.xworker.ThingRegistSelector/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@modelRegist/@actions/@selected
                          sname=selected
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import org.xmeta.Thing;

if(thing != null){
    def newThing = new Thing(thing.getMetadata().getPath());
    thingEditor.doAction("setThing", actionContext, "thing", newThing);
}
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=selected
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@modelItem/@modelSashForm/@thingEditor
                      sname=thingEditor
                      stitle=true
                      suseRootThing=false
                      ssaveActionContainer=true
                      sdescriptors=xworker.swt.Widgets/@ThingEditor
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditor
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainTabFolder/@mainTabFolderGridData
                  sname=mainTabFolderGridData
                  sstyle=FILL_BOTH
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=BEGINNING
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=mainTabFolderGridData
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite
                sname=buttonComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=buttonComposite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@GridData
                  sname=GridData
                  sstyle=FILL_HORIZONTAL
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=END
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@RowLayout
                  sname=RowLayout
                  sfill=false
                  sjustify=false
                  smarginWidth=0
                  smarginHeight=0
                  smarginLeft=3
                  smarginTop=3
                  smarginRight=3
                  smarginBottom=3
                  spack=true
                  sspacing=3
                  stype=SWT.HORIZONTAL
                  swrap=true
                  sdescriptors=xworker.swt.Layouts/@RowLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=RowLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton
                  sname=beforeButton
                  stext=lang:d=插入前面(&amp;A)&en=Insert Before(&amp;A)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=preButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertedControl = null;
if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    insertedControl = newCreatedControl;
    actionContext.g().put("newCreatedControl", null);
    beforeButton.setText(beforeButton.getData("oldLabel"));
}else{    
    def insertControl = actions.doAction("getThingForInsert");
    if(insertControl == null){
        //为空不能插入
        noControlMsg(actionContext);
        return;
    }
    
    insertedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.ABOVE);
}

//选中新插入的控件
if(insertedControl != null && !insertedControl.isDisposed()){
    Designer.setCurrentDesignControl(insertedControl);
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter
                    sname=onMouseEnter
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseEnter
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.ABOVE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    beforeButton.setData("oldLabel", beforeButton.getText());
    beforeButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseExit
                    sname=onMouseExit
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseExit
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@preButton/@onMouseExit/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    beforeButton.setText(beforeButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton
                  sname=belowButton
                  stext=lang:d=插入后面(&amp;S)&en=Insert Below(&amp;S)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=afterButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertedControl = null;
if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    insertedControl = newCreatedControl;
    actionContext.g().put("newCreatedControl", null);
    belowButton.setText(belowButton.getData("oldLabel"));    
} else {
    def insertControl = actions.doAction("getThingForInsert");
    if(insertControl == null){
        //为空不能插入
        noControlMsg(actionContext);
        return;
    }
    
    insertedControl =DesignTools.insert(parentContext.control, insertControl, DesignTools.BELOW);
}

//选中新插入的控件
if(insertedControl != null && !insertedControl.isDisposed()){
    Designer.setCurrentDesignControl(insertedControl);
}

/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index + 1);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveBelow(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter
                    sname=onMouseEnter
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseEnter
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.BELOW);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    belowButton.setData("oldLabel", belowButton.getText());
    belowButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseExit
                    sname=onMouseExit
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseExit
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@afterButton/@onMouseExit/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    belowButton.setText(belowButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton
                  sname=insideButton
                  stext=lang:d=插入里面(&amp;D)&en=Insert Inside(&amp;D)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=insideButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;

def insertedControl = null;
if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    insertedControl = newCreatedControl;
    actionContext.g().put("newCreatedControl", null);
    insideButton.setText(insideButton.getData("oldLabel"));
}else{    
    def insertControl = actions.doAction("getThingForInsert");
    if(insertControl == null){
        //为空不能插入
        noControlMsg(actionContext);
        return;
    }
    
    insertedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.INSIDE);
}

//选中新插入的控件
if(insertedControl != null && !insertedControl.isDisposed()){
    Designer.setCurrentDesignControl(insertedControl);
}
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import org.eclipse.swt.SWT;
import xworker.swt.util.SwtUtils;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = parentContext.control;
def controlThing = parentContext.controlThing;
if(control instanceof Composite){
    if(control.getLayout() == null){
         noLayoutMsg(actionContext);
         return;
    }
 
    //先添加到子节点
    def icontrol = insertControl.detach();
    SwtUtils.trimLayoutData(control, icontrol);
    controlThing.addChild(icontrol);
        
    try{
        //创建新的控件
        def ac = control.getData("_designer_actionContext");
        ac.put("parent", control);
                
        def newControl = icontrol.doAction("create", ac);

        //重新布局
        if(control.getParent() != null){
            control.layout();
            control.getParent().layout();
        }else{
            control.layout();
            //control.update();
        }
        //println("layouted");
    }catch(Exception e){
        controlThing.removeChild(icontrol);
        def box = new MessageBox(insideButton.getShell(), SWT.OK | SWT.ICON_INFORMATION);
        box.setText(UtilString.getString("lang:d=插入控件&en=Insert Control", actionContext));
        def msg = UtilString.getString("lang:d=插入失败，" + e.getMessage() + "&en=Insert error, " + e.getMessage(), actionCotnext);
        box.setMessage(msg);
        box.open();
    }
    controlThing.save();
}else{
    noCompositeMsg(actionContext);
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noCompositeMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg12
                          sname=errMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg12
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg121
                          sname=noLayoutMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=没有插入，容器还未设置布局。&en=No insertion. The container has not been configured layout yet
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg121
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@15353
                    sname=RowData
                    sexclude=false
                    swidth=-1
                    sheight=-1
                    sdescriptors=xworker.swt.layout.RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=15353
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter
                    sname=onMouseEnter
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseEnter
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.INSIDE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    insideButton.setData("oldLabel", insideButton.getText());
    insideButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                          sname=noParentMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                          sname=noControlMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg1
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                          sname=noSameRootThingMsg
                          sshell=ognl:beforeButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=插入控件&en=Insert Control
                          smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseExit
                    sname=onMouseExit
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onMouseExit
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@insideButton/@onMouseExit/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    insideButton.setText(insideButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton
                  sname=replaceButton
                  stext=lang:d=替换(&amp;F)&en=Replace(&amp;F)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=replaceButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config
                      sname=config
                      sshell=ognl:replaceButton.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=OK | CANCEL
                      stitle=lang:d=覆盖控件&en=Replace Control
                      smessage=lang:d=确实要覆盖当前控件吗?&en=Are you sure to replace current control?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=config
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def newControl = DesignTools.insert(parentContext.control, insertControl, DesignTools.REPLACE);
if(newControl != null){
    Designer.setCurrentDesignControl(newControl);
}
/*
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.MessageBox;
import org.xmeta.util.UtilString;
import xworker.swt.design.Designer;
import xworker.swt.util.SwtUtils;
import org.eclipse.swt.custom.SashForm;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing && parentThing.getParent() != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}
def isTtem = false;
if(parentThing.getParent() == parentControlThing){
    //CTabFolder, TabFolder等情形
    parentControlThing = parentThing;
    isTtem = true;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
//复制LayoutData
def ilayoutData = SwtUtils.getLayoutData(parentControl, icontrol);
if(ilayoutData == null){
    def oldLayoutData = SwtUtils.getLayoutData(parentControl, controlThing);
    if(oldLayoutData != null){
        icontrol.addChild(oldLayoutData.detach());
    }
}
parentControlThing.addChild(icontrol, index);
parentControlThing.removeChild(controlThing);
parentControlThing.save();


//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.peek().put("parent", parentControl);
if(isTtem){
    for(item in parentControl.getItems()){
        if(item.control == control){
            def newControl = icontrol.doAction("create", ac);
            if(newControl instanceof Control){
                item.setControl(newControl);
            }
            break;
        }
    }
    control.dispose();
}else{
    def newControl = icontrol.doAction("create", ac);
    if(newControl instanceof Control){
        newControl.moveAbove(control);
        Designer.setCurrentDesignControl(newControl);
    }
    
    //销毁原有的控件
    control.dispose();
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined
                            sname=ActionDefined
                            sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=ActionDefined
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg
                              sname=noParentMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg1
                              sname=noControlMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg1
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg11
                              sname=noCompositeMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg11
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg12
                              sname=errMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg12
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg111
                              sname=noSameRootThingMsg
                              sshell=ognl:beforeButton.getShell()
                              sicon=ICON_INFORMATION
                              sbuttons=OK
                              stitle=lang:d=插入控件&en=Insert Control
                              smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=noParentMsg111
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton
                  sname=delteButton
                  stext=lang:d=删除(&amp;X)&en=Remove(&amp;X)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=delteButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection/@run
                      sname=run
                      sshell=ognl:parentContext.shell
                      sicon=ICON_QUESTION
                      sbuttons=OK | CANCEL
                      stitle=lang:d=删除控件&en=Delete Control
                      smessage=lang:d=注意控件删除后不可恢复，确实要删除当前的控件么？&en=Note that the controls cannot be restored after removal. Are you sure you want to delete the current control?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=run
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
DesignTools.remove(parentContext.control);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton
                  sname=layoutDataButton
                  stext=lang:d=布局数据(&amp;Z)&en=LayoutData(&amp;Z)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//变量
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
if(parent == null){
    //没有父控件，是shell
    noLayoutData(actionContext);
    return;
}

def layoutData = SwtUtils.getLayoutData(parent, controlThing);
if(layoutData == null){
    layoutData = SwtUtils.createLayoutData(parent);
    if(layoutData != null){
        controlThing.addChild(layoutData);
        controlThing.save();
    }
}

//打开编辑布局数据的表单
formDialog(actionContext, "thing", layoutData, 
     "title", controlThing.getMetadata().getLabel());
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog
                          sname=formDialog
                          stitle=var:title
                          sshell=ognl:layoutDataButton.getShell()
                          sthing=var:thing
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.DialogActions/@ThingFormDialog
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=formDialog
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions
                            sname=actions
                            sdescriptors=xworker.lang.actions.SelfAction/@actions1
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=actions
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@ok
                              sname=ok
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ok
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@modified
                              sname=modified
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=modified
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@noLayoutData
                          sname=noLayoutData
                          sshell=ognl:layoutDataButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=布局数据&en=LayoutData
                          smessage=lang:d=当前控件没有表单数据。&en=Current control does not have a LayoutData.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noLayoutData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton1
                  sname=layoutButton
                  stext=lang:d=布局(&amp;C)&en=Layout(&amp;C)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton1
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton1/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@buttonComposite/@layoutDataButton1/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

import xworker.swt.design.DesignTools;
import org.xmeta.ActionContext;

//获取控件
def control = parentContext.control;
/*
if(!DesignTools.hasLayout(control)){
    //noLayout(actionContext);
    return;
}

def layout = control.getLayout();
if(layout == null){
    //noLayout(actionContext);
    //return;
}*/

def ac = new ActionContext();
ac.put("parent", layoutButton.getShell());
ac.put("parentContext", parentContext);

def thing = world.getThing("xworker.swt.design.LayoutDialog");
def shell = thing.doAction("create", ac);
shell.setVisible(true);
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@getInsertThing
                  sname=getThingForInsert
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
if(mainTabFolder.getSelection() == insertableControlsItem){
    if(controlRegist.doAction("getThing") == null){
        //println "nothing selected";
        return null;
    }
        
    def ac = controlRegist.doAction("getActionContext");
    //println ac.get("injectableControl");
    def control = ac.injectableControl.doAction("getInsertControl", ac);
    //println(control);
    return control;
}else{
    try{
        if(thingEditor.doAction("getThing") == null){
            return null;
        }
        thingEditor.doAction("save");
        return thingEditor.doAction("getRootThing");    
    }catch(Exception e){
        return null;
    }
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=getInsertThing
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;
import org.eclipse.swt.widgets.Shell;

//只是简单替换原有的控件
def thing = Designer.getThing(newControl);
if(thing == null){
    return false;
}

if(insideButton.isDisposed()){
    return false;
}

if(DesignTools.isContainer(newControl) == false){
    insideButton.setEnabled(false);
    layoutButton.setEnabled(false);
}else{
    insideButton.setEnabled(true);
    layoutButton.setEnabled(true);
}

//Shell特殊处理
if(newControl instanceof Shell){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    replaceButton.setEnabled(false);
}else{
    beforeButton.setEnabled(true);
    belowButton.setEnabled(true);
    replaceButton.setEnabled(true);

}

parentContext.actions.doAction("setNewControl", parentContext, "newControl", newControl);
//println "newControl=" + newControl;
return true;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction
                  sname=insert
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.eclipse.swt.widgets.Control;
import xworker.swt.util.SwtUtils;

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    noControlMsg(actionContext);
    return;
}

def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined/@noParentMsg
                      sname=noParentMsg
                      sshell=ognl:beforeButton.getShell()
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=插入控件&en=Insert Control
                      smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=noParentMsg
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined/@noParentMsg1
                      sname=noControlMsg
                      sshell=ognl:beforeButton.getShell()
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=插入控件&en=Insert Control
                      smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=noParentMsg1
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ActionDefined/@noParentMsg11
                      sname=noSameRootThingMsg
                      sshell=ognl:beforeButton.getShell()
                      sicon=ICON_INFORMATION
                      sbuttons=OK
                      stitle=lang:d=插入控件&en=Insert Control
                      smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ins
                    sisValidate=false
                    sname=ins
                    sdescriptors=xworker.lang.actions.Inout/@ins
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ins
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@GroovyAction/@ins/@type
                      sname=type
                      stypeCheck=false
                      soptional=true
                      scheck=false
                      scheckLevel=exception
                      sdescriptors=xworker.lang.actions.Inout/@ins/@param
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=type
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
/*if(event.widget == actionContext.get("designItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext);
}else */
if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@mainCompositeGridLayout
                sname=mainCompositeGridLayout
                smakeColumnsEqualWidth=false
                smarginWidth=5
                smarginHeight=5
                smarginLeft=0
                smarginTop=0
                smarginRight=0
                smarginBottom=0
                shorizontalSpacing=5
                sverticalSpacing=5
                sdescriptors=xworker.swt.Layouts/@GridLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainCompositeGridLayout
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@designItem/@design/@mainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

if(DesignTools.isContainer(parentContext.control) == false){
    insideButton.setEnabled(false);
}
/*
def parentControl = parentContext.control.getParent();

if(parentControl instanceof TabFolder || parentControl instanceof CTabFolder
    || parentControl instanceof SashForm || parentControl instanceof ScrolledComposite){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
}

if(parentContext.controlThing.getThingName() == "InjectableComposite"){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    insideButton.setEnabled(false);
}*/
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem
          sname=moveItem
          stext=lang:d=移动/复制&en=Move / Copy
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=moveItem
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext
            sname=moveContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=moveContext
              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=Composite
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste
                sname=infoCompoiste
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=infoCompoiste
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste/@infoCompositeGridLayout
                  sname=infoCompositeGridLayout
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=infoCompositeGridLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste/@infoLabel
                  sname=infoLabel
                  sBORDER=false
                  sstyle=WRAP
                  stype=HORIZONTAL
                  salignment=LEFT
                  stext=lang:d=请用Ctrl+鼠标中间选择一个界面上的控件。&en=Please select a control from the interface by click Ctrl+ mouse middle button.
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Label
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=infoLabel
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@infoCompoiste/@infoLabel/@infoLabelGridData
                    sname=infoLabelGridData
                    sstyle=FILL_HORIZONTAL
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=infoLabelGridData
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite
                sname=operationComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=operationComposite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@operationCompositeGridData
                  sname=operationCompositeGridLabel
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=operationCompositeGridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@operateLabel
                  sname=operateLabel
                  sBORDER=false
                  sstyle=WRAP
                  stype=HORIZONTAL
                  salignment=LEFT
                  stext=lang:d=请选择操作方式。&en=Please select an operation.
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Label
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=operateLabel
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@operateLabel/@operataLabelGridData
                    sname=operataLabelGridData
                    sstyle=FILL_HORIZONTAL
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=operataLabelGridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@copyButton
                  sname=copyButton
                  stext=lang:d=拷贝&en=Copy
                  stype=SWT.CHECK
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=copyButton
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste
                  sname=buttonCompoiste
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=buttonCompoiste
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@buttonCompositeGridData
                    sname=buttonCompositeGridData
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=END
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=buttonCompositeGridData
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@buttonCompositeRowLayout
                    sname=buttonCompositeRowLayout
                    sfill=false
                    sjustify=false
                    smarginWidth=0
                    smarginHeight=0
                    smarginLeft=3
                    smarginTop=3
                    smarginRight=3
                    smarginBottom=3
                    spack=true
                    sspacing=3
                    stype=SWT.HORIZONTAL
                    swrap=true
                    sdescriptors=xworker.swt.Layouts/@RowLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=buttonCompositeRowLayout
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton
                    sname=beforeButton
                    stext=lang:d=前面(&amp;F)&en=Before(&amp;F)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=preButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, targetControl, DesignTools.ABOVE, copyButton.getSelection(), parentContext);

actions.doAction("cancel");
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter
                      sname=onMouseEnter
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseEnter
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(targetControl, insertControl, DesignTools.ABOVE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    beforeButton.setData("oldLabel", beforeButton.getText());
    beforeButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseExit
                      sname=onMouseExit
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseExit
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@preButton/@onMouseExit/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    beforeButton.setText(beforeButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton
                    sname=belowButton
                    stext=lang:d=后面(&amp;B&en=Below(&amp;B)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=afterButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, targetControl, DesignTools.BELOW, copyButton.getSelection(), parentContext);

actions.doAction("cancel");
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter
                      sname=onMouseEnter
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseEnter
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(targetControl, insertControl, DesignTools.BELOW);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    belowButton.setData("oldLabel", belowButton.getText());
    belowButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseExit
                      sname=onMouseExit
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseExit
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@afterButton/@onMouseExit/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    belowButton.setText(belowButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton
                    sname=insideButton
                    stext=lang:d=里面(&amp;I)&en=Inside(&amp;I)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=insideButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, targetControl, DesignTools.INSIDE, copyButton.getSelection(), parentContext);

actions.doAction("cancel");
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noCompositeMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg12
                            sname=errMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg12
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onSelection/@GroovyAction/@ActionDefined/@noParentMsg121
                            sname=sameParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=移动控件&en=Move Control
                            smessage=lang:d=无法插入控件，控件已经在当前容器中。&en=The control cannot be inserted. The control is already in the current container.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg121
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseExit
                      sname=onMouseExit
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseExit
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseExit/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    DesignTools.remove(newCreatedControl, false);
    insideButton.setText(insideButton.getData("oldLabel"));
    actionContext.g().put("newCreatedControl", null)
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter
                      sname=onMouseEnter
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onMouseEnter
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;
import org.xmeta.util.UtilString;

if(actionContext.get("newCreatedControl") != null && !newCreatedControl.isDisposed()){
    return;
}

def insertControl = actions.doAction("getThingForInsert");
if(insertControl == null){
    //为空不能插入
    //noControlMsg(actionContext);
    return;
}

def newCreatedControl = DesignTools.insert(targetControl, insertControl, DesignTools.INSIDE);
if(newCreatedControl != null){
    actionContext.g().put("newCreatedControl", newCreatedControl);
    insideButton.setData("oldLabel", insideButton.getText());
    insideButton.setText(UtilString.getString("lang:d=保存&en=Save", actionContext));
}
/*
def control = parentContext.control;
def controlThing = parentContext.controlThing;
def parentThing = controlThing.getParent();
if(parentThing == null){
    //不是根节点，无法插入到前面
    noParentMsg(actionContext);
    return;
}

def parentControl = control.getParent();
def parentControlThing = world.getThing(parentControl.getData("_designer_thingPath"));
if(parentThing != parentControlThing){
    //不是同一个模型，不能插入
    noSameRootThingMsg(actionContext);
    return;
}

//插入模型
def index = parentControlThing.getChilds().indexOf(controlThing);
def icontrol = insertControl.detach();
SwtUtils.trimLayoutData(parentControl, icontrol);
parentControlThing.addChild(icontrol, index);
parentControlThing.save();

//创建新的控件
def ac = control.getData("_designer_actionContext");
ac.put("parent", parentControl);
def newControl = icontrol.doAction("create", ac);
if(newControl instanceof Control){
    newControl.moveAbove(control);
}

//重新布局
if(parentControl.getParent() != null){
    parentControl.getParent().layout();
}else{
    parentControl.layout();
}*/
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined
                          sname=ActionDefined
                          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ActionDefined
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg
                            sname=noParentMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg1
                            sname=noControlMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，请先设置一个控件。&en=The control cannot be inserted. Please set a control frist.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@insideButton/@onMouseEnter/@GroovyAction/@ActionDefined/@noParentMsg11
                            sname=noSameRootThingMsg
                            sshell=ognl:beforeButton.getShell()
                            sicon=ICON_INFORMATION
                            sbuttons=OK
                            stitle=lang:d=插入控件&en=Insert Control
                            smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=noParentMsg11
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton
                    sname=replaceButton
                    stext=lang:d=替换(&amp;R)&en=Replace(&amp;R)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=replaceButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=onSelection
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config
                        sname=confirm
                        sshell=ognl:replaceButton.getShell()
                        sicon=ICON_QUESTION
                        sbuttons=OK | CANCEL
                        stitle=lang:d=覆盖控件&en=Replace Control
                        smessage=lang:d=确实要覆盖当前控件吗?&en=Are you sure to replace current control?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=config
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions
                          sname=actions
                          sdescriptors=xworker.lang.actions.SelfAction/@actions1
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=actions
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok
                            sname=ok
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.util.SwtUtils;

DesignTools.move(srcControl, targetControl, DesignTools.REPLACE, copyButton.getSelection(), parentContext);

actions.doAction("cancel");
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sswitchResult=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=ok
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg
                                sname=noParentMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，控件模型已是根节点。&en=The control cannot be inserted. The control model is the root node.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg1
                                sname=noControlMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，要插入的控件为空。&en=The control cannot be inserted. The control is null.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg1
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg11
                                sname=noCompositeMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，父控件不是Composite。&en=The control cannot be inserted. The model of parent control is not a composite.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg11
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg12
                                sname=errMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，。&en=The control cannot be inserted. The control model is the root node.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg12
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@replaceButton/@onSelection/@config/@actions/@ok/@ActionDefined/@noParentMsg111
                                sname=noSameRootThingMsg
                                sshell=ognl:beforeButton.getShell()
                                sicon=ICON_INFORMATION
                                sbuttons=OK
                                stitle=lang:d=移动控件&en=Move Control
                                smessage=lang:d=无法插入控件，父控件不是同一个模型。&en=The control cannot be inserted. The model of parent control is not a same model.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=noParentMsg111
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@cancelButton
                    sname=cancelButton
                    stext=lang:d=取消(&amp;C)&en=Cancel(&amp;C)
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    spack=false
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_noThingRegistViewer=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sth_registQueryOnlySelf=false
                    snotXmlAttribute=false
                    sjson_isArray=false
                    sid=cancelButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@cancelButton/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_noThingRegistViewer=false
                      sth_fileMonitor=false
                      sth_mark=false
                      sth_registQueryOnlySelf=false
                      snotXmlAttribute=false
                      sjson_isArray=false
                      sid=onSelection
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@operationComposite/@buttonCompoiste/@cancelButton/@onSelection/@cancelButtonSelection
                        sname=cancelButtonSelection
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        scode=actions.doAction("cancel");
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_noThingRegistViewer=false
                        sth_fileMonitor=false
                        sth_mark=false
                        sth_registQueryOnlySelf=false
                        snotXmlAttribute=false
                        sjson_isArray=false
                        sid=cancelButtonSelection
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@stackLayout
                sname=stackLayout
                stopControl=infoCompoiste
                sdescriptors=xworker.swt.Layouts/@StackLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=stackLayout
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;
import xworker.swt.design.DesignToolDialog;

if(srcControl != null){
    //println "xxxxxxxxxx";
    stackLayout.topControl = operationComposite;
    mainComposite.layout();    
    
    if(actionContext.get("rootControl") != null){
        newControl = rootControl;
    }
    
    actionContext.g().put("targetControl", newControl);    
    
    beforeButton.setEnabled(true);
    belowButton.setEnabled(true);
    
    if(DesignTools.isContainer(newControl) && !DesignTools.isComponent(newControl)){
        insideButton.setEnabled(true);
    }else{
        insideButton.setEnabled(false);
    }
    
    if(srcControl == newControl){
        replaceButton.setEnabled(false);
        beforeButton.setEnabled(false);
        belowButton.setEnabled(false);
    }else{
        replaceButton.setEnabled(true);
        beforeButton.setEnabled(true);
        belowButton.setEnabled(true);
    }
}else{
    //stackLayout.topControl = infoCompoiste;
    stackLayout.topControl = operationComposite;
    mainComposite.layout();  
    
    //println "xxxxxxx";
    def thing = Designer.getThing(parentContext.control);
    actionContext.g().put("insertControlThing", thing.detach());
    actionContext.g().put("srcControl", parentContext.control);
    
    insideButton.setEnabled(false);
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    replaceButton.setEnabled(false);
    
    DesignToolDialog.setNewControl(parentContext, newControl);
}

return true;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sswitchResult=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
if(event.widget == actionContext.get("designMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@getThingForInsert
                  sname=getThingForInsert
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  scode=return insertControlThing;
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=getThingForInsert
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@actions/@cancel
                  sname=cancel
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.DesignShellActions;

designContext.mainTabFolder.setSelection(designContext.designItem);

/*
def designContext = designContext;
def parentContext = parentContext;
def control = targetControl != null && targetControl.isDisposed() ? targetControl : parentContext.control;
println control;
cancelButton.getDisplay().asyncExec({
    DesignShellActions.designTreeInit(designContext, designContext.controlTree, control, true);
});
*/
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sswitchResult=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_noThingRegistViewer=false
                  sth_fileMonitor=false
                  sth_mark=false
                  sth_registQueryOnlySelf=false
                  snotXmlAttribute=false
                  sjson_isArray=false
                  sid=cancel
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.Widgets/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@moveItem/@moveContext/@Composite/@mainCompositeGridData
                sname=mainCompositeGridData
                sstyle=FILL_BOTH
                shorizontalIndent=0
                swidth=-1
                sheight=-1
                shorizontalAlignment=BEGINNING
                sverticalAlignment=CENTER
                shorizontalSpan=1
                sverticalSpan=1
                sgrabExcessHorizontalSpace=false
                sgrabExcessVerticalSpace=false
                sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainCompositeGridData
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem
          sname=modelItem
          stext=lang:d=模型&en=Model
          sCLOSE=false
          sdelayReload=false
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=modelItem
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext
            sname=modelContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=modelContext
              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite
              sname=topMainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=topMainComposite
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@topMainCompositeGridLayout
                sname=topMainCompositeGridLayout
                smakeColumnsEqualWidth=false
                smarginWidth=5
                smarginHeight=5
                smarginLeft=0
                smarginTop=0
                smarginRight=0
                smarginBottom=0
                shorizontalSpacing=5
                sverticalSpacing=5
                sdescriptors=xworker.swt.Layouts/@GridLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=topMainCompositeGridLayout
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite
                sname=mainComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=Composite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite
                  sname=editComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=editComposite
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite/@editCompositeGridLayout
                    sname=editCompositeGridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editCompositeGridLayout
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite/@thingEditor
                    sname=thingEditor
                    sthingPath=var:parentContext.thing
                    stitle=true
                    suseRootThing=false
                    ssaveActionContainer=true
                    svariablesActionContext=ognl:parentContext.controlContext
                    sdescriptors=xworker.swt.Widgets/@ThingEditor
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingEditor
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@editComposite/@thingEditor/@thingEditrGridData
                      sname=thingEditrGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.Commons/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditrGridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@reselectInfoComposite
                  sname=reselectInfoComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=reselectInfoComposite
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@reselectInfoComposite/@reselectInfoCompositeGridLayout
                    sname=reselectInfoCompositeGridLayout
                    stype=SWT.HORIZONTAL
                    sdescriptors=xworker.swt.Layouts/@FillLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=reselectInfoCompositeGridLayout
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@reselectInfoComposite/@infoBrowser
                    sname=infoBrowser
                    sdescriptors=xworker.swt.Widgets/@ThingDescripitonBrowser
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=infoBrowser
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@init
                  sname=init
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.Designer;

def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
actionContext.g().put("thing",parentContext.controlThing);
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.swt.Widgets/@Code
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=init
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@stackLayout
                  sname=stackLayout
                  stopControl=editComposite
                  sdescriptors=xworker.swt.Layouts/@StackLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=stackLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@Composite/@GridData
                  sname=GridData
                  sstyle=FILL_BOTH
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=BEGINNING
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite
                sname=buttonComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=buttonComposite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@GridData
                  sname=GridData
                  sstyle=FILL_HORIZONTAL
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=END
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@RowLayout
                  sname=RowLayout
                  sfill=false
                  sjustify=false
                  smarginWidth=0
                  smarginHeight=0
                  smarginLeft=3
                  smarginTop=3
                  smarginRight=3
                  smarginBottom=3
                  spack=true
                  sspacing=3
                  stype=SWT.HORIZONTAL
                  swrap=true
                  sdescriptors=xworker.swt.Layouts/@RowLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=RowLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@saveButton
                  sname=saveButton
                  stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=saveButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      scode=thingEditor.doAction("save");
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@applyButton
                  sname=applyButton
                  stext=lang:d=应用(&amp;W)&en=Apply(&amp;W)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  spack=false
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=applyButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@applyButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@applyButton/@onSelection/@okButtonSelesion
                      sname=applyButtonSelesion
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import org.eclipse.swt.widgets.Shell;
import xworker.swt.design.DesignShellActions;

//保存事物
thingEditor.doAction("save");

//更新界面
DesignTools.update(parentContext.control);
//DesignToolDialog.applyControl(parentContext.control, thing, actionContext);

if(parentContext.control instanceof Shell){
    DesignShellActions.designTreeInit(actionContext, 
          controlTree, parentContext.control, true);
}
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=okButtonSelesion
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@openButton
                  sname=openButton
                  stext=lang:d=在IDE中打开(&amp;O)&en=Open In IDE(&amp;O)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=openButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@openButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@openButton/@onSelection/@ideOpenThing
                      sname=ideOpenThing
                      sthing=var:thing
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.utils.XWorkerActions/@ideOpenThing
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ideOpenThing
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton
                  sname=delteButton
                  stext=lang:d=删除(&amp;D)&en=Remove(&amp;D)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=delteButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection/@run
                      sname=run
                      sshell=ognl:parentContext.shell
                      sicon=ICON_QUESTION
                      sbuttons=OK | CANCEL
                      stitle=lang:d=删除控件&en=Delete Control
                      smessage=lang:d=注意控件删除后不可恢复，确实要删除当前的控件么？&en=Note that the controls cannot be restored after removal. Are you sure you want to delete the current control?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=run
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@onSelection/@run/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
DesignTools.remove(parentContext.control);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@delteButton/@15210
                    sname=RowData
                    sexclude=false
                    swidth=-1
                    sheight=-1
                    sdescriptors=xworker.swt.layout.RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=15210
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton
                  sname=layoutDataButton
                  stext=lang:d=布局数据(&amp;Z)&en=LayoutData(&amp;Z)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//变量
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
if(parent == null){
    //没有父控件，是shell
    noLayoutData(actionContext);
    return;
}

def layoutData = SwtUtils.getLayoutData(parent, controlThing);
if(layoutData == null){
    layoutData = SwtUtils.createLayoutData(parent);
    if(layoutData != null){
        controlThing.addChild(layoutData);
        controlThing.save();
    }
}

//打开编辑布局数据的表单
formDialog(actionContext, "thing", layoutData, 
     "title", controlThing.getMetadata().getLabel());
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined
                        sname=ActionDefined
                        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=ActionDefined
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog
                          sname=formDialog
                          stitle=var:title
                          sshell=ognl:layoutDataButton.getShell()
                          sthing=var:thing
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.DialogActions/@ThingFormDialog
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=formDialog
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions
                            sname=actions
                            sdescriptors=xworker.lang.actions.SelfAction/@actions1
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=actions
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@ok
                              sname=ok
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ok
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@formDialog/@actions/@modified
                              sname=modified
                              sisSynchronized=false
                              sthrowException=true
                              suseOtherAction=false
                              svarScope=Local
                              sdisableGlobalContext=false
                              Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;

//获取LayoutData事物
def control = parentContext.control;
def controlThing = parentContext.controlThing;

def parent = control.getParent();
def layoutData = SwtUtils.getLayoutData(parent, controlThing);

//保存变量
layoutData.getAttributes().putAll(values);
layoutData.save();

//重新创建LayoutData对象
def ac = parentContext.controlContext;
ac.peek().put("parent", parentContext.control);
layoutData.doAction("create", ac);
parentContext.control.getParent().layout();
def pparent = parentContext.control.getParent().getParent();
if(pparent != null){
    pparent.layout();
}
#$@text#$@
                              sinterpretationType=Action
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdebugLog=false
                              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=modified
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton/@onSelection/@GroovyAction/@ActionDefined/@noLayoutData
                          sname=noLayoutData
                          sshell=ognl:layoutDataButton.getShell()
                          sicon=ICON_INFORMATION
                          sbuttons=OK
                          stitle=lang:d=布局数据&en=LayoutData
                          smessage=lang:d=当前控件没有表单数据。&en=Current control does not have a LayoutData.
                          sinterpretationType=Self
                          sattributeTemplate=false
                          schildsAttributeTemplate=false
                          svarScope=Local
                          sisSynchronized=false
                          sthrowException=true
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdisableGlobalContext=false
                          sdebugLog=false
                          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=noLayoutData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton1
                  sname=layoutButton
                  stext=lang:d=布局(&amp;C)&en=Layout(&amp;C)
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=layoutDataButton1
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton1/@onSelection
                    sname=onSelection
                    sdescriptors=xworker.swt.widgets.Widget/@Event
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@buttonComposite/@layoutDataButton1/@onSelection/@GroovyAction
                      sname=GroovyAction
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

import xworker.swt.design.DesignTools;
import org.xmeta.ActionContext;

//获取控件
def control = parentContext.control;
/*
if(!DesignTools.hasLayout(control)){
    //noLayout(actionContext);
    return;
}

def layout = control.getLayout();
if(layout == null){
    //noLayout(actionContext);
    //return;
}*/

def ac = new ActionContext();
ac.put("parent", layoutButton.getShell());
ac.put("parentContext", parentContext);

def thing = world.getThing("xworker.swt.design.LayoutDialog");
def shell = thing.doAction("create", ac);
shell.setVisible(true);
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GroovyAction
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;
import xworker.swt.design.DesignTools;

if(actionContext.get("oldControl") == newControl){
    return true;
}
actionContext.g().put("oldControl", newControl);

if(DesignTools.isContainer(newControl) == false){
    layoutButton.setEnabled(false);
}else{
    layoutButton.setEnabled(true);
}


if(false){//newControl == parentContext.control){
    return true;
}else{
    if(thingEditor.doAction("isModified")){    
        nosaveTip(actionContext);
        return true;
    }else{
        DesignToolDialog.setNewControl(parentContext, newControl);
        thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
        thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
        actionContext.g().put("thing",parentContext.controlThing);
        return true;
    }    
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
                      sname=nosaveTip
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_WARNING
                      sbuttons=YES | NO
                      stitle=lang:d=保存模型&en=Save Model
                      svariables=newControl,oldControl:parentContext.control
                      smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=nosaveTip
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions
                        sname=actions
                        sdescriptors=xworker.lang.actions.SelfAction/@actions1
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actions
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@ok
                          sname=ok
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

//保存事物
thingEditor.doAction("save");

//更新界面
DesignToolDialog.applyControl(oldControl, thing, actionContext);

//println parentContext.controlThing;
DesignToolDialog.setNewControl(parentContext, newControl);
thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
actionContext.g().put("thing",parentContext.controlThing);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=ok
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@no
                          sname=no
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

DesignToolDialog.setNewControl(parentContext, newControl);
thingEditor.doAction("setThing",actionContext, "thing", parentContext.controlThing);
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
actionContext.g().put("thing",parentContext.controlThing);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=no
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip/@actions/@cancel1
                          sname=cancel
                          sisSynchronized=false
                          sthrowException=true
                          suseOtherAction=false
                          svarScope=Local
                          sdisableGlobalContext=false
                          Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

//设计器还是显示原来的控件
Designer.setCurrentDesignControl(parentContext.control);
#$@text#$@
                          sinterpretationType=Action
                          screateLocalVarScope=false
                          ssaveReturn=false
                          sdebugLog=false
                          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=cancel1
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@controlChanged
                  sname=controlChanged
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
stackLayout.topControl = reselectInfoComposite;
mainComposite.layout();
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=controlChanged
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;

if(stackLayout.topControl == editorToolBar && thingEditor.doAction("isModified")){
    def crm = confirm(actionContext);
    if(crm == "OK"){
        //保存事物
        thingEditor.doAction("save");

        //更新界面
        DesignTools.update(parentContext.control);
    }else if(crm == "CANCEL"){
        return;
    }
}

if(event.widget == actionContext.get("designItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@modelItem/@modelContext/@topMainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem
          sname=eventItem
          stext=lang:d=事件&en=Event
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=eventItem
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event
            sname=eventContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=event
              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite
              sname=mainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainComposite
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite
                sname=eventMainComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainComposite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@mainCompositeGridLayout
                  sname=mainCompositeGridLayout
                  smakeColumnsEqualWidth=false
                  smarginWidth=5
                  smarginHeight=5
                  smarginLeft=0
                  smarginTop=0
                  smarginRight=0
                  smarginBottom=0
                  shorizontalSpacing=5
                  sverticalSpacing=5
                  sdescriptors=xworker.swt.Layouts/@GridLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=mainCompositeGridLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm
                  sname=sashForm
                  sstyle=HORIZONTAL
                  sSMOOTH=false
                  sweights=30,70
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@SashForm
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=sashForm
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@sashFormGridData
                    sname=sashFormGridData
                    sstyle=FILL_BOTH
                    shorizontalIndent=0
                    swidth=-1
                    sheight=-1
                    shorizontalAlignment=BEGINNING
                    sverticalAlignment=CENTER
                    shorizontalSpan=1
                    sverticalSpan=1
                    sgrabExcessHorizontalSpace=false
                    sgrabExcessVerticalSpace=false
                    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=sashFormGridData
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm
                    sname=eventSashForm
                    sstyle=VERTICAL
                    sSMOOTH=false
                    sweights=30,70
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@SashForm
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=eventSashForm
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite
                      sname=controlEventComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=controlEventComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@controlEventCompositeGridLayout
                        sname=controlEventCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=controlEventCompositeGridLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@haveEventLabel
                        sname=haveEventLabel
                        sBORDER=false
                        stype=HORIZONTAL
                        salignment=LEFT
                        stext=lang:d=已实现事件：&en=Implemented events:
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Label
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=haveEventLabel
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@haveEventLabel/@GridData
                          sname=GridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=GridData
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@implementedList
                        sname=implementedList
                        sstyle=SINGLE
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sBORDER=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@List
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=implementedList
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@implementedList/@implementsListGridData
                          sname=implementsListGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=implementsListGridData
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@controlEventComposite/@implementedList/@onSelection
                          sname=onSelection
                          sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite
                      sname=eventComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=eventComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventCompositeGridLayout
                        sname=eventCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventCompositeGridLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventLabel
                        sname=eventLabel
                        sBORDER=false
                        stype=HORIZONTAL
                        salignment=LEFT
                        stext=lang:d=事件类型：&en=Events:
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Label
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventLabel
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText
                        sname=eventFilterText
                        sstyle=SINGLE
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sWRAP=false
                        sREAD_ONLY=false
                        sPASSWORD=false
                        sSEARCH=false
                        sCANCEL=false
                        sBORDER=true
                        salign=LEFT
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Text
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=controlFilterText
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@GridData
                          sname=GridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=GridData
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onModify
                          sname=onModify
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onModify
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onModify/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
def text = eventFilterText.getText().toLowerCase();;

eventList.removeAll();
for(listener in listeners){
    def key = listener.getString("value");
    if(key.toLowerCase().indexOf(text) != -1){
        eventList.add(key);
    }
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onKeyDown
                          sname=onKeyDown
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onKeyDown
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@controlFilterText/@onKeyDown/@KeyTravel
                            sname=KeyTravel
                            swidget=var:eventList
                            sselectionListener=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                            sinterpretationType=Self
                            sattributeTemplate=false
                            schildsAttributeTemplate=false
                            svarScope=Local
                            sisSynchronized=false
                            sthrowException=true
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdisableGlobalContext=false
                            sdebugLog=false
                            sdescriptors=xworker.swt.actions.EventActions/@KeyTravel
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=KeyTravel
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList
                        sname=eventList
                        sstyle=SINGLE
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sBORDER=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@List
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventList
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@eventListGridData
                          sname=eventListGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=eventListGridData
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore
                          sname=DataStore
                          sattachToParent=false
                          sloadBackground=true
                          sautoLoad=true
                          sautoSave=false
                          spaging=extend
                          spageSize=50
                          sstoreSortField=_extend
                          sstoreSortDir=ASC
                          seditable=extend
                          seditmethod=extend
                          sdescriptors=xworker.swt.widgets.List/@DataStore
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=DataStore
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects
                            sname=dataObjects
                            sdescriptors=xworker.app.view.swt.data.DataStore/@DataObjects
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=dataObjects
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject
                              sname=AttributeValueDataObject
                              sattributePath=xworker.swt.widgets.Widget/@Event/@name
                              svalueName=value
                              sdisplayName=label
                              seditCols=2
                              spaging=false
                              snoTotalCount=false
                              spagineByCursor=false
                              sreadUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@read
                              screateUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@create
                              supdateUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@update
                              sdestroyUrl=do?sc=xworker.app.view.extjs.server.DataObjectStore/@destroy
                              LstoreAutoDestroy=false
                              sstoreAutoLoad=false
                              LstoreAutoSave=true
                              LstoreBatch=true
                              LstorePruneModifiedRecords=false
                              LstoreRemoteSort=false
                              LstoreRestful=false
                              sstoreRoot='rows'
                              sstoreSuccessProperty='success'
                              sstoreTotalProperty='totalCount'
                              sstoreMessageProperty='msg'
                              sgridEditable=false
                              sgridEditType=cell
                              sformReadUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@read
                              sformCreateUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@create
                              sformUpdateUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@update
                              sformDestroyUrl=do?sc=xworker.app.view.extjs.server.DataObjectForm/@delete
                              spaging_afterPageText=页 共
                              spaging_beforePageText=第
                              Lpaging_displayInfo=false
                              spaging_displayMsg=第{0}-第{1}条，共{2}条
                              spaging_emptyMsg=没有数据
                              spaging_firstText=首页
                              spaging_lastText=最后一页
                              spaging_nextText=下一页
                              Lpaging_prependButtons=false
                              spaging_prevText=上一页
                              spaging_refreshText=刷新
                              sgridColumnLocking=false
                              sgridLockText='锁定'
                              sgridUnlockText='解锁'
                              scolumnGroup=false
                              sgridCheckable=false
                              sgridRowNumber=false
                              sgridGrouping=false
                              sgridGroupTextTpl='{text} ({[values.rs.length]} 条)'
                              sgridRowExpander=false
                              sautoGenerateId=false
                              sidGenerateType=action
                              sidAction=generateId
                              sstoreSortDir=ASC
                              sautoInit=false
                              sautoInitAction=beforeCreate
                              scacheRelation=false
                              scacheRelationMaxSize=1000
                              scacheRelationReadnone=false
                              safterCreated=false
                              sonLoaded=false
                              sbeforeUpdate=false
                              safterUpdated=false
                              sbeforeDelete=false
                              safterDeleted=false
                              sbeforeQuery=false
                              safterQueryed=false
                              sshowUserTask=false
                              sdescriptors=xworker.dataObject.DataObjects/@AttributeValueDataObject
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=AttributeValueDataObject
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject/@5522
                                sname=value
                                slabel=值
                                stype=string
                                soptional=true
                                skey=true
                                sdataField=true
                                sviewField=true
                                sreadField=true
                                screateEditor=true
                                seditEditor=true
                                sviewEditor=true
                                sgridEditor=true
                                squeryEditor=true
                                sreadOnly=false
                                seditable=true
                                sdisabled=false
                                sshowLabel=true
                                slabelAlign=right
                                slabelVAlign=baseline
                                svalidateAllowBlank=true
                                LvalidateOnBlur=true
                                LallowDecimals=true
                                LallowNegative=true
                                sshowInTable=true
                                sdisplayRelationLabel=false
                                sgridFixed=false
                                sgridHidden=false
                                sgridHideable=true
                                sgridSortable=false
                                scolumnLocked=false
                                sgridGroupable=true
                                sgridMenuDisabled=false
                                sgridResizable=true
                                sdescriptors=xworker.dataObject.AbstractDataObject/@attribute
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=5522
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject/@5523
                                sname=label
                                slabel=标签
                                stype=string
                                soptional=true
                                skey=false
                                sdataField=true
                                sviewField=true
                                sreadField=true
                                screateEditor=true
                                seditEditor=true
                                sviewEditor=true
                                sgridEditor=true
                                sreadOnly=false
                                seditable=true
                                sdisabled=false
                                sshowLabel=true
                                slabelAlign=right
                                slabelVAlign=baseline
                                svalidateAllowBlank=true
                                LvalidateOnBlur=true
                                LallowDecimals=true
                                LallowNegative=true
                                sshowInTable=true
                                sdisplayRelationLabel=false
                                sgridFixed=false
                                sgridHidden=false
                                sgridHideable=true
                                sgridSortable=false
                                scolumnLocked=false
                                sgridGroupable=true
                                sgridMenuDisabled=false
                                sgridResizable=true
                                sdescriptors=xworker.dataObject.AbstractDataObject/@attribute
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=5523
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@onSelection
                          sname=onSelection
                          sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite
                    sname=editComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editComposite
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite
                      sname=codeComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=codeComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeCompositeGridLayout
                        sname=codeCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=codeCompositeGridLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor
                        sname=codeEditor
                        sstyle=MULTI
                        sFULL_SELECTION=false
                        sREAD_ONLY=false
                        sWRAP=false
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sBORDER=false
                        salign=LEFT
                        slineNumber=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@StyledText
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=codeEditor
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor/@Colorer
                          sname=Colorer
                          scodeName=groovy
                          scodeType=groovy
                          sdescriptors=xworker.swt.custom.StyledText/@Colorer
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=Colorer
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor/@codeAssistor
                          sname=codeAssistor
                          sinitCache=false
                          sdescriptors=xworker.swt.custom.StyledText/@CodeAssistor
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=codeAssistor
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@codeEditor/@codeEditorGridData
                          sname=codeEditorGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=codeEditorGridData
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709
                        sname=buttonComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=7709
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7710
                          sname=buttonCompositeGridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=END
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7710
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7711
                          sname=buttonCompositeRowLayout
                          sfill=false
                          sjustify=false
                          smarginWidth=0
                          smarginHeight=0
                          smarginLeft=3
                          smarginTop=3
                          smarginRight=3
                          smarginBottom=3
                          spack=true
                          sspacing=3
                          stype=SWT.HORIZONTAL
                          swrap=true
                          sdescriptors=xworker.swt.Layouts/@RowLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7711
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712
                          sname=saveButton
                          stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7712
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712/@7713
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7713
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712/@7714
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7714
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7712/@7714/@7715
                              sname=saveButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7715
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716
                          sname=removeButton
                          stext=lang:d=移除(&amp;R)&en=Remove(&amp;R)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7716
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716/@7717
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7717
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716/@7718
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7718
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@7716/@7718/@7719
                              sname=removeButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@remove
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7719
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161
                          sname=toModelButton
                          stext=lang:d=编辑模型(&amp;M)&en=Edit Model(&amp;M)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=77161
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7717
                            sname=RowData
                            sexclude=false
                            swidth=120
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7717
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7718
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7718
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7718/@7719
                              sname=toModelButtonSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7719
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@codeComposite/@7709/@77161/@7718/@7719/@GroovyAction
                                sname=GroovyAction
                                sisSynchronized=false
                                sthrowException=true
                                suseOtherAction=false
                                svarScope=Local
                                sdisableGlobalContext=false
                                Scode=
#$@text#$@
//用事物编辑器编辑
thingEditor.editorActions.doAction("setThing", ["thing": eventActionThing]);
editStackLayout.topControl = thingEditorComposite;
editComposite.layout();
#$@text#$@
                                sinterpretationType=Action
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdebugLog=false
                                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=GroovyAction
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite
                      sname=thingEditorComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditorComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@thingEditorCompositeGridLayout
                        sname=thingEditorCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=thingEditorCompositeGridLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@thingEditor
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=false
                        sdescriptors=xworker.swt.Widgets/@ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=thingEditor
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@thingEditor/@thingEditorGridData
                          sname=thingEditorGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.Commons/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=thingEditorGridData
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709
                        sname=buttonComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=7709
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7710
                          sname=buttonCompositeGridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=END
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7710
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7711
                          sname=buttonCompositeRowLayout
                          sfill=false
                          sjustify=false
                          smarginWidth=0
                          smarginHeight=0
                          smarginLeft=3
                          smarginTop=3
                          smarginRight=3
                          smarginBottom=3
                          spack=true
                          sspacing=3
                          stype=SWT.HORIZONTAL
                          swrap=true
                          sdescriptors=xworker.swt.Layouts/@RowLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7711
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712
                          sname=saveButton
                          stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7712
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712/@7713
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7713
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712/@7714
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7714
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7712/@7714/@7715
                              sname=saveButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7715
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716
                          sname=removeButton
                          stext=lang:d=移除(&amp;R)&en=Remove(&amp;R)
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=7716
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716/@7717
                            sname=RowData
                            sexclude=false
                            swidth=80
                            sheight=-1
                            sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7717
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716/@7718
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=7718
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@thingEditorComposite/@7709/@7716/@7718/@7719
                              sname=removeButtonSelection
                              stype=Selection
                              sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@remove
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=7719
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite
                      sname=newEventComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=newEventComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@newEventGridLayout
                        sname=newEventGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=newEventGridLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@newEventForm
                        sname=newEventForm
                        sdescriptorThing=xworker.swt.widgets.Widget/@Event
                        scolumn=1
                        sH_SCROLL=true
                        sV_SCROLL=true
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        sdescriptors=xworker.swt.Widgets/@ThingForm
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=newEventForm
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@newEventForm/@newEventFormGridData
                          sname=newEventFormGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=newEventFormGridData
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971
                        sname=buttonComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=1971
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@1972
                          sname=buttonCompositeGridData
                          sstyle=FILL_HORIZONTAL
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=END
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=1972
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@1973
                          sname=buttonCompositeRowLayout
                          sfill=false
                          sjustify=false
                          smarginWidth=0
                          smarginHeight=0
                          smarginLeft=3
                          smarginTop=3
                          smarginRight=3
                          smarginBottom=3
                          spack=true
                          sspacing=3
                          stype=SWT.HORIZONTAL
                          swrap=true
                          sdescriptors=xworker.swt.Layouts/@RowLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=1973
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton
                          sname=createActionContainerEventButton
                          stext=lang:d=使用动作容器&en=Use ActionContainer
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=createEventButton
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=Listeners
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection
                              sname=createEventSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=createEventSelection
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection/@SelectActionContainerDialog
                                sname=selectActionContainerDialog
                                stitle=lang:d=选择动作容器&en=Select ActionContainer
                                sshell=ognl:buttonComposite.getShell()
                                sactionContext=ognl:parentContext.controlContext
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.DialogActions/@SelectActionContainerDialog
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=SelectActionContainerDialog
                                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection/@SelectActionContainerDialog/@actions
                                  sname=actions
                                  sdescriptors=xworker.lang.actions.SelfAction/@actions1
                                  sinheritDescription=false
                                  sth_createIndex=false
                                  sth_registMyChilds=false
                                  sth_registDisabled=false
                                  sth_mark=false
                                  sid=actions
                                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton/@Listeners/@createEventSelection/@SelectActionContainerDialog/@actions/@ok
                                    sname=ok
                                    sisSynchronized=false
                                    sthrowException=true
                                    suseOtherAction=false
                                    svarScope=Local
                                    sdisableGlobalContext=false
                                    Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.design.Designer;

def eventName = eventList.getSelection()[0];
def event = new Thing("xworker.swt.widgets.Widget/@Event");
def values = newEventForm.doAction("getValues", actionContext);
event.getAttributes().putAll(values);
event.put("name", eventName);
event.metadata.setId(eventName);
event.ref = actionContainerName + ":" + actionName;
//def eventAction = new Thing(actionDescriptor.metadata.path);

//控件事物
def control = currentControl;
def controlThing = world.getThing(control.getData(Designer.DATA_THING));
//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);
if(eventThing == null){
    //声明事件并添加
    //event.addChild(eventAction);
    controlThing.addChild(event);
    
    controlThing.save();
    
    //让事件生效
    swtContext.peek().put("parent", control);
    event.doAction("create", swtContext);    
}else{    
    //这是只声明了事件，但没有添加相应动作的情形
    //eventThing.addChild(eventAction);
    
    controlThing.save();
}

//编辑事件
actions.doAction("editEvent", actionContext, "eventThing", event);
//添加到已实现，从未实现的事件列表中删除
implementedList.add(eventName);
implementedList.setSelection([eventName] as String[]);
eventList.remove(eventName);
#$@text#$@
                                    sinterpretationType=Action
                                    screateLocalVarScope=false
                                    ssaveReturn=false
                                    sdebugLog=false
                                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                    sinheritDescription=false
                                    sth_createIndex=false
                                    sth_registMyChilds=false
                                    sth_registDisabled=false
                                    sth_mark=false
                                    sid=ok
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1
                          sname=createGroovyEventButton
                          stext=lang:d=使用Groovy&en=Using Groovy
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=createEventButton1
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1/@Listeners
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=Listeners
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1/@Listeners/@createEventSelection
                              sname=createEventSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=createEventSelection
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton1/@Listeners/@createEventSelection/@GroovyAction
                                sname=GroovyAction
                                sisSynchronized=false
                                sthrowException=true
                                suseOtherAction=false
                                svarScope=Local
                                sdisableGlobalContext=false
                                Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.design.Designer;

def eventName = eventList.getSelection()[0];
def event = new Thing("xworker.swt.widgets.Widget/@Event");
event.put("name", eventName);
event.metadata.setId(eventName);
def eventAction = new Thing("xworker.lang.actions.GroovyAction");

//控件事物
def control = currentControl;
def controlThing = world.getThing(control.getData(Designer.DATA_THING));
//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);
if(eventThing == null){
    //声明事件并添加
    event.addChild(eventAction);
    controlThing.addChild(event);
    
    controlThing.save();
    
    //让事件生效
    swtContext.peek().put("parent", control);
    event.doAction("create", swtContext);  
    
    eventThing = event;  
}else{    
    //这是只声明了事件，但没有添加相应动作的情形
    eventThing.addChild(eventAction);
    
    controlThing.save();
}

//编辑事件
actions.doAction("editEvent", actionContext, "eventThing", eventThing);
//添加到已实现，从未实现的事件列表中删除
implementedList.add(eventName);
implementedList.setSelection([eventName] as String[]);
eventList.remove(eventName);
#$@text#$@
                                sinterpretationType=Action
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdebugLog=false
                                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=GroovyAction
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2
                          sname=createEventButton
                          stext=lang:d=自定义事件&en=Create Event Listener
                          stype=SWT.PUSH
                          sflat=false
                          sborder=false
                          sselected=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@Button
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=createEventButton2
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2/@Listeners
                            sname=Listeners
                            sdescriptors=xworker.swt.widgets.Widget/@Listeners
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=Listeners
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2/@Listeners/@createEventSelection
                              sname=createEventSelection
                              stype=Selection
                              sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=createEventSelection
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@newEventComposite/@1971/@createEventButton2/@Listeners/@createEventSelection/@GroovyAction
                                sname=GroovyAction
                                sisSynchronized=false
                                sthrowException=true
                                suseOtherAction=false
                                svarScope=Local
                                sdisableGlobalContext=false
                                Scode=
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.design.Designer;

def eventName = eventList.getSelection()[0];
def event = new Thing("xworker.swt.widgets.Widget/@Event");
def values = newEventForm.doAction("getValues", actionContext);
event.getAttributes().putAll(values);
event.put("name", eventName);
event.metadata.setId(eventName);
//def eventAction = new Thing(actionDescriptor.metadata.path);

//控件事物
def control = currentControl;
def controlThing = world.getThing(control.getData(Designer.DATA_THING));
//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);
if(eventThing == null){
    //声明事件并添加
    //event.addChild(eventAction);
    controlThing.addChild(event);
    
    controlThing.save();
    
    //让事件生效
    swtContext.peek().put("parent", control);
    event.doAction("create", swtContext);    
}else{    
    //这是只声明了事件，但没有添加相应动作的情形
    //eventThing.addChild(eventAction);
    
    controlThing.save();
}

//编辑事件
actions.doAction("editEvent", actionContext, "eventThing", event);
//添加到已实现，从未实现的事件列表中删除
implementedList.add(eventName);
implementedList.setSelection([eventName] as String[]);
eventList.remove(eventName);
#$@text#$@
                                sinterpretationType=Action
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdebugLog=false
                                sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=GroovyAction
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite
                      sname=infoComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=infoComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite/@infoCompositeGridLayout
                        sname=infoCompositeGridLayout
                        smakeColumnsEqualWidth=false
                        smarginWidth=5
                        smarginHeight=5
                        smarginLeft=0
                        smarginTop=0
                        smarginRight=0
                        smarginBottom=0
                        shorizontalSpacing=5
                        sverticalSpacing=5
                        sdescriptors=xworker.swt.Layouts/@GridLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=infoCompositeGridLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite/@infoBrowser
                        sname=infoBrowser
                        Sdescription=
#$@text#$@
<h1>事件编辑器</h1>

<p>&nbsp;&nbsp;&nbsp; 编辑当前选择的控件的事件。选择一个<strong>事件类型</strong>可以创建事件监听，选择<strong>已实现的事件</strong>可以修改它。</p>

<h2>动作容器</h2>

<p>&nbsp;&nbsp;&nbsp; 动作容器相当于方法和函数的容器，动作容器中的方法可以被多个地方调用，公共的方法可以定义在动作容器中。</p>

<h2>GroovyAction</h2>

<p>&nbsp;&nbsp;&nbsp; 使用脚本语言建议使用Groovy脚本。</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
#$@text#$@
                        sdescriptors=xworker.swt.Widgets/@ThingDescripitonBrowser
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        Sen_description=
#$@text#$@
<h1>Event Editor</h1>

<p>&nbsp;&nbsp;&nbsp; Edit event listener of current selected control.</p>

<h2>GroovyAction</h2>

<p>&nbsp;&nbsp;&nbsp; Groovy scripts is often used in event listener.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
#$@text#$@
                        sth_mark=false
                        sid=infoBrowser
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@infoComposite/@infoBrowser/@infoBrowserGridData
                          sname=infoBrowserGridData
                          sstyle=FILL_BOTH
                          shorizontalIndent=0
                          swidth=-1
                          sheight=-1
                          shorizontalAlignment=BEGINNING
                          sverticalAlignment=CENTER
                          shorizontalSpan=1
                          sverticalSpan=1
                          sgrabExcessHorizontalSpace=false
                          sgrabExcessVerticalSpace=false
                          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=infoBrowserGridData
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@editComposite/@editStackLayout
                      sname=editStackLayout
                      stopControl=infoComposite
                      sdescriptors=xworker.swt.Layouts/@StackLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=editStackLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions
                  sname=actions
                  sdescriptors=xworker.swt.Widgets/@actions
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=actions
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setSwtContext
                    sname=setSwtContext
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.xwidgets.SelectContent;
import xworker.swt.design.Designer;

import org.eclipse.swt.widgets.Widget;

//SWT控件所在的变量上下文
codeAssistor.setActionContext(swtContext);
codeAssistor.initCache(swtContext);
_g.put("swtContext", swtContext);

//事件监听列表
def dataObject = world.getThing("xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject");
def listeners = dataObject.doAction("query", actionContext);
_g.put("listeners", listeners);
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=setSwtContext
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setSwtContext/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setSwtContext/@ins/@swtContext
                        sname=swtContext
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=swtContext
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@selectEvent
                    sname=selectEvent
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
//判断有没有选择控件和事件
def eventName = null;
def selections = null;
if(event.widget == implementedList){
    selections = implementedList.getSelection();
}else if(event.widget == eventList){
    selections = eventList.getSelection();
}
if(selections != null && selections.length > 0){
    eventName = selections[0];
}
if(eventName == null){
    editStackLayout.topControl = infoComposite;
    editComposite.layout();
    return;
}

//随时保存
actions.doAction("save", actionContext);

//获取事件事物
def eventThing = actions.doAction("getEventThing", actionContext, "eventName", eventName);

if(eventThing == null){
    //没有设置事件，或事件没有动作
    def values = ["name":eventName];
    newEventForm.doAction("setPartialValues", actionContext, "values", values);
    
    editStackLayout.topControl = newEventComposite;
    editComposite.layout();
}else{
    //编辑事件
    actions.doAction("editEvent", actionContext, "eventThing", eventThing);
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=selectEvent
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getEventThing
                    sname=getEventThing
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.design.Designer;

def control = currentControl;
def thing = world.getThing(control.getData(Designer.DATA_THING));

for(listeners in thing.getChilds("listeners")){
    for(listener in listeners.getChilds()){
        def type = listener.getString("type");
        //println type + " = " + eventName;
        if("on" + type == eventName){
            return listener;
        }
    }
}

for(event in thing.getChilds("Event")){
    if(eventName == event.getString("name")){
        return event;
    }
}

return null;
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=getEventThing
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getEventThing/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getEventThing/@ins/@eventName
                        sname=eventName
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventName
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@getControlThing
                    sname=getControlThing
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
//判断有没有选择控件和事件
if(controlList.getSelection() == null || ontrolList.getSelection().length == 0){
    return null;
}

//获取事物
def controlName = controlList.getSelection()[0];
def control = swtContext.get(controlName);
return world.getThing(control.getData(Designer.DATA_THING));
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=getControlThing
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@editEvent
                    sname=editEvent
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
if(eventThing.getChilds().size() == 1 && "GroovyAction" == eventThing.getChilds().get(0).getThingName()){
    //Groovy用代码编辑
    def code = eventThing.getChilds().get(0).getString("code");
    if(code != null){
        codeEditor.setText(code);        
    }else{
        codeEditor.setText("");
    }
    
    editStackLayout.topControl = codeComposite;
    editComposite.layout();
}else{
    //其它用事物编辑器编辑
    thingEditor.editorActions.doAction("setThing", ["thing": eventThing]);
    editStackLayout.topControl = thingEditorComposite;
    editComposite.layout();
}

//保存到全局变量上下文
_g.put("eventActionThing", eventThing);
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editEvent
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@editEvent/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@editEvent/@ins/@eventThing
                        sname=eventThing
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=eventThing
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                    sname=save
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
if(actionContext.get("eventActionThing") == null){
    return;
}

if(editStackLayout.topControl == codeComposite){
    //保存Groovy代码
    eventActionThing.getChilds().get(0).put("code", codeEditor.getText());
    eventActionThing.save();    
}else if(editStackLayout.topControl == thingEditorComposite){
    //保存事物模型
    thingEditor.editorActions.doAction("save");
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=save
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@remove
                    sname=remove
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.util.SwtUtils;
import xworker.swt.events.SwtListener;
import org.xmeta.util.UtilString;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

if(actionContext.get("eventActionThing") == null){
    return;
}

//提示框
def box = new MessageBox(editComposite.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
box.setText(UtilString.getString("lang:d=移除事件&en=Remove Event", actionContext));
box.setMessage(UtilString.getString("lang:d=确定要移除事件吗？会同时移除事件的模型和控件中的相应监听器！" + 
    "&en=Are you sure you want to remove the event? The model and the corresponding listeners in the control will also be removed at the same time!",
    actionContext));
if(box.open() != SWT.OK){
    return;
}

//事件事物
def eventThing = eventActionThing;
//def controlName = controlList.getSelection()[0];
def control = parentContext.control;//swtContext.get(controlName);

//事件类型
def type = 0;
if(eventThing.getThingName() == "Event"){
    def name = eventThing.getMetadata().getName();
    type = SwtUtils.getSWT(name.substring(2, name.length()));
}else{
    def t = eventThing.getStringBlankAsNull("type");
    if(t == null){
        t = "Selection";
    }
    type = SwtUtils.getSWT(t);
}

def listeners = control.getListeners(type);
if(listeners != null){
    for(lis in listeners){
        if(lis instanceof SwtListener && lis.getThing() == eventThing){
            control.removeListener(type, lis);
            break;
        }
    }
}

//保存事物
def parent = eventThing.getParent();
parent.removeChild(eventThing);
parent.save();

implementedList.remove(implementedList.getSelectionIndex());
actionContext.put("eventActionThing", null);
//回到创建界面
actions.doAction("selectEvent");
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=remove
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setControl
                    sname=setControl
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
//保存控件到全局变量上下文
actionContext.g().put("currentControl", control);

//显示已经有的事件列表
implementedList.removeAll();
eventList.removeAll();

def dataObject = world.getThing("xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@sashForm/@eventSashForm/@eventComposite/@eventList/@DataStore/@dataObjects/@AttributeValueDataObject");
def listeners = dataObject.doAction("query", actionContext);

for(listener in listeners){
    def eventName = listener.getString("value");
    if(actions.doAction("getEventThing", actionContext, "eventName", eventName) != null){
        implementedList.add(eventName);
    }else{
        eventList.add(eventName);
    }
}

editStackLayout.topControl = infoComposite;
editComposite.layout();

stackLayout.topControl = eventMainComposite;
mainComposite.layout();
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=setControl
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setControl/@ins
                      sisValidate=false
                      sname=ins
                      sdescriptors=xworker.lang.actions.Inout/@ins
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ins
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@setControl/@ins/@control
                        sname=control
                        stypeCheck=false
                        soptional=true
                        scheck=false
                        scheckLevel=exception
                        sdescriptors=xworker.lang.actions.Inout/@ins/@param
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=control
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@handleNewControl
                    sname=handleNewControl
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

if(mainComposite.isDisposed()){
    return false;
}

if(newControl == parentContext.control){
    return true;
}else{    
    DesignToolDialog.setNewControl(parentContext, newControl);
    //初始化事件监听列表
    actions.doAction("setSwtContext", actionContext, "swtContext", parentContext.controlContext);

    //正在编辑的控件
    actions.doAction("setControl", actionContext, "control", newControl);
    return true;    
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=handleNewControl
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@handleNewControl/@ActionDefined
                      sname=ActionDefined
                      sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ActionDefined
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
                        sname=nosaveTip
                        sshell=ognl:mainComposite.getShell()
                        sicon=ICON_WARNING
                        sbuttons=YES | NO | CANCEL
                        stitle=lang:d=保存模型&en=Save Model
                        smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=nosaveTip
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@menuOperation
                    sname=menuOperation
                    sisSynchronized=false
                    sthrowException=true
                    suseOtherAction=false
                    svarScope=Local
                    sdisableGlobalContext=false
                    Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
if(event.widget == actionContext.get("designMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                    sinterpretationType=Action
                    screateLocalVarScope=false
                    ssaveReturn=false
                    sdebugLog=false
                    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=menuOperation
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@menuOperation/@ActionDefined
                      sname=ActionDefined
                      sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=ActionDefined
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                        sname=confirm
                        sshell=ognl:mainComposite.getShell()
                        sicon=ICON_QUESTION
                        sbuttons=YES | NO | CANCEL
                        stitle=lang:d=模型已修改&en=Model Has Changed
                        smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=confirm
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@onDispose
                  sname=onDispose
                  sref=xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@mainComposite/@actions/@save
                  sdescriptors=xworker.swt.widgets.Widget/@Event
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=onDispose
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@stackLayout
                sname=stackLayout
                stopControl=eventMainComposite
                sdescriptors=xworker.swt.Layouts/@StackLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=stackLayout
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@eventItem/@event/@mainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);

//初始化事件监听列表
actions.doAction("setSwtContext", actionContext, "swtContext", parentContext.controlContext);

//正在编辑的控件
actions.doAction("setControl", actionContext, "control", parentContext.control);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem
          sname=menuItem
          stext=lang:d=菜单&en=Menu
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=menuItem
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext
            sname=menuContext
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=menuContext
              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite
              sname=topMainComposite
              sBORDER=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=topMainComposite
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@topMainCompositeGridLayout
                sname=topMainCompositeGridLayout
                smakeColumnsEqualWidth=false
                smarginWidth=5
                smarginHeight=5
                smarginLeft=0
                smarginTop=0
                smarginRight=0
                smarginBottom=0
                shorizontalSpacing=5
                sverticalSpacing=5
                sdescriptors=xworker.swt.Layouts/@GridLayout
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=topMainCompositeGridLayout
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite
                sname=mainComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite,xworker.swt.xworker.ThingRegistThing/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=mainComposite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources
                  sname=resources
                  sdescriptors=xworker.swt.Widgets/@Resource
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=resources
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource
                    sname=I18nResource
                    sdescriptors=xworker.swt.util.Resource/@I18nResource
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=I18nResource
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource/@okButton
                      sname=okButton
                      slabel=确定
                      sen_label=Ok
                      sdescriptors=xworker.lang.util.I18nResource/@resource
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=okButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource/@saveButton
                      sname=saveButton
                      slabel=保存
                      sen_label=Save
                      sdescriptors=xworker.lang.util.I18nResource/@resource
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=saveButton
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@resources/@I18nResource/@removeButton
                      sname=removeButton
                      slabel=删除
                      sen_label=Delete
                      sdescriptors=xworker.lang.util.I18nResource/@resource
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=removeButton
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite
                  sname=selectDescriptorComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=selectMenuDescriptorCompsoite
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@GridLayout
                    sname=GridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=GridLayout
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@createMenuLabel
                    sname=createMenuLabel
                    sBORDER=false
                    stype=HORIZONTAL
                    salignment=LEFT
                    stext=lang:d=创建菜单，请选择一个模型。&en=Create new menu, please select a descriptor.
                    scapture=false
                    senabled=true
                    sfont="|10|1|#000000"
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Label
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=createMenuLabel
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@createMenuLabel/@GridData
                      sname=GridData
                      sstyle=FILL_HORIZONTAL
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=GridData
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist
                    sname=thingRegist
                    sthing=xworker.swt.Menus
                    sregistType=child
                    sparent=false
                    ssearchByKeywords=true
                    sshowContent=true
                    scontentDisplayType=Composite
                    sforceUseDefaultOpenMethod=false
                    sshowDescBrowser=false
                    sdescBrowserRight=false
                    sautoLoad=true
                    scache=true
                    scheck=false
                    sdescritporForNewThing=xworker.lang.MetaDescriptor3
                    sdescritporChilds=false
                    ssashFormWeights=40,60
                    sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingRegist
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist/@thingRegistGridData
                      sname=thingRegistGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingRegistGridData
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist/@actions
                      sname=actions
                      sdescriptors=xworker.swt.xworker.ThingRegistSelector/@actions1
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@selectMenuDescriptorCompsoite/@thingRegist/@actions/@selected
                        sname=selected
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
if(actionContext.get("selectButton") == null){
    return;
}
if(thing == null){
    selectButton.setEnabled(false);
}else{
    selectButton.setEnabled(true);
}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selected
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite
                  sname=editorComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=editorComposite
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite/@editorCompositeGridLayout
                    sname=editorCompositeGridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=editorCompositeGridLayout
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite/@thingEditor
                    sname=thingEditor
                    stitle=true
                    suseRootThing=false
                    ssaveActionContainer=false
                    sdescriptors=xworker.swt.Widgets/@ThingEditor
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=thingEditor
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@editorComposite/@thingEditor/@thingEditorGridData
                      sname=thingEditorGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.Commons/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=thingEditorGridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@nosupportLabel
                  sname=nosupportLabel
                  sBORDER=false
                  sstyle=WRAP
                  stype=HORIZONTAL
                  salignment=LEFT
                  stext=lang:d=不能编辑菜单模型，控件已设置菜单，但菜单没有绑定模型。&en=Can not edit menu model, control has a menu, but can not find model of the menu.
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Label
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=nosupportLabel
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@stackLayout
                  sname=stackLayout
                  stopControl=editorComposite
                  sdescriptors=xworker.swt.Layouts/@StackLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=stackLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@mainComposite/@mainCompositeGridData
                  sname=mainCompositeGridData
                  sstyle=FILL_BOTH
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=BEGINNING
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=mainCompositeGridData
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite
                sname=buttonComposite
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                svisible=true
                sdescriptors=xworker.swt.Widgets/@Composite
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=buttonComposite
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@GridData
                  sname=GridData
                  sstyle=FILL_HORIZONTAL
                  shorizontalIndent=0
                  swidth=-1
                  sheight=-1
                  shorizontalAlignment=END
                  sverticalAlignment=CENTER
                  shorizontalSpan=1
                  sverticalSpan=1
                  sgrabExcessHorizontalSpace=false
                  sgrabExcessVerticalSpace=false
                  sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GridData
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@RowLayout
                  sname=RowLayout
                  sfill=false
                  sjustify=false
                  smarginWidth=0
                  smarginHeight=0
                  smarginLeft=3
                  smarginTop=3
                  smarginRight=3
                  smarginBottom=3
                  spack=true
                  sspacing=3
                  stype=SWT.HORIZONTAL
                  swrap=true
                  sdescriptors=xworker.swt.Layouts/@RowLayout
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=RowLayout
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405
                  sname=saveButton
                  stext=lang:d=保存&en=Save
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=2405
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2406
                    sname=RowData
                    sexclude=false
                    swidth=80
                    sheight=-1
                    sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2406
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2407
                    sname=Listeners
                    sdescriptors=xworker.swt.widgets.Widget/@Listeners
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2407
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2407/@2408
                      sname=saveButtonSelection
                      stype=Selection
                      sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=2408
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2405/@2407/@2408/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.InjectableComposite;
import org.eclipse.swt.widgets.Decorations;

def ac = parentContext.controlContext;
def control = parentContext.control;

//获取编辑的菜单
thingEditor.editorActions.doAction("save");

//销毁原来的菜单
if(actionContext.get("oldMenu") != null){
    if(oldMenu.isDisposed() == false){
        oldMenu.dispose();        
    }
    if(control instanceof Decorations){
        control.setMenuBar(null);
    }else{
        control.setMenu(null);
    }
}

//设置菜单，重新创建菜单
ac.peek().put("parent", control);
actionContext.g().put("oldMenu",  menuThing.doAction("create", ac));
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409
                  sname=removeButton
                  stext=lang:d=删除&en=Remove
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=2409
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2410
                    sname=RowData
                    sexclude=false
                    swidth=80
                    sheight=-1
                    sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2410
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411
                    sname=Listeners
                    sdescriptors=xworker.swt.widgets.Widget/@Listeners
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=2411
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412
                      sname=removeButtonSelection
                      stype=Selection
                      sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=2412
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412/@confirm
                        sname=confirm
                        sshell=ognl:removeButton.getShell()
                        sicon=ICON_QUESTION
                        sbuttons=OK | CANCEL
                        stitle=lang:d=删除菜单&en=Remove Menu
                        smessage=lang:d=确实要删除菜单吗？&en=Are you sure to remove the menu?
                        sinterpretationType=Self
                        sattributeTemplate=false
                        schildsAttributeTemplate=false
                        svarScope=Local
                        sisSynchronized=false
                        sthrowException=true
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdisableGlobalContext=false
                        sdebugLog=false
                        sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=confirm
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412/@confirm/@actions
                          sname=actions
                          sdescriptors=xworker.lang.actions.SelfAction/@actions1
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=actions
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@2409/@2411/@2412/@confirm/@actions/@ok
                            sname=ok
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import org.eclipse.swt.widgets.Decorations;

if(actionContext.get("oldMenu") != null){
    if(oldMenu.isDisposed() == false){
        oldMenu.dispose();
    }
}
def control = parentContext.control;
if(control instanceof Decorations){
    control.setMenuBar(null);
}else{
    control.setMenu(null);
}

def thing = parentContext.controlThing;
thing.removeChild(menuThing);
thing.save();

actionContext.g().put("menuThing", null);
def action = world.getAction("xworker.swt.design.DesignToolBase/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@init");
action.run(actionContext);
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=ok
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033
                  sname=selectButton
                  stext=lang:d=选择&en=Select
                  stype=SWT.PUSH
                  sflat=false
                  sborder=false
                  sselected=false
                  scapture=false
                  senabled=false
                  sredraw=true
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Button
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=1033
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1034
                    sname=RowData
                    sexclude=false
                    swidth=80
                    sheight=-1
                    sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=1034
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1035
                    sname=Listeners
                    sdescriptors=xworker.swt.widgets.Widget/@Listeners
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=1035
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1035/@1036
                      sname=selectButtonSelection
                      stype=Selection
                      sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=1036
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@buttonComposite/@1033/@1035/@1036/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import org.xmeta.Thing;

//获取描述者
def desc = thingRegist.doAction("getThing", actionContext);
def thing = new Thing(desc.getMetadata().getPath());

//设置新的事物进入编辑
thingEditor.editorActions.doAction("setThing", actionContext, "thing", thing);
stackLayout.topControl = editorComposite;
mainComposite.layout();

parentContext.controlThing.addChild(thing);
parentContext.controlThing.save();

actionContext.g().put("menuThing", thing);

saveButton.setVisible(true);
removeButton.setVisible(true);
selectButton.setVisible(false);
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GroovyAction
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@menuOperation
                  sname=menuOperation
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
if(event.widget == actionContext.get("designMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@insert");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("moveMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@move");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("eventMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@event");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("layoutMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@layout");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("menuMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@menu");
    thing.doAction("run", actionContext, "contentToContent", true);
}else if(event.widget == actionContext.get("modelMenuItem")){
    def thing = world.getThing("xworker.swt.design.DesignToolBase/@editMdoel");
    thing.doAction("run", actionContext, "contentToContent", true);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=menuOperation
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@menuOperation/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@menuOperation/@ActionDefined/@confirm
                      sname=confirm
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_QUESTION
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=模型已修改&en=Model Has Changed
                      smessage=lang:d=模型已修改，要保存并应用模型吗?&en=Model has changed, do you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=confirm
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;
import xworker.swt.design.Designer;

if(newControl == parentContext.control){
    return true;
}else{
    if(stackLayout.topControl == editorComposite){
        //自动保存
        saveButtonSelection.handleEvent(null);
    }
    DesignToolDialog.setNewControl(parentContext, newControl);
    
    actions.doAction("doInit");
    return true;
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined
                    sname=ActionDefined
                    sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=ActionDefined
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@handleNewControl/@ActionDefined/@nosaveTip
                      sname=nosaveTip
                      sshell=ognl:mainComposite.getShell()
                      sicon=ICON_WARNING
                      sbuttons=YES | NO | CANCEL
                      stitle=lang:d=保存模型&en=Save Model
                      smessage=lang:d=模型还未保存，要保存并应用模型吗？&en=Model has not saved, are you want to save and apply the model?
                      sinterpretationType=Self
                      sattributeTemplate=false
                      schildsAttributeTemplate=false
                      svarScope=Local
                      sisSynchronized=false
                      sthrowException=true
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdisableGlobalContext=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=nosaveTip
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@actions/@doInit
                  sname=doInit
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
import org.eclipse.swt.widgets.Decorations;
import org.eclipse.swt.widgets.Control;
import xworker.swt.design.Designer;

def menu = null;
def control = parentContext.control;
def m = null;
if(control instanceof Decorations){
    m = control.getMenuBar();    
}else{
    m = control.getMenu();
}
if(m != null && m.isDisposed() == false){
    menu = Designer.getThing(m);
    if(menu == null){        
        stackLayout.topControl = nosupportLabel;
        mainComposite.layout();
        
        saveButton.setVisible(false);
        removeButton.setVisible(false);
        selectButton.setVisible(false);
        return;
    }
    
    actionContext.g().put("oldMenu", m);
}


//获取事物
if(menu == null){
    stackLayout.topControl = selectDescriptorComposite;
    mainComposite.layout();
    
    saveButton.setVisible(false);
    removeButton.setVisible(false);
    selectButton.setVisible(true);
}else{
    thingEditor.editorActions.doAction("setThing", ["thing":menu]);
    stackLayout.topControl = editorComposite;
    mainComposite.layout();
    
    actionContext.g().put("menuThing", menu);
    
    saveButton.setVisible(true);
    removeButton.setVisible(true);
    selectButton.setVisible(false);
}
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=doInit
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@menuItem/@menuContext/@topMainComposite/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", pContext);


//初始化菜单
actions.doAction("doInit");
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem
          sname=actionItem
          stext=lang:d=动作&en=Action
          sCLOSE=false
          sdelayReload=true
          sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=actionItem
            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx
            sname=actionCtx
            sdescriptors=xworker.swt.Widgets/@InsulateWidget
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=actionCtx
              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder
              sname=mainTabFolder
              sstyle=BOTTOM
              sBORDER=false
              sFLAT=false
              sCLOSE=false
              sSINGLE=false
              sMRUVisible=false
              ssimple=false
              sdisposeControlOnItemClosed=false
              sH_SCROLL=false
              sV_SCROLL=false
              sNO_BACKGROUND=false
              sNO_FOCUS=false
              sNO_MERGE_PAINTS=false
              sNO_REDRAW_RESIZE=false
              sNO_RADIO_GROUP=false
              sEMBEDDED=false
              sDOUBLE_BUFFERED=false
              scapture=false
              senabled=true
              sredraw=true
              svisible=true
              sdescriptors=xworker.swt.Widgets/@CTabFolder
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=mainTabFolder
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@onSelection
                sname=onSelection
                sdescriptors=xworker.swt.widgets.Widget/@Event
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=onSelection
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@onSelection/@GroovyAction
                  sname=GroovyAction
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
def item = event.item;

//选择合适的组件
def ac = null;
if(item == actionContainerItem){
    ac = actionContainerContext;
}else if(item == initItem){
    ac = initContext;
}else if(item == actionContextItem){
    ac = actionContextContext;
}

if(ac != null){
    return ac.actions.doAction("handleNewControl", actionContext, 
          "newControl", parentContext.control, "force" , true);
}
return false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=GroovyAction
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem
                sname=actionContainerItem
                stext=lang:d=动作容器&en=ActionContainer
                sCLOSE=false
                sdelayReload=false
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actionContainerItem
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext
                  sname=actionContainerContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=actionContainerContext
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite1
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@editorComposite
                        sname=editorComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=editorComposite
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@editorComposite/@editorCompositeFillLayout
                          sname=editorCompositeFillLayout
                          stype=SWT.HORIZONTAL
                          sdescriptors=xworker.swt.Layouts/@FillLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=editorCompositeFillLayout
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@editorComposite/@13564
                          sname=thingEditor
                          stitle=true
                          suseRootThing=false
                          ssaveActionContainer=true
                          svariablesActionContext=ognl:parentContext.controlContext
                          sdescriptors=xworker.swt.xworker.ThingEditor
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=13564
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite
                        sname=actionsComposite
                        sBORDER=false
                        sH_SCROLL=false
                        sV_SCROLL=false
                        sNO_BACKGROUND=false
                        sNO_FOCUS=false
                        sNO_MERGE_PAINTS=false
                        sNO_REDRAW_RESIZE=false
                        sNO_RADIO_GROUP=false
                        sEMBEDDED=false
                        sDOUBLE_BUFFERED=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.Widgets/@Composite
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actionsComposite
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@shellGridLayout
                          sname=shellGridLayout
                          smakeColumnsEqualWidth=false
                          smarginWidth=5
                          smarginHeight=5
                          smarginLeft=0
                          smarginTop=0
                          smarginRight=0
                          smarginBottom=0
                          shorizontalSpacing=5
                          sverticalSpacing=5
                          sdescriptors=xworker.swt.Layouts/@GridLayout
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=shellGridLayout
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list
                          sname=list
                          sstyle=SINGLE
                          sH_SCROLL=true
                          sV_SCROLL=true
                          sBORDER=false
                          scapture=false
                          senabled=true
                          sredraw=true
                          svisible=true
                          sdescriptors=xworker.swt.Widgets/@List
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=list
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@22553
                            sname=GridData
                            sstyle=FILL_BOTH
                            shorizontalIndent=0
                            swidth=-1
                            sheight=-1
                            shorizontalAlignment=BEGINNING
                            sverticalAlignment=CENTER
                            shorizontalSpan=1
                            sverticalSpan=1
                            sgrabExcessHorizontalSpace=false
                            sgrabExcessVerticalSpace=false
                            sdescriptors=xworker.swt.layout.GridData
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=22553
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@onSelection
                            sname=onSelection
                            sdescriptors=xworker.swt.widgets.Widget/@Event
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=onSelection
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@onSelection/@23852
                              sname=Enabled
                              smethod=enable
                              scontrolList=okButton
                              sinterpretationType=Self
                              sattributeTemplate=false
                              schildsAttributeTemplate=false
                              svarScope=Local
                              sisSynchronized=false
                              sthrowException=true
                              screateLocalVarScope=false
                              ssaveReturn=false
                              sdisableGlobalContext=false
                              sdebugLog=false
                              sdescriptors=xworker.swt.actions.ControlActions/@Enabled
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=23852
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@actionsComposite/@list/@onDefaultSelection
                            sname=onDefaultSelection
                            sref=xworker.swt.design.DesignToolBase/@design/@Composite/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sdescriptors=xworker.swt.widgets.Widget/@Event
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=onDefaultSelection
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@stackLayout
                        sname=stackLayout
                        stopControl=actionsComposite
                        sdescriptors=xworker.swt.Layouts/@StackLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=stackLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton
                        sname=okButton
                        stext=lang:d=选择(&amp;S)&en=Select(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=false
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import org.xmeta.util.UtilString;
import org.xmeta.util.ActionContainer;

if(stackLayout.topControl == actionsComposite){
    //选择动作容器的界面
    def act = parentContext.controlContext.get(list.getSelection()[0]);
    if(act != null && act instanceof ActionContainer){
        def actionContainer = act.getThing();
        //保存原来
        thingEditor.doAction("save");
        
        //设置新事物
        thingEditor.doAction("setThing", actionContext, "thing", actionContainer);
        
        _g.put("actionContainer", actionContainer);
        
        def text = UtilString.getString("lang:d=保存(&amp;S)&en=Save(&amp;S)", actionContext);
        okButton.setText(text);
        stackLayout.topControl = editorComposite;
        mainComposite.layout();
    }
}else{
    //保存
    thingEditor.doAction("save");

    //重新创建
    actionContainer.doAction("create", parentContext.controlContext);
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton
                        sname=createButton
                        stext=lang:d=创建动作容器&en=Create New ActionContainer
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=createButton
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;
import org.xmeta.util.UtilString;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);
def actionContainer = thing.getThing("ActionContainer@0");
if(actionContainer == null){
    def name = prompt(actionContext);
    if(name == null || "" == name){
        name = "actions";
    }
    actionContainer = new Thing("xworker.swt.Widgets/@actions");
    actionContainer.put("name", name);
    thing.addChild(actionContainer);
    thing.save();
    
    actionContainer.doAction("create", parentContext.controlContext);
}
thingEditor.doAction("setThing", actionContext, "thing",  actionContainer);   
_g.put("actionContainer", actionContainer);
createButton.setEnabled(false);

def text = UtilString.getString("lang:d=保存(&amp;S)&en=Save(&amp;S)", actionContext);
okButton.setText(text);
stackLayout.topControl = editorComposite;
mainComposite.layout();
        
def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@createButton/@onSelection/@GroovyAction/@ActionDefined/@prompt
                                sname=prompt
                                stitle=lang:d=创建动作容器&en=Create ActionContainer
                                smessage=lang:d=请输入新的动作容器的名称。&en=Please input the name of new ActionContainer.
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@Prompt
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=prompt
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@selectOtherActionContainerButton
                        sname=selectOtherActionContainerButton
                        stext=lang:d=选择其它动作容器&en=Select Other ActionContainer
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;
import org.xmeta.util.ActionContainer;
import org.xmeta.util.UtilString;

//列出已有的动作容器
list.removeAll();
for(key in parentContext.controlContext.keySet()){
    def obj = parentContext.controlContext.get(key);    
    if(obj != null && obj instanceof ActionContainer){
        list.add(key);
    }
}

def text = UtilString.getString("lang:d=选择(&amp;S)&en=Select(&amp;S)", actionContext);
okButton.setText(text);
okButton.setEnabled(false);

stackLayout.topControl = actionsComposite;
mainComposite.layout();
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);

return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContainerItem/@actionContainerContext/@topMainComposite1/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;
import org.xmeta.util.ActionContainer;

list.removeAll();

//列出已有的动作容器
for(key in parentContext.controlContext.keySet()){
    def obj = parentContext.controlContext.get(key);    
    if(obj != null && obj instanceof ActionContainer){
        list.add(key);
    }
}

//判断是否有根动作容器
def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);
def actionContainer = thing.getThing("ActionContainer@0");
if(actionContainer != null){
    createButton.setEnabled(false);
}else{
    createButton.setEnabled(true);
}
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem
                sname=initItem
                stext=lang:d=初始化动作&en=InitAction
                sCLOSE=false
                sdelayReload=true
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=initItem
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext
                  sname=initContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=initContext
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite
                      sname=mainComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=mainComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite/@13257
                        sname=FillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.layout.FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13257
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite/@13564
                        sname=thingEditor
                        stitle=true
                        suseRootThing=false
                        ssaveActionContainer=true
                        svariablesActionContext=ognl:parentContext.controlContext
                        sdescriptors=xworker.swt.xworker.ThingEditor
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=13564
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@mainComposite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite
                      sname=buttonComposite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=buttonComposite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@GridData
                        sname=GridData
                        sstyle=FILL_HORIZONTAL
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=END
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@RowLayout
                        sname=RowLayout
                        sfill=false
                        sjustify=false
                        smarginWidth=0
                        smarginHeight=0
                        smarginLeft=3
                        smarginTop=3
                        smarginRight=3
                        smarginBottom=3
                        spack=true
                        sspacing=3
                        stype=SWT.HORIZONTAL
                        swrap=true
                        sdescriptors=xworker.swt.Layouts/@RowLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=RowLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@saveButton
                        sname=saveButton
                        stext=lang:d=保存(&amp;S)&en=Save(&amp;S)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=saveButton
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@saveButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
//保存
thingEditor.doAction("save");
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton
                        sname=executeButton
                        stext=lang:d=执行(&amp;E)&en=Execute(&amp;E)
                        stype=SWT.PUSH
                        sflat=false
                        sborder=false
                        sselected=false
                        scapture=false
                        senabled=true
                        sredraw=true
                        svisible=true
                        sdescriptors=xworker.swt.design.DesignTool/@Composite/@Buttons/@Button
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=selectOtherActionContainerButton
                          @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection
                          sname=onSelection
                          sdescriptors=xworker.swt.widgets.Widget/@Event
                          sinheritDescription=false
                          sth_createIndex=false
                          sth_registMyChilds=false
                          sth_registDisabled=false
                          sth_mark=false
                          sid=onSelection
                            @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction
                            sname=GroovyAction
                            sisSynchronized=false
                            sthrowException=true
                            suseOtherAction=false
                            svarScope=Local
                            sdisableGlobalContext=false
                            Scode=
#$@text#$@
if("OK" == confirm(actionContext)){
    thingEditor.doAction("save");

    initAction.doAction("create", parentContext.controlContext);
}
#$@text#$@
                            sinterpretationType=Action
                            screateLocalVarScope=false
                            ssaveReturn=false
                            sdebugLog=false
                            sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                            sinheritDescription=false
                            sth_createIndex=false
                            sth_registMyChilds=false
                            sth_registDisabled=false
                            sth_mark=false
                            sid=GroovyAction
                              @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined
                              sname=ActionDefined
                              sdescriptors=xworker.lang.actions.Inout/@ActionDefined
                              sinheritDescription=false
                              sth_createIndex=false
                              sth_registMyChilds=false
                              sth_registDisabled=false
                              sth_mark=false
                              sid=ActionDefined
                                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@buttonComposite/@selectOtherActionContainerButton/@onSelection/@GroovyAction/@ActionDefined/@confirm
                                sname=confirm
                                sshell=ognl:executeButton.getShell()
                                sicon=ICON_QUESTION
                                sbuttons=OK | CANCEL
                                stitle=lang:d=执行&en=Execute
                                smessage=lang:d=初始化动作一般在创建界面时只执行一次，确认要执行吗？&en=nitialization actions are usually performed only once at the time they create the interface. Do you want to execute?
                                sinterpretationType=Self
                                sattributeTemplate=false
                                schildsAttributeTemplate=false
                                svarScope=Local
                                sisSynchronized=false
                                sthrowException=true
                                screateLocalVarScope=false
                                ssaveReturn=false
                                sdisableGlobalContext=false
                                sdebugLog=false
                                sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
                                sinheritDescription=false
                                sth_createIndex=false
                                sth_registMyChilds=false
                                sth_registDisabled=false
                                sth_mark=false
                                sid=confirm
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import org.xmeta.Thing;

def rootControl = getRootControl(parentContext.control, parentContext.controlThing.getRoot());
def thing = Designer.getThing(rootControl);

//由于RunAction可以存在多个，所以只管理设计器自己生成的那个
def initAction = null;
def sytemAuthor = "__designer_auto_manager__";
for(ia in thing.getChilds("RunAction")){
    if(ia.get("th_author") == sytemAuthor){
        initAction = ia;
        break;
    }
}
if(initAction == null){
    initAction = new Thing("xworker.swt.xworker.RunAction");
    initAction.put("th_author", sytemAuthor);
    //actionContainer.put("name", "actions");
    thing.addChild(initAction);
    thing.save();
}else{
    //初始化应该总是最后一个子节点
    def childs = thing.getChilds();
    if(childs.indexOf(initAction) < childs.size() - 1){
         thing.removeChild(initAction);
         thing.addChild(initAction, childs.size());
                  
         thing.save();
         initAction.getMetadata().setRemoved(false);
    }
}

thingEditor.doAction("setThing", actionContext, "thing",  initAction);   
thingEditor.doAction("setVariablesActionContext", actionContext, "variablesActionContext", parentContext.controlContext);
_g.put("initAction", initAction);

def getRootControl(control, rootThing){
		def parent = control.getParent();
		if(parent  != null){// && !(control instanceof Shell)){
			String thingPath = (String) parent.getData(Designer.DATA_THING);
			Thing thing = world.getThing(thingPath);
			if(thing != null && thing.getRoot() == rootThing){
				return getRootControl(parent, rootThing);
			}
		}
		
		return control;		
	}
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@initItem/@initContext/@topMainComposite/@init
                      sname=init
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
def parentContext = actionContext.get("parentContext").pContext;
actionContext.g().put("parentContext", parentContext);

//初始化菜单
actions.doAction("doInit");
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.widgets.Widget/@Code
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=init
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem
                sname=actionContextItem
                stext=lang:d=变量上下文&en=ActionContext
                sCLOSE=false
                sdelayReload=true
                sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actionContextItem
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext
                  sname=actionContextContext
                  sdescriptors=xworker.swt.Widgets/@InsulateWidget
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=actionContextContext
                    @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite
                    sname=topMainComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_mark=false
                    sid=topMainComposite
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@topMainCompositeGridLayout
                      sname=topMainCompositeGridLayout
                      smakeColumnsEqualWidth=false
                      smarginWidth=5
                      smarginHeight=5
                      smarginLeft=0
                      smarginTop=0
                      smarginRight=0
                      smarginBottom=0
                      shorizontalSpacing=5
                      sverticalSpacing=5
                      sdescriptors=xworker.swt.Layouts/@GridLayout
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=topMainCompositeGridLayout
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite
                      sname=Composite
                      sBORDER=false
                      sH_SCROLL=false
                      sV_SCROLL=false
                      sNO_BACKGROUND=false
                      sNO_FOCUS=false
                      sNO_MERGE_PAINTS=false
                      sNO_REDRAW_RESIZE=false
                      sNO_RADIO_GROUP=false
                      sEMBEDDED=false
                      sDOUBLE_BUFFERED=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=Composite
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite/@compositeFillLayout
                        sname=compositeFillLayout
                        stype=SWT.HORIZONTAL
                        sdescriptors=xworker.swt.Layouts/@FillLayout
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=compositeFillLayout
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite/@actionContextViewer
                        sname=actionContextViewer
                        sshowStack=false
                        sdescriptors=xworker.swt.Widgets/@ActionContextViewer
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=actionContextViewer
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@Composite/@GridData
                        sname=GridData
                        sstyle=FILL_BOTH
                        shorizontalIndent=0
                        swidth=-1
                        sheight=-1
                        shorizontalAlignment=BEGINNING
                        sverticalAlignment=CENTER
                        shorizontalSpan=1
                        sverticalSpan=1
                        sgrabExcessHorizontalSpace=false
                        sgrabExcessVerticalSpace=false
                        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=GridData
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@actions
                      sname=actions
                      sdescriptors=xworker.swt.Widgets/@actions
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=actions
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@actions/@handleNewControl
                        sname=handleNewControl
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
import xworker.swt.design.DesignToolDialog;

DesignToolDialog.setNewControl(parentContext, newControl);

actions.doAction("doInit", actionContext);
return true;
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=handleNewControl
                        @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@actions/@doInit
                        sname=doInit
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        scode=actionContextViewer.doAction("setActionContext", actionContext, "ac", parentContext.controlContext);
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sswitchResult=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_mark=false
                        sid=doInit
                      @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actionContextItem/@actionContextContext/@topMainComposite/@init
                      sname=init
                      sisSynchronized=false
                      sthrowException=true
                      suseOtherAction=false
                      svarScope=Local
                      sdisableGlobalContext=false
                      Scode=
#$@text#$@
def parentContext = actionContext.get("parentContext").pContext;
actionContext.g().put("parentContext", parentContext);

//初始化菜单
actions.doAction("doInit");
#$@text#$@
                      sinterpretationType=Action
                      screateLocalVarScope=false
                      ssaveReturn=false
                      sdebugLog=false
                      sdescriptors=xworker.swt.widgets.Widget/@Code
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_mark=false
                      sid=init
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actions
                sname=actions
                sdescriptors=xworker.swt.Widgets/@actions
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=actions
                  @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@actions/@handleNewControl
                  sname=handleNewControl
                  sisSynchronized=false
                  sthrowException=true
                  suseOtherAction=false
                  svarScope=Local
                  sdisableGlobalContext=false
                  Scode=
#$@text#$@
def item = mainTabFolder.getSelection();

//设计界面已经关闭了
if(mainTabFolder.isDisposed()){
    return false;
}

//选择合适的组件
def ac = null;
if(item == actionContainerItem){
    ac = actionContainerContext;
}else if(item == initItem){
    ac = initContext;
}else if(item == actionContextItem){
    ac = actionContextContext;
}

if(ac != null){
    return ac.actions.doAction("handleNewControl", actionContext, 
           "newControl", newControl, "force", null);
}
return false;
#$@text#$@
                  sinterpretationType=Action
                  screateLocalVarScope=false
                  ssaveReturn=false
                  sdebugLog=false
                  sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_mark=false
                  sid=handleNewControl
                @/@Layout/@Composite/@mainSashForm/@mainTabFolder/@actionItem/@actionCtx/@mainTabFolder/@init
                sname=init
                sisSynchronized=false
                sthrowException=true
                suseOtherAction=false
                svarScope=Local
                sdisableGlobalContext=false
                Scode=
#$@text#$@
def pContext = actionContext.get("parentContext");
def parentContext = pContext.parentContext;
actionContext.g().put("parentContext", parentContext);
actionContext.g().put("pContext", parentContext);

actionContainerContext.put("parentContext", parentContext);
//println parentContext.control;
actionContainerContext.actions.doAction("handleNewControl", actionContext, 
           "newControl", parentContext.control, "force", null);
#$@text#$@
                sinterpretationType=Action
                screateLocalVarScope=false
                ssaveReturn=false
                sdebugLog=false
                sdescriptors=xworker.swt.widgets.Widget/@Code
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_mark=false
                sid=init
      @/@Layout/@Composite/@actions
      sname=actions
      sdescriptors=xworker.swt.Widgets/@actions
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actions
        @/@Layout/@Composite/@actions/@handleNewControl
        sname=handleNewControl
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        svarScope=Local
        sdisableGlobalContext=false
        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.design.DesignShellActions;
import xworker.swt.design.DesignTools;

//不支持XWorker属性编辑器中的控件
//if(isAttribute && rootControl == null){
//    return false;
//}

def item = mainTabFolder.getSelection();
//如果是复合控件，选择根节点
if((isAttribute && rootControl == null) || (rootControl != null && rootControl != newControl)){
    //Designer.setCurrentDesignControl(rootControl);
    onCompound(actionContext);
    actionContext.g().put("controlType", "compound");
}else{
    onControl(actionContext);
    actionContext.g().put("controlType", "control");
}

//设计界面已经关闭了
if(mainTabFolder.isDisposed()){
    return false;
}

//选择合适的组件
def ac = null;
if(item == designItem){
    ac = designContext;
}else if(item == moveItem){
    ac = moveContext;
}else if(item == modelItem){
    ac = modelContext;
}else if(item == eventItem){
    ac = eventContext;
}else if(item == menuItem){
    ac = menuContext;
}else if(item == actionItem){
    ac = actionCtx;
}



if(ac != null){
    def result = ac.actions.doAction("handleNewControl", actionContext, "newControl", newControl, "force", null);
    if(result){
        actionContext.peek().put("noTreeControlSelection", true);
        if(rootControl != null){
            DesignShellActions.designTreeInit(actionContext, controlTree, rootControl, true);
        }else{
            DesignShellActions.designTreeInit(actionContext, controlTree, newControl, true);
        }
    }

    return result;
}

return false;
#$@text#$@
        sinterpretationType=Action
        screateLocalVarScope=false
        ssaveReturn=false
        sswitchResult=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=handleNewControl
          @/@Layout/@Composite/@actions/@handleNewControl/@ActionDefined
          sname=ActionDefined
          sdescriptors=xworker.lang.actions.Inout/@ActionDefined
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=ActionDefined
            @/@Layout/@Composite/@actions/@handleNewControl/@ActionDefined/@onCompound
            sname=onCompound
            smethod=disable
            scontrolList=designToolBar,designItem,moveItem,eventItem,menuItem,actionItem,dataItem,modelItem
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.ControlActions/@Enabled
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=onCompound
            @/@Layout/@Composite/@actions/@handleNewControl/@ActionDefined/@onCompound1
            sname=onControl
            smethod=enable
            scontrolList=designToolBar,designItem,moveItem,eventItem,menuItem,actionItem,dataItem,modelItem
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            screateLocalVarScope=false
            ssaveReturn=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.swt.actions.ControlActions/@Enabled
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=onCompound1
        @/@Layout/@Composite/@actions/@itemSelected
        sname=itemSelected
        sunimplementedException=false
        sdescriptors=xworker.lang.actions.Actions/@NOOP
        sinterpretationType=Self
        sattributeTemplate=false
        schildsAttributeTemplate=false
        svarScope=Local
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        screateLocalVarScope=false
        ssaveReturn=false
        sswitchResult=false
        sdisableGlobalContext=false
        sdebugLog=false
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_noThingRegistViewer=false
        sth_fileMonitor=false
        sth_mark=false
        sth_registQueryOnlySelf=false
        snotXmlAttribute=false
        sjson_isArray=false
        sid=itemSelected
      @/@Layout/@Composite/@init
      sname=init
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import xworker.swt.design.DesignTools;
import xworker.swt.design.DesignShellActions;

//注册toolActions
parentContext.g().put("toolActions", actions);

DesignShellActions.designTreeInit(actionContext, controlTree, parentContext.control, true);

//设置被隔离的各上下文的变量
designContext.g().put("parentContext", parentContext);
designContext.actions.doAction("handleNewControl", actionContext, 
           "newControl", parentContext.control, "force", null,
           "rootControl", parentContext.rootControl,
           "isAttribute", parentContext.isAttribute,
           "rootCreator", parentContext.rootCreator,           
           "newControlThing", parentContext.controlThing,
           "creator", parentContext.creator,
           "creatorControl", parentContext.creatorControl);

//layout.g().put("parentContext", parentContext);
//event.g().put("parentContext", parentContext);



/*
def parentControl = parentContext.control.getParent();

if(parentControl instanceof TabFolder || parentControl instanceof CTabFolder
    || parentControl instanceof SashForm || parentControl instanceof ScrolledComposite){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
}

if(parentContext.controlThing.getThingName() == "InjectableComposite"){
    beforeButton.setEnabled(false);
    belowButton.setEnabled(false);
    insideButton.setEnabled(false);
}*/
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sswitchResult=false
      sdebugLog=false
      sdescriptors=xworker.swt.Widgets/@Code
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=init
  @/@ViewAllControls
  sname=ViewAllControls
  slabel=查看所有控件
  swidth=640
  sheight=480
  snoReturnButton=false
  svisible=true
  sgroup=-10000|设计
  sen_label=View all controls
  sen_group=-10000|Design
  sdescriptors=xworker.swt.design.DesignTool/@Composite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_noThingRegistViewer=false
  sth_fileMonitor=false
  sth_deprecated=false
  sth_mark=false
  sth_registQueryOnlySelf=false
  snotXmlAttribute=false
  sjson_isArray=false
  sid=ViewAllControls
    @/@ViewAllControls/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    spack=false
    svisible=true
    sdescriptors=xworker.swt.design.DesignTool/@Composite/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_noThingRegistViewer=false
    sth_fileMonitor=false
    sth_mark=false
    sth_registQueryOnlySelf=false
    snotXmlAttribute=false
    sjson_isArray=false
    sid=Composite
      @/@ViewAllControls/@Composite/@FillLayout
      sname=FillLayout
      stype=SWT.HORIZONTAL
      sdescriptors=xworker.swt.Layouts/@FillLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_noThingRegistViewer=false
      sth_fileMonitor=false
      sth_mark=false
      sth_registQueryOnlySelf=false
      snotXmlAttribute=false
      sjson_isArray=false
      sid=FillLayout
      @/@ViewAllControls/@Composite/@tree
      sname=tree
      sselectStyle=SINGLE
      sV_SCROLL=true
      sH_SCROLL=true
      sCHECK=false
      sFULL_SELECTION=false
      sHIDE_SELECTION=false
      sBORDER=false
      slineVisible=false
      smultipleColumns=false
      sheaderVisible=false
      ssortIndicator=false
      smoveableColumns=false
      sheadImages=false
      ssubImages=false
      scheckSelection=false
      scapture=false
      senabled=true
      sredraw=true
      spack=false
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Tree
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_noThingRegistViewer=false
      sth_fileMonitor=false
      sth_mark=false
      sth_registQueryOnlySelf=false
      snotXmlAttribute=false
      sjson_isArray=false
      sid=tree
        @/@ViewAllControls/@Composite/@tree/@Listeners
        sname=Listeners
        sdescriptors=xworker.swt.widgets.Widget/@Listeners
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_noThingRegistViewer=false
        sth_fileMonitor=false
        sth_mark=false
        sth_registQueryOnlySelf=false
        snotXmlAttribute=false
        sjson_isArray=false
        sid=Listeners
          @/@ViewAllControls/@Composite/@tree/@Listeners/@Listener
          sname=Listener
          stype=DefaultSelection
          sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_noThingRegistViewer=false
          sth_fileMonitor=false
          sth_mark=false
          sth_registQueryOnlySelf=false
          snotXmlAttribute=false
          sjson_isArray=false
          sid=Listener
            @/@ViewAllControls/@Composite/@tree/@Listeners/@Listener/@ideOpenThing
            sname=ideOpenThing
            sthing=ognl:event.item.getData()
            sinterpretationType=Self
            sattributeTemplate=false
            schildsAttributeTemplate=false
            svarScope=Local
            sisSynchronized=false
            sthrowException=true
            suseOtherAction=false
            screateLocalVarScope=false
            ssaveReturn=false
            sswitchResult=false
            sdisableGlobalContext=false
            sdebugLog=false
            sdescriptors=xworker.lang.actions.utils.XWorkerActions/@ideOpenThing
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_noThingRegistViewer=false
            sth_fileMonitor=false
            sth_mark=false
            sth_registQueryOnlySelf=false
            snotXmlAttribute=false
            sjson_isArray=false
            sid=ideOpenThing
      @/@ViewAllControls/@Composite/@actions
      sname=actions
      sdescriptors=xworker.swt.Widgets/@actions
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=actions
        @/@ViewAllControls/@Composite/@actions/@handleNewControl
        sname=handleNewControl
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        svarScope=Local
        sdisableGlobalContext=false
        Scode=
#$@text#$@
import xworker.swt.design.Designer;
import xworker.swt.util.XWorkerTreeUtil;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;
import org.eclipse.swt.widgets.Composite;

def shell = newControl.getShell();
initItem(shell, tree, actionContext);

return true;

def initItem(control, parentItem, actionContext){
    def thing = Designer.getThing(control);
    def item = null;
    if(thing != null){
        item = new TreeItem(parentItem, SWT.NONE);
        XWorkerTreeUtil.initItem(item, thing, actionContext);       
        item.setData(thing); 
    }
    
    if(control instanceof Composite){  
         for( childControl in control.getChildren()){
             initItem(childControl, item == null ? parentItem : item, actionContext);
         }
    }
    
    if(item != null){
        item.setExpanded(true);
    }
    
}
#$@text#$@
        sinterpretationType=Action
        screateLocalVarScope=false
        ssaveReturn=false
        sswitchResult=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=handleNewControl
      @/@ViewAllControls/@Composite/@init
      sname=init
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
parentContext.g().put("toolActions", actions);
actions.doAction("handleNewControl", actionContext, "newControl", parentContext.control);
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sswitchResult=false
      sdebugLog=false
      sdescriptors=xworker.swt.Widgets/@Code
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=init
