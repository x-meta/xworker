<?xml version="1.0" encoding="utf-8"?>

<QuickContent name="DataObjectSkills" descriptors="xworker.content.QuickContent" label="数据对象使用技巧"
     type="thingDesc" group="xworker.dataobject" icon="icons/html.png" th_sortWeight="-10000"
     simpleBrowser="true" hideOutline="true" th_createIndex="true" th_registThing="child|xworker.example.ExamplesIndex">
    <description><![CDATA[<h1>数据对象使用技巧</h1>

<h2>1.数据对象示例</h2>

<p>&nbsp;&nbsp;&nbsp; 数据对象的示例大多在界面那边，比如<a href="javascript:invoke('action:xworker.swt.xworker.prototype.ThingRegistSelector/@actions/@utilBrowserSelectThing?thing=xworker.swtshare.p2020.p07.p11.DataObjectIntroduce')">SWT</a>。</p>

<h2>2.自定义数据对象</h2>

<p>&nbsp;&nbsp;&nbsp; 一个数据对象并不需要实现全部的方法，可以根据应用场合实现相应的方法。比如在表单界面里可能就不需要数据对象的任何方法，在只读的表格里可能只需要数据对象实现doQuery()方法。</p>

<p>&nbsp;&nbsp;&nbsp; 因此如果现有的数据对象不能满足需要，可以随时重写相关方法，或使用AbstractDataObject编写自己的数据对象。</p>

<h2>3.使用事件监听处理数据</h2>

<p>&nbsp;&nbsp;&nbsp; 数据对象支持autoInit、afterCreated、onLoaded、beforeUpdate、afterUpdate、beforeDelete、afterDeleted、beforeQuery和afterQueryed等事件。要使用这些事件，首先编辑数据对象时打开相关属性，其次是实现相应名字的动作，当事件发生时，就会调用对应名字的动作。</p>

<p>&nbsp;&nbsp;&nbsp; 比如在插入数据之前需要修改数据对象，那么可以实现autoInit方法。比如在查询之后对查询结果做处理，那么可以实现afterQueryed方法。</p>

<h2>4.QueryFormDataObject和Condition</h2>

<p>&nbsp;&nbsp;&nbsp; 查询表单数据对象和查询条件。虽然是可选的，但建议设置。设置后一般就可以直接生成增删改查的界面，可以通过菜单直接编辑数据了。</p>

<h2>5.界面相关</h2>

<p>&nbsp;&nbsp;&nbsp; 以下对象一般都提供了绑定界面控件的方法，绑定后当对象的值发生变化后界面也可以及时发生变化。比如当数据对象列表增加了一条记录后，表格也会自动增加一行。当一个数据对象的值发生变化后，表单或表格中对应的行的值也会自动更新。</p>

<h3>5.1.DataStore（数据仓库）</h3>

<p>&nbsp;&nbsp;&nbsp; DataStore一般含有数据对象、查询条件的配置、查询条件的值、当前查询结果，当前分页信息等等。</p>

<p>&nbsp;&nbsp;&nbsp; 在界面里一般通过DataStore绑定数据对象。比如表格(Table)是togn过DataStore绑定数据对象的，数据的分页等也通过DataStore实现的。</p>

<h3>5.2.数据对象监听器</h3>

<p>&nbsp;&nbsp;&nbsp; 可以为数据对象添加监听器，这样数据对象修改后，可以通过监听器修改界面。</p>

<p>&nbsp;&nbsp;&nbsp; 比如一个界面的标签显示的是数据对象中名字属性的值，可以在监听器中监听数据对象修改的事件，从而即时更新界面标签的值。</p>

<h3>5.3.DataObjectList</h3>

<p>&nbsp;&nbsp;&nbsp; 是一个List&lt;DataObject&gt;，同样提供了监听器，可以监听修改事件。</p>

<h3>5.4.表单</h3>

<p>&nbsp;&nbsp;&nbsp; 数据对象生成表单的方法和通过模型生成表单的方法是基本相同的方法，二者基本是通用的。</p>

<p>&nbsp;&nbsp;&nbsp; 表单相关的设置主要是在属性(attribute)模型里设置，编辑属性时可以查看<strong>Editor</strong>标签页。</p>

<h3>5.5.表格</h3>

<p>&nbsp;&nbsp;&nbsp; 数据对象以及其属性的模型编辑界面里，<strong>GridView</strong>标签页是和表格相关的属性。如是否可以编辑、分页信息和列的宽度等等信息。</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
]]></description>
</QuickContent>