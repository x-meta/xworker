^1621826138732
@
sname
ThingMenu
slabel
模型菜单
sgroup
模型编辑器.菜单
sicon
icons/html.png
sth_sortWeight
0
Sdescription
#$@text#$@
<h1>模型菜单</h1>

<p>&nbsp;&nbsp;&nbsp; 模型可以设置菜单，在模型编辑器里可以显示定义的菜单。</p>

<h2>1.定义模型菜单</h2>

<p>&nbsp;&nbsp;&nbsp; 在定义模型时，添加<strong>MenuBar</strong>子节点，通过<strong>MenuBar</strong>子节点定义模型菜单。</p>

<h2>2.变量上下文</h2>

<p>&nbsp;&nbsp;&nbsp; 每一个菜单都使用自己独立的变量上下文。</p>

<p>&nbsp;&nbsp;&nbsp; <strong>基本变量，</strong>每一个菜单都有的变量。</p>

<ul>
	<li><strong>parentContext: ActionContext</strong><br />
	父变量上下文，通常是模型编辑器的变量上下文。<br />
	&nbsp;</li>
	<li><strong>thing, currentThing: Thing</strong><br />
	thing和currentThing都是模型编辑器中当前正在编辑的模型节点。<br />
	&nbsp;</li>
	<li><strong>rootThing：Thing</strong><br />
	模型编辑器的根节点。<br />
	&nbsp;</li>
	<li><strong>menu: ThingMenu</strong><br />
	菜单自己对应的Java对象。</li>
</ul>

<p>&nbsp;&nbsp;&nbsp; <strong>可能变量，</strong>需要用户设置才有的变量，或平台相关的变量，这些变量可能存在。</p>

<ul>
	<li><strong>thingEditor: Object</strong><br />
	代表模型编辑器的对象，不同的模型编辑器可能不存在。<br />
	&nbsp;</li>
	<li><strong>shell: Shell</strong><br />
	SWT模型编辑器特有的变量。<br />
	&nbsp;</li>
	<li><strong>stage: Stage</strong><br />
	JavaFX模型编辑器特有的变量。</li>
</ul>

<h2>3.执行菜单</h2>

<p>&nbsp;&nbsp;&nbsp; 菜单执行时，按照下面的顺序，并且都会被执行。</p>

<ol>
	<li><strong>执行doAction方法</strong><br />
	执行菜单的<strong>doAction</strong>方法。<br />
	&nbsp;</li>
	<li><strong>执行action</strong><br />
	如果菜单设置了<strong>action</strong>属性，那么获取对应的动作并执行。<br />
	&nbsp;</li>
	<li><strong>执行window</strong><br />
	如果菜单设置了<strong>window</strong>属性，那么获取对应的模型并执行它的<strong>create</strong>方法。</li>
</ol>

<h2>4.平台</h2>

<p>&nbsp;&nbsp;&nbsp; 菜单可以设置平台属性，这样只对特定的平台生效。</p>

<p>&nbsp;</p>
#$@text#$@
sen_group
ThingEditor.Menu
sdescriptors
xworker.command.Word
sinheritDescription
false
sth_createIndex
true
sth_keywords
事物,菜单,编辑器
sth_registThing
command|xworker.ide.worldexplorer.swt.dataExplorerParts.ThingCommandIndexRoot
sth_registMyChilds
false
sth_registDisabled
false
sth_noThingRegistViewer
false
sth_fileMonitor
false
sth_deprecated
false
sth_mark
false
sth_registQueryOnlySelf
false
snotXmlAttribute
false
sjson_isArray
false
