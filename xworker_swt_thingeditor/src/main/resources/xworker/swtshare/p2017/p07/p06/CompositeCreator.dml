%1634092157101
@
sname=CompositeCreator
slabel=Composite
sgroup=-1600|常用.-1500|容器
sen_group=-1600|Common.-1500|Container
sdescriptors=xworker.swt.design.InjectableControl
sinheritDescription=false
sth_createIndex=true
sth_registThing=control|xworker.swt.design.DesignToolControlIndex
sth_registMyChilds=false
sth_registDisabled=false
sicon=icons/org/eclipse/swt/widgets/Composite.gif
sth_mark=false
  @/@Control
  sname=Control
  sdescriptors=xworker.swt.design.InjectableControl/@Control
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=Control
    @/@Control/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.Widgets/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Composite
      @/@Control/@Composite/@GridLayout
      sname=GridLayout
      snumColumns=1
      smakeColumnsEqualWidth=false
      smarginWidth=5
      smarginHeight=5
      smarginLeft=0
      smarginTop=0
      smarginRight=0
      smarginBottom=0
      shorizontalSpacing=5
      sverticalSpacing=5
      sdescriptors=xworker.swt.Layouts/@GridLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=GridLayout
      @/@Control/@Composite/@compositeGroup
      sname=compositeGroup
      stext=Composite
      sstyle=SHADOW_ETCHED_IN
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Group
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=compositeGroup
        @/@Control/@Composite/@compositeGroup/@compositeGroupGridData
        sname=compositeGroupGridData
        sstyle=FILL_HORIZONTAL
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=compositeGroupGridData
        @/@Control/@Composite/@compositeGroup/@compositeGroupGridLayout
        sname=compositeGroupGridLayout
        smakeColumnsEqualWidth=false
        smarginWidth=5
        smarginHeight=5
        smarginLeft=0
        smarginTop=0
        smarginRight=0
        smarginBottom=0
        shorizontalSpacing=5
        sverticalSpacing=5
        sdescriptors=xworker.swt.Layouts/@GridLayout
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=compositeGroupGridLayout
        @/@Control/@Composite/@compositeGroup/@form
        sname=form
        scolumn=1
        sH_SCROLL=true
        sV_SCROLL=true
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        sdescriptors=xworker.swt.Widgets/@ThingForm
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=form
          @/@Control/@Composite/@compositeGroup/@form/@Thing
          sname=Thing
          sdescriptors=xworker.swt.xworker.ThingForm/@Thing
          smany=true
          seditCols=2
          sinitialization=false
          smodifier=public
          sinheritDescription=false
          Sdescription=
#$@text#$@
<p><strong>Composite</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;Composite是控件的容器，可以包含其它控件。</p>

<p><strong>Layout</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; Composite需要布局器，否则子控件不会被显示出来。</p>

<p><strong>copyCurrentControl</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; 如果为true(选择），可以当前的控件复制到新的Composite中。</p>
#$@text#$@
          snotXmlAttribute=false
          sjson_isArray=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          Sen_description=
#$@text#$@
<p><strong>Composite</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;Composite is&nbsp;a container of control that can contain other controls。</p>

<p><strong>Layout</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; Composite need layout, otherwise child controls can not be visibile。</p>

<p><strong>copyCurrentControl</strong></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; If true (select), you can copy the current control to the new Composite.</p>
#$@text#$@
          sth_mark=false
          sid=Thing
            @/@Control/@Composite/@compositeGroup/@form/@Thing/@name
            sname=name
            sshowLabel=true
            sreadOnly=false
            sinheritDescription=false
            svalidateAllowBlank=true
            LvalidateOnBlur=true
            LallowDecimals=true
            LallowNegative=true
            snotXmlAttribute=false
            sdescriptors=xworker.lang.MetaDescriptor3/@attribute
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=name
            @/@Control/@Composite/@compositeGroup/@form/@Thing/@label
            sname=label
            sshowLabel=true
            sreadOnly=false
            sinheritDescription=false
            svalidateAllowBlank=true
            LvalidateOnBlur=true
            LallowDecimals=true
            LallowNegative=true
            snotXmlAttribute=false
            sdescriptors=xworker.lang.MetaDescriptor3/@attribute
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=label
            @/@Control/@Composite/@compositeGroup/@form/@Thing/@copyCurrentControl
            sname=copyCurrentControl
            sinputtype=truefalse
            sshowLabel=true
            sreadOnly=false
            sdefault=false
            sinheritDescription=false
            svalidateAllowBlank=true
            LvalidateOnBlur=true
            LallowDecimals=true
            LallowNegative=true
            snotXmlAttribute=false
            sdescriptors=xworker.lang.MetaDescriptor3/@attribute
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=copyCurrentControl
          @/@Control/@Composite/@compositeGroup/@form/@28584
          sname=GridData
          sstyle=FILL_HORIZONTAL
          shorizontalIndent=0
          swidth=-1
          sheight=-1
          shorizontalAlignment=BEGINNING
          sverticalAlignment=CENTER
          shorizontalSpan=2
          sverticalSpan=1
          sgrabExcessHorizontalSpace=false
          sgrabExcessVerticalSpace=false
          sdescriptors=xworker.swt.layout.GridData
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=28584
      @/@Control/@Composite/@layoutGroup
      sname=layoutGroup
      stext=Layout
      sstyle=SHADOW_ETCHED_IN
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@Group
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=layoutGroup
        @/@Control/@Composite/@layoutGroup/@layoutGroupGridData
        sname=layoutGroupGridData
        sstyle=FILL_BOTH
        shorizontalIndent=0
        swidth=-1
        sheight=-1
        shorizontalAlignment=BEGINNING
        sverticalAlignment=CENTER
        shorizontalSpan=1
        sverticalSpan=1
        sgrabExcessHorizontalSpace=false
        sgrabExcessVerticalSpace=false
        sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=layoutGroupGridData
        @/@Control/@Composite/@layoutGroup/@layoutGroupGridLayout
        sname=layoutGroupGridLayout
        smakeColumnsEqualWidth=false
        smarginWidth=5
        smarginHeight=5
        smarginLeft=0
        smarginTop=0
        smarginRight=0
        smarginBottom=0
        shorizontalSpacing=5
        sverticalSpacing=5
        sdescriptors=xworker.swt.Layouts/@GridLayout
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=layoutGroupGridLayout
        @/@Control/@Composite/@layoutGroup/@28912
        sname=layoutCombo
        stype=DROP_DOWN
        sREAD_ONLY=true
        sselectIndex=2
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.widgets.Combo
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=28912
          @/@Control/@Composite/@layoutGroup/@28912/@FillLayout
          sname=FillLayout
          slabel=FillLayout
          svalue=FillLayout
          sdescriptors=xworker.swt.widgets.Combo/@value
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=FillLayout
          @/@Control/@Composite/@layoutGroup/@28912/@FormLayout
          sname=FormLayout
          slabel=FormLayout
          svalue=FormLayout
          sdescriptors=xworker.swt.widgets.Combo/@value
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=FormLayout
          @/@Control/@Composite/@layoutGroup/@28912/@GridLayout
          sname=GridLayout
          slabel=GridLayout
          svalue=GridLayout
          sdescriptors=xworker.swt.widgets.Combo/@value
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=GridLayout
          @/@Control/@Composite/@layoutGroup/@28912/@RowLayout
          sname=RowLayout
          slabel=RowLayout
          svalue=RowLayout
          sdescriptors=xworker.swt.widgets.Combo/@value
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=RowLayout
          @/@Control/@Composite/@layoutGroup/@28912/@StackLayout
          sname=StackLayout
          slabel=StackLayout
          svalue=StackLayout
          sdescriptors=xworker.swt.widgets.Combo/@value
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=StackLayout
          @/@Control/@Composite/@layoutGroup/@28912/@onSelection
          sname=onSelection
          sdescriptors=xworker.swt.widgets.Widget/@Event
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=onSelection
            @/@Control/@Composite/@layoutGroup/@28912/@onSelection/@29701
            sname=GroovyAction
            sisSynchronized=false
            sthrowException=true
            suseOtherAction=false
            svarScope=Local
            sdisableGlobalContext=false
            Scode=
#$@text#$@
import org.xmeta.Thing;

def layoutName = layoutCombo.getText();
def des = null;
if(layoutName == "FillLayout"){
    des = "xworker.swt.layout.FillLayout";
}else if(layoutName == "FormLayout"){
    des = "xworker.swt.layout.FormLayout";
}else if(layoutName == "GridLayout"){
    des = "xworker.swt.layout.GridLayout";
}else if(layoutName == "RowLayout"){
    des = "xworker.swt.layout.RowLayout";
}else if(layoutName == "StackLayout"){
    des = "xworker.swt.custom.StackLayout";
}else{
    des = "xworker.swt.layout.FillLayout";
}
values = thingForm.doAction("getValues", actionContext);
layout.putAll(values);
layout.set("descriptors", des);
thingForm.doAction("setThing", actionContext, "thing", layout);
#$@text#$@
            sinterpretationType=Action
            screateLocalVarScope=false
            ssaveReturn=false
            sdebugLog=false
            sdescriptors=xworker.lang.actions.GroovyAction
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=29701
        @/@Control/@Composite/@layoutGroup/@thingForm
        sname=thingForm
        scolumn=1
        sH_SCROLL=true
        sV_SCROLL=true
        sNO_BACKGROUND=false
        sNO_FOCUS=false
        sNO_MERGE_PAINTS=false
        sNO_REDRAW_RESIZE=false
        sNO_RADIO_GROUP=false
        sEMBEDDED=false
        sDOUBLE_BUFFERED=false
        sdescriptors=xworker.swt.Widgets/@ThingForm
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=thingForm
          @/@Control/@Composite/@layoutGroup/@thingForm/@GridData
          sname=GridData
          sstyle=FILL_BOTH
          shorizontalIndent=0
          swidth=-1
          sheight=-1
          shorizontalAlignment=BEGINNING
          sverticalAlignment=CENTER
          shorizontalSpan=2
          sverticalSpan=1
          sgrabExcessHorizontalSpace=false
          sgrabExcessVerticalSpace=false
          sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=GridData
      @/@Control/@Composite/@29725
      sname=RunAction
      sdescriptors=xworker.swt.xworker.RunAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=29725
        @/@Control/@Composite/@29725/@doInit
        sname=doInit
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        svarScope=Local
        sdisableGlobalContext=false
        Scode=
#$@text#$@
import org.xmeta.Thing;

def layout = new Thing("xworker.swt.layout.GridLayout");
_g.put("layout", layout);

thingForm.doAction("setThing", actionContext, "thing", layout);
#$@text#$@
        sinterpretationType=Action
        screateLocalVarScope=false
        ssaveReturn=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=doInit
  @/@actions
  sname=actions
  sdescriptors=xworker.swt.design.InjectableControl/@actions1
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=actions
    @/@actions/@getInsertControl
    sname=getInsertControl
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    svarScope=Local
    sdisableGlobalContext=false
    Scode=
#$@text#$@
import org.xmeta.Thing;

//创建面板
def values = form.doAction("getValues", actionContext);
def thing = new Thing("xworker.swt.widgets.Composite");
thing.getAttributes().putAll(values);

//布局
values = thingForm.doAction("getValues", actionContext);
layout.putAll(values);
thing.addChild(layout);

//复制原有控件
def controlThing =  parentContext.parentContext.parentContext.controlThing;
if(values.copyCurrentControl == "true" && controlThing != null){   
    def cthing = controlThing.detach();
    //需要移除原来的布局，可以考虑优化
    def layoutData = cthing.getThing("LayoutData@0");
    if(layoutData != null){
        cthing.removeChild(layoutData);
    }
    thing.addChild(cthing);
}

return thing;
#$@text#$@
    sinterpretationType=Action
    screateLocalVarScope=false
    ssaveReturn=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@GroovyAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=getInsertControl
