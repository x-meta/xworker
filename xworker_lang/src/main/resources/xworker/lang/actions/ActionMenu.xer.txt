^1626677856314
@
sname
ActionMenu
slabel
ActionMenu
sdescriptors
xworker.lang.MetaDescriptor3
smany
true
seditCols
2
sinitialization
false
sdescription
<p>动作相关菜单定义。</p>
  @/@swtMenus
  sname
  swtMenus
  slabel
  swtMenus
  sdescriptors
  xworker.lang.MetaDescriptor3/@swtMenus
  sid
  swtMenus
    @/@swtMenus/@menuDefine
    sname
    menuDefine
    slabel
    menuDefine
    sdescriptors
    xworker.lang.MetaDescriptor3/@swtMenus/@menuDefine
    sid
    menuDefine
      @/@swtMenus/@menuDefine/@action
      sname
      action
      slabel
      动作
      sen_label
      Action
      sdescriptors
      xworker.lang.ThingMenu/@menuDefine/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      action
    @/@swtMenus/@menuSetting
    sname
    menuSetting
    stype
    data
    smenuType
    action
    slabel
    menuSetting
    sdescriptors
    xworker.lang.MetaDescriptor3/@swtMenus/@menuSetting
    sid
    menuSetting
      @/@swtMenus/@menuSetting/@runAction
      sname
      runAction
      slabel
      执行
      surl
      xworker.lang.actions.ActionMenu/@actions/@runAction
      sisSplit
      false
      sattachParam
      true
      sen_label
      Execute
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      runAction
      @/@swtMenus/@menuSetting/@executeByExecutor
      sname
      executeByExecutor
      slabel
      执行-使用执行器
      surl
      xworker.lang.actions.ActionMenu/@actions/@runByExecutor
      sisSplit
      false
      sattachParam
      true
      sen_label
      Execute By Executor
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_fileMonitor
      false
      sth_mark
      false
      sid
      executeByExecutor
      @/@swtMenus/@menuSetting/@runStepMenuItem
      sname
      runStepMenuItem
      slabel
      执行-调试器
      sshell
      xworker.swt.xwidgets.prototypes.ActionExecuteViewerShell
      sisSplit
      false
      sattachParam
      true
      sen_label
      Execute-Debuger
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      runStepMenuItem
      @/@swtMenus/@menuSetting/@traceRun
      sname
      traceRun
      slabel
      执行-打印详细信息
      surl
      xworker.lang.actions.ActionMenu/@actions/@runWithTrace
      sisSplit
      false
      sattachParam
      true
      sen_label
      Execute-Logs
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      traceRun
      @/@swtMenus/@menuSetting/@split1
      sname
      split1
      sisSplit
      true
      sattachParam
      true
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sid
      split1
      @/@swtMenus/@menuSetting/@setChangeStatus
      sname
      setChangeStatus
      slabel
      设置动作为更新
      surl
      xworker.lang.actions.ActionMenu/@actions/@setActionChanged
      sisSplit
      false
      sattachParam
      true
      sen_label
      Update Lastmodify
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      setChangeStatus
      @/@swtMenus/@menuSetting/@split2
      sname
      split2
      sisSplit
      true
      sattachParam
      true
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sid
      split2
      @/@swtMenus/@menuSetting/@openPathDialog
      sname
      openPathDialog
      slabel
      查看代码&类路径
      surl
      xworker.lang.actions.ActionMenu/@actions/@viewCodeClassPath
      sisSplit
      false
      sattachParam
      true
      sen_label
      View Code&Class Path
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      openPathDialog
      @/@swtMenus/@menuSetting/@addToInstances
      sname
      addToInstances
      slabel
      注册到动作实例
      surl
      xworker.lang.actions.ActionMenu/@actions/@registToActionInstances
      sisSplit
      false
      sattachParam
      true
      sen_label
      Regist To Action Instances
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      addToInstances
  @/@actions
  sname
  actions
  slabel
  actions
  sdescriptors
  xworker.lang.MetaDescriptor3/@actions
  sid
  actions
    @/@actions/@runAction
    sname
    runAction
    sisSynchronized
    false
    sthrowException
    false
    suseOtherAction
    false
    suseOuterJava
    true
    souterClassName
    xworker.lang.actions.ActionMenuCreator
    smethodName
    runAction
    sdisableGlobalContext
    false
    sdescriptors
    xworker.lang.actions.JavaAction
    sid
    runAction
    @/@actions/@viewCodeClassPath
    sname
    viewCodeClassPath
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    suseOuterJava
    true
    souterClassName
    xworker.lang.actions.ActionMenuCreator
    smethodName
    viewCodeClassPath
    sdisableGlobalContext
    false
    sdescriptors
    xworker.lang.actions.JavaAction
    sid
    viewCodeClassPath
    @/@actions/@setActionChanged
    sname
    setActionChanged
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    suseOuterJava
    true
    souterClassName
    xworker.lang.actions.ActionMenuCreator
    smethodName
    setActionChanged
    sdisableGlobalContext
    false
    sdescriptors
    xworker.lang.actions.JavaAction
    sid
    setActionChanged
    @/@actions/@removeBreakPoint
    sname
    removeBreakPoint
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    svarScope
    Local
    sdisableGlobalContext
    false
    Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

//获取断点配置
def config = world.getThing("_local.xworker.debug.ActionDebugInfo");
def acCfg = null;
for(child in config.getChilds()){
   if(child.get("thingPath") == currentThing.getMetadata().getPath()){
       acCfg = child;
   }
}

if(acCfg != null){
    config.removeChild(acCfg);
    config.save();
}

def box = new MessageBox(shell, SWT.ICON_INFORMATION | SWT.OK);
box.setText("移除断点");
box.setMessage("断点已经移除！");
box.open();
#$@text#$@
    sinterpretationType
    Action
    screateLocalVarScope
    false
    ssaveReturn
    false
    sswitchResult
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.Actions/@GroovyAction
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    removeBreakPoint
    @/@actions/@registToActionInstances
    sname
    registToActionInstances
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    svarScope
    Local
    sdisableGlobalContext
    false
    Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

def changed = false;
def th_registThing = currentThing.getStringBlankAsNull("th_registThing");
def th_createIndex = currentThing.getBoolean("th_createIndex");
if(th_createIndex == false){
    currentThing.set("th_createIndex", "true");
    changed = true;
}

def registStr = "child|xworker.lang.ActionInstances";
if(th_registThing == null || th_registThing.indexOf(registStr) == -1){
    def cr = confirm(actionContext);
    //println cr;
    if(cr == "CANCEL"){
        return;
    }
    if(th_registThing == null){
        th_registThing = registStr; 
    }else{
        th_registThing = th_registThing + "," + registStr; 
    }  
    currentThing.set("th_registThing", th_registThing);
    changed = true;
}

if(changed){
    actions.doAction("modify", actionContext, "modified", true);
    
    success(actionContext);
}else{
    alreadyRegisted(actionContext);
}
#$@text#$@
    sinterpretationType
    Action
    screateLocalVarScope
    false
    ssaveReturn
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.Actions/@GroovyAction
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    registToActionInstances
      @/@actions/@registToActionInstances/@ActionDefined
      sname
      ActionDefined
      sdescriptors
      xworker.lang.actions.Inout/@ActionDefined
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      ActionDefined
        @/@actions/@registToActionInstances/@ActionDefined/@confirm
        sname
        confirm
        sshell
        ognl:coolBar.getShell()
        sicon
        ICON_QUESTION
        sbuttons
        OK | CANCEL
        stitle
        lang:d=注册动作&en=Regist Action
        smessage
        lang:d=想要把当前动作注册到动作实例么？&en=Are you want to regist current action to action instances?
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sdescriptors
        xworker.swt.actions.MessageBoxActions/@MessageBox
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        confirm
        @/@actions/@registToActionInstances/@ActionDefined/@confirm1
        sname
        alreadyRegisted
        sshell
        ognl:coolBar.getShell()
        sicon
        ICON_INFORMATION
        sbuttons
        OK
        stitle
        lang:d=注册动作&en=Regist Action
        smessage
        lang:d=已经设置注册到实例了。&en=Already registed to action instances.
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sdescriptors
        xworker.swt.actions.MessageBoxActions/@MessageBox
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        confirm1
        @/@actions/@registToActionInstances/@ActionDefined/@confirm2
        sname
        success
        sshell
        ognl:coolBar.getShell()
        sicon
        ICON_INFORMATION
        sbuttons
        OK
        stitle
        lang:d=注册动作&en=Regist Action
        smessage
        lang:d=已设置注册到实例，保存后生效。&en=Registration has been set, valid after saving.
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sdescriptors
        xworker.swt.actions.MessageBoxActions/@MessageBox
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        confirm2
    @/@actions/@runWithTrace
    sname
    runWithTrace
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    svarScope
    Local
    sdisableGlobalContext
    false
    Scode
#$@text#$@
import org.xmeta.Thing;
import org.xmeta.ActionContext;

//在动作上下文中的栈层中指定上下文事物为DebugContext
def ac = new ActionContext();
ac.peek().setContextThing(new Thing("xworker.lang.context.DebugContext"));

//使用具有DebugContext的动作上下文执行动作
def action = currentThing.getAction();
action.run(ac);
#$@text#$@
    sinterpretationType
    Action
    screateLocalVarScope
    false
    ssaveReturn
    false
    sswitchResult
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.Actions/@GroovyAction
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    runWithTrace
    @/@actions/@openJavaSource
    sname
    openJavaSource
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    svarScope
    Local
    sdisableGlobalContext
    false
    Scode
#$@text#$@
def className = currentThing.getStringBlankAsNull("outerClassName");
if(className == null){
    noClass(actionContext);
}else{
    open(actionContext, "className", className);
}
#$@text#$@
    sinterpretationType
    Action
    screateLocalVarScope
    false
    ssaveReturn
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.Actions/@GroovyAction
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    openJavaSource
      @/@actions/@openJavaSource/@ActionDefined
      sname
      ActionDefined
      sdescriptors
      xworker.lang.actions.Inout/@ActionDefined
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      ActionDefined
        @/@actions/@openJavaSource/@ActionDefined/@open
        sname
        open
        sclassName
        var:className
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sdescriptors
        xworker.ide.worldexplorer.actions.ExplorerActions/@openJavaSourceViewer
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        open
        @/@actions/@openJavaSource/@ActionDefined/@noClass
        sname
        noClass
        sshell
        ognl:coolBar.getShell()
        sicon
        ICON_INFORMATION
        sbuttons
        OK
        stitle
        JavaAction
        smessage
        lang:d=没有指定Java类。&en=Java class name not defined.
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sdescriptors
        xworker.swt.actions.MessageBoxActions/@MessageBox
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        noClass
    @/@actions/@runByExecutor
    sname
    runByExecutor
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    svarScope
    Local
    sdisableGlobalContext
    false
    Scode
#$@text#$@
import org.xmeta.ActionContext;
import xworker.lang.executor.Executor;
import xworker.util.XWorkerUtils;

def ac = new ActionContext();
ac.put("parent", parentContext.coolBar.shell);
ac.put("editorShell", parentContext.coolBar.shell);
ac.put("explorerActions", explorerActions);
ac.put("explorerContext", explorerContext);
ac.put("thingContext", actionContext);
ac.put("utilBrowser", utilBrowser);
ac.put("thing", currentThing);
ac.put("currentThing", currentThing);
ac.put("currentModelContext", currentModelContext);
ac.put("currentModel", currentModel);

def executor = world.getThing("xworker.lang.actions.prototypes.ActionExecutorByExecuteService");
def shell = executor.doAction("create", ac);
shell.setText(currentThing.getMetadata().getLabel());
shell.setVisible(true);

/*
//执行服务
def executorService = ac.get("executorService");
def thing = currentThing;
def start = start;
def end = end;

//使用新线程执行
new Thread({
    try{
        Executor.push(executorService);
        
        start(ac);
        def result = thing.getAction().run(ac);
        end(ac, "object", result);
    }catch(Exception e){
        end(ac, "object", e);
    }finally{
        Executor.pop();
    }
}).start();*/
#$@text#$@
    sinterpretationType
    Action
    screateLocalVarScope
    false
    ssaveReturn
    false
    sswitchResult
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.Actions/@GroovyAction
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_fileMonitor
    false
    sth_mark
    false
    sid
    runByExecutor
      @/@actions/@runByExecutor/@ActionDefined
      sname
      ActionDefined
      sdescriptors
      xworker.lang.actions.Inout/@ActionDefined
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_fileMonitor
      false
      sth_mark
      false
      sid
      ActionDefined
        @/@actions/@runByExecutor/@ActionDefined/@start
        sname
        start
        slabel
        动作开始
        sdescription
        <p>动作正在执行...</p>
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sen_label
        Action Start
        sdescriptors
        xworker.lang.executor.ExecutorActions/@RequestUI
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_fileMonitor
        false
        sen_description
        <p>Action is running...</p>
        sth_mark
        false
        sid
        start
          @/@actions/@runByExecutor/@ActionDefined/@start/@Requests
          sname
          Requests
          sdescriptors
          xworker.lang.executor.ExecutorActions/@RequestUI/@Requests
          sinheritDescription
          false
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_fileMonitor
          false
          sth_mark
          false
          sid
          Requests
            @/@actions/@runByExecutor/@ActionDefined/@start/@Requests/@ThingDesc
            sname
            ThingDesc
            sthing
            var:request
            sdescriptors
            xworker.lang.executor.requests.ThingDesc
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_fileMonitor
            false
            sth_mark
            false
            sid
            ThingDesc
        @/@actions/@runByExecutor/@ActionDefined/@end
        sname
        end
        slabel
        动作结束
        sinterpretationType
        Self
        sattributeTemplate
        false
        schildsAttributeTemplate
        false
        svarScope
        Local
        sisSynchronized
        false
        sthrowException
        true
        screateLocalVarScope
        false
        ssaveReturn
        false
        sdisableGlobalContext
        false
        sdebugLog
        false
        sen_label
        ActionEnd
        sdescriptors
        xworker.lang.executor.ExecutorActions/@RequestUI
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_fileMonitor
        false
        sth_mark
        false
        sid
        end
          @/@actions/@runByExecutor/@ActionDefined/@end/@Requests
          sname
          Requests
          sdescriptors
          xworker.lang.executor.ExecutorActions/@RequestUI/@Requests
          sinheritDescription
          false
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_fileMonitor
          false
          sth_mark
          false
          sid
          Requests
            @/@actions/@runByExecutor/@ActionDefined/@end/@Requests/@ObjectViewer
            sname
            ObjectViewer
            sobject
            var:object
            sdescriptors
            xworker.lang.executor.requests.ObjectViewer
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_fileMonitor
            false
            sth_mark
            false
            sid
            ObjectViewer
