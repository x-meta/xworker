@xworker.ide.relation.editors.RegistThingCreater
sname
RegistThingCreater
slabel
RegistThingCreater
sid
RegistThingCreater
sdescriptors
xworker.swt.widgets.Display
@xworker.ide.relation.editors.RegistThingCreater/@shell
sname
shell
stext
label.xworker.corethings.relation.editors.RegistThingCreater/@thing/@shellLabel
sstyle
APPLICATION_MODAL
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
false
sMAX
false
sBORDER
false
sRESIZE
true
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
800
sheight
500
scenterScreen
true
spack
false
smaximized
false
sfullScreen
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
shell
sdescriptors
xworker.swt.widgets.Display/@Shell
@xworker.ide.relation.editors.RegistThingCreater/@shell/@shellFillLayout
sname
shellFillLayout
stype
SWT.HORIZONTAL
sxw_cl_global
false
sid
shellFillLayout
slabel
shellFillLayout
sdescriptors
xworker.swt.Layouts/@FillLayout
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash
sname
mainSash
sstyle
VERTICAL
sSMOOTH
false
sweights
50,50
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
mainSash
sdescriptors
xworker.swt.Widgets/@SashForm
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite
sname
mainComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
mainComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@shellGridLayout
sname
mainCompositeGridLayout
snumColumns
1
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sid
shellGridLayout
slabel
mainCompositeGridLayout
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@thingsLabel
sname
thingsLabel
stext
label.xworker.corethings.relation.editors.RegistThingCreater/@thing/@thingsLabel
stype
HORIZONTAL
sshadow
SHADOW_OUT
sBORDER
false
salignment
LEFT
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
thingsLabel
slabel
thingsLabel
sdescriptors
xworker.swt.Widgets/@Label
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable
sname
descriptorsTable
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
true
sHIDE_SELECTION
false
sBORDER
false
slineVisible
true
smultipleColumns
true
sheaderVisible
true
ssortIndicator
true
smoveableColumns
true
sheadImages
false
ssubImages
false
sVIRTUAL
false
scolumnNames
["name", "path"] as String[]
sid
descriptorsTable
slabel
descriptorsTable
sdescriptors
xworker.swt.Widgets/@DataTable
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@dNameColumn
sname
dNameColumn
stext
"名称"
swidth
200
sid
dNameColumn
slabel
dNameColumn
sdescriptors
xworker.swt.xworker.DataTable/@TableColumn
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@dPathColumn
sname
dPathColumn
stext
"路径"
swidth
560
sid
dPathColumn
slabel
dPathColumn
sdescriptors
xworker.swt.xworker.DataTable/@TableColumn
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@listeners
sname
listeners
sid
listeners
slabel
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@listeners/@descriptorsTableSelection
sname
descriptorsTableSelection
stype
Selection
sid
descriptorsTableSelection
slabel
descriptorsTableSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@listeners/@descriptorsTableSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
def item = descriptorsTable.getSelection()[0];//event.widget.getSelection()[0];
actionContext.getScope(0).put("path", item.getData().path);

openButton.setEnabled(true);

//显示html
def globalCfg = world.getThing("_local.xworker.config.GlobalConfig");
browser.setUrl(globalCfg.webUrl + "do?sc=xworker.ide.worldexplorer.swt.http.ThingDoc/@desc&thing=" + item.getData().path);
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@listeners/@descriptorsTableDefaultSelection
sname
descriptorsTableDefaultSelection
stype
DefaultSelection
sid
descriptorsTableDefaultSelection
slabel
descriptorsTableDefaultSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@listeners/@descriptorsTableDefaultSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
descriptorsTableSelection.handleEvent(null);
openButtonSelection.handleEvent(null);
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@descriptorsTable/@descriptorsTableGridData
sname
descriptorsTableGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
descriptorsTableGridData
slabel
descriptorsTableGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
buttonComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@buttonCompositeGridData
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
buttonCompositeGridData
slabel
buttonCompositeGridData
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@buttonCompositeRowLayout
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sid
buttonCompositeRowLayout
slabel
buttonCompositeRowLayout
sdescriptors
xworker.swt.Layouts/@RowLayout
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@openButton
sname
openButton
stext
label:xworker.resource.i18n.ButtonLabel/@select
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
false
sredraw
true
svisible
true
sxw_cl_global
false
sid
openButton
slabel
openButton
sdescriptors
xworker.swt.Widgets/@Button
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@openButton/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@openButton/@Listeners/@openButtonSelection
sname
openButtonSelection
stype
Selection
sid
openButtonSelection
slabel
openButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@openButton/@Listeners/@openButtonSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import org.xmeta.ActionContext;

def ac = new ActionContext();
ac.putAll(actionContext);
ac.put("parent", shell);
def item = descriptorsTable.getSelection()[0];//event.widget.getSelection()[0];
def thingRelation = world.getThing("xworker.ide.relation.ThingRelation");
def path = thingRelation.doAction("getRelationThingPath", ac, ["thing":world.getThing(item.getData().path)]);
ac.put("thingPath", item.getData().path);
ac.put("path", path + "Notes");
//Debuger.debug(ac);
def selectTargetThing = world.getThing("xworker.ide.relation.editors.SelectTargetThingDialog/@shell");
def sshell = selectTargetThing.doAction("create", ac);
sshell.open();

/*
def openThing = world.getThing(path);

if(openThing != null){
    shell.dispose();
    explorerActions.doAction("openThing", ["thing":openThing]);    
}else{
    MessageBox box = new MessageBox(shell, SWT.OK | SWT.ICON_WARNING);
    box.setText("操作信息");
    box.setMessage("事物不存在：" + path);
    box.open();
}
*/
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@mainComposite/@buttonComposite/@openButton/@RowData
sname
RowData
sexclude
false
swidth
60
sheight
-1
sid
RowData
slabel
RowData
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@browser
sname
browser
sBRODER
false
sMOZILLA
false
sNO_FOCUS
false
sid
browser
slabel
browser
sdescriptors
xworker.swt.Widgets/@Browser
@xworker.ide.relation.editors.RegistThingCreater/@shell/@mainSash/@init
sname
init
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
def dess = [:];
if(actionContext.get("thing") == null){
    return;
}
descriptorsTable.updateRow(null, ["name": thing.metadata.name, "path":thing.metadata.path]);    
for(descriptor in thing.getAllDescriptors()){
    if(dess.get(descriptor.metadata.path) != null){
        continue;
    }
    dess.put(descriptor.metadata.path, descriptor);
    
    descriptorsTable.updateRow(null, ["name": descriptor.metadata.name, "path":descriptor.metadata.path]);    
}

def exss = [:];
for(exend in thing.getAllExtends()){
    if(exss.get(exend.metadata.path) != null){
        continue;
    }
    exss.put(exend.metadata.path, exend);

    descriptorsTable.updateRow(null, ["name": exend.metadata.name, "path":exend.metadata.path]);    
}

utilBrowser.attach(browser);

def type = actionContext.get("type");
if(type == null){
    type = "notes";
}
if(type == "notes"){
    thingsLabel.setText(world.getThing("xworker.ide.relation.editors.RegistThingCreater/@thing/@shellLabel").metadata.label);
}
#$@text#$@
sid
init
sdescriptors
xworker.swt.Widgets/@Code
@xworker.ide.relation.editors.RegistThingCreater/@thing
sname
thing
sid
thing
slabel
thing
sdescriptors
xworker.ide.util.I18nResource
@xworker.ide.relation.editors.RegistThingCreater/@thing/@shellLabel
sname
noteLabel
slabel
请选择要创建笔记的事物
szh_label
请选择要创建笔记的事物
sen_label
Please select a thing to create notes
sid
shellLabel
sdescriptors
xworker.ide.util.I18nResource/@resource
@xworker.ide.relation.editors.RegistThingCreater/@thing/@selectButtonLabel
sname
selectButtonLabel
slabel
选择
szh_label
选择
sen_label
Select
sid
selectButtonLabel
sdescriptors
xworker.ide.util.I18nResource/@resource
@xworker.ide.relation.editors.RegistThingCreater/@thing/@thingsLabel
sname
thingsLabel
slabel
事物列表：
szh_label
事物列表：
sen_label
Things List:
sid
thingsLabel
sdescriptors
xworker.ide.util.I18nResource/@resource
