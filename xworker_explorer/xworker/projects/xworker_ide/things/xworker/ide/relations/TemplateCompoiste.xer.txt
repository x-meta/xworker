@xworker.ide.relations.TemplateCompoiste
sname
TemplateCompoiste
slabel
TemplateCompoiste
sid
TemplateCompoiste
sdescriptors
xworker.swt.widgets.Display
@xworker.ide.relations.TemplateCompoiste/@shell
sname
shell
stext
Template
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
true
sMAX
true
sBORDER
false
sRESIZE
true
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
850
sheight
640
scenterScreen
true
spack
false
smaximized
false
sfullScreen
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
shell
sdescriptors
xworker.swt.widgets.Display/@Shell
@xworker.ide.relations.TemplateCompoiste/@shell/@FillLayout
sname
FillLayout
stype
SWT.HORIZONTAL
sid
FillLayout
slabel
FillLayout
sdescriptors
xworker.swt.Layouts/@FillLayout
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite
sname
mainComposite
sBORDER
true
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
mainComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite
sname
templateComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
templateComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateGridLayout
sname
templateGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sid
templateGridLayout
slabel
templateGridLayout
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateWordsEditor
sname
templateWordsEditor
sid
templateWordsEditor
sdescriptors
xworker.swt.Widgets/@ThingEditor
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateWordsEditor/@templteWorldEditorGridData
sname
templteWorldEditorGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
templteWorldEditorGridData
slabel
templteWorldEditorGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite
sname
templateButtonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
templateButtonComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@templateButtonCompositeGridData
sname
templateButtonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sid
templateButtonCompositeGridData
slabel
templateButtonCompositeGridData
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@templateButtonCompositeRowLayout
sname
templateButtonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sid
templateButtonCompositeRowLayout
slabel
templateButtonCompositeRowLayout
sdescriptors
xworker.swt.Layouts/@RowLayout
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@applyTemplateButton
sname
applyTemplateButton
stext
res:res.w_exp:applyButton:应用（&A）
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
applyTemplateButton
slabel
applyTemplateButton
sdescriptors
xworker.swt.Widgets/@Button
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@applyTemplateButton/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@applyTemplateButton/@Listeners/@applyTemplateButtonSelection
sname
applyTemplateButtonSelection
stype
Selection
sid
applyTemplateButtonSelection
slabel
applyTemplateButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@applyTemplateButton/@Listeners/@applyTemplateButtonSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
false
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

def data = templateWordsEditor.editorActions.doAction("getThing");

//取模板
def item = dataTree.getSelection()[0];
def templateThing = item.getData();
//log.info(templateThing.metadata.path);
def proccessedThing = templateThing.doAction("process", actionContext, ["data":data]);

if(proccessedThing != null){
    thing.paste(proccessedThing);
    thing.save();
        
    thingContext.actions.doAction("selectThing", ["thing":thing]);

    //刷新编辑概要树
    def action = world.getAction("xworker.ide.worldexplorer.swt.dataExplorerParts.ThingEditor/@outlineTree/@popMenu/@refreshMenuItem/@listeners/@refreshMenuSelection/@GroovyAction");
    action.run(thingContext);
    
    MessageBox box = new MessageBox(shell, SWT.OK | SWT.ICON_INFORMATION);
    box.setText(world.getThing("xworker.ide.worldexplorer.swt.i18n.I18nResource/@common/@operateMessageTitle").metadata.label);
    box.setMessage("模板应用成功！");
    box.open();
    
    mainCompositeStackLayout.topControl = listComposite;
    mainComposite.layout();
}else{
    MessageBox box = new MessageBox(shell, SWT.OK | SWT.ICON_INFORMATION);
    box.setText(world.getThing("xworker.ide.worldexplorer.swt.i18n.I18nResource/@common/@operateMessageTitle").metadata.label);
    box.setMessage("模板为空，没有粘贴数据！");
    box.open();
}
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@cancelTemplateButton
sname
cancelTemplateButton
stext
res:res.w_exp:cancelButton:取消（&C）
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
cancelTemplateButton
slabel
cancelTemplateButton
sdescriptors
xworker.swt.Widgets/@Button
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@cancelTemplateButton/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@cancelTemplateButton/@Listeners/@cancelTemplateButtonSelection
sname
cancelTemplateButtonSelection
stype
Selection
sid
cancelTemplateButtonSelection
slabel
cancelTemplateButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@templateComposite/@templateButtonComposite/@cancelTemplateButton/@Listeners/@cancelTemplateButtonSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
Scode
#$@text#$@
mainCompositeStackLayout.topControl = listComposite;
mainComposite.layout();
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite
sname
listComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
listComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listCompositeGridLayout
sname
listCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sid
listCompositeGridLayout
slabel
listCompositeGridLayout
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder
sname
tableFolder
sstyle
TOP
sBORDER
false
sFLAT
false
sCLOSE
false
sSINGLE
false
sMRUVisible
false
ssimple
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
tableFolder
sdescriptors
xworker.swt.Widgets/@CTabFolder
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem
sname
registTabItem
stext
label:xworker.ide.worldexplorer.swt.i18n.I18nResource/@templateDialog/@templateList
sCLOSE
false
sid
registTabItem
slabel
registTabItem
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom
sname
listSashFrom
sstyle
VERTICAL
sSMOOTH
false
sweights
50,50
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
listSashFrom
sdescriptors
xworker.swt.Widgets/@SashForm
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite
sname
registsComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
registsComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@registsCompositeGridLayout
sname
registsCompositeGridLayout
snumColumns
2
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sid
registsCompositeGridLayout
slabel
registsCompositeGridLayout
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@store
sname
store
sattachToParent
true
sloadBackground
true
sautoLoad
false
sautoSave
false
sdataObject
xworker.ide.db.dbindex.app.dataObject.RegistsByThing
sid
store
slabel
store
sdescriptors
xworker.swt.Commons/@DataStore
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@store/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.app.view.swt.data.DataStore/@Listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@store/@Listeners/@dataTreeListener
sname
dataTreeListener
sid
dataTreeListener
sdescriptors
xworker.app.view.swt.data.DataStore/@Listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@store/@Listeners/@dataTreeListener/@actions
sname
actions
sid
actions
slabel
actions
sdescriptors
xworker.app.view.swt.data.DataStore/@Listeners/@Listener/@actions1
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@store/@Listeners/@dataTreeListener/@actions/@beforeLoad
sname
beforeLoad
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
searchButton.display.asyncExec({
    for(item in dataTree.getItems()){
        item.dispose();
    }
});
#$@text#$@
sid
beforeLoad
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@store/@Listeners/@dataTreeListener/@actions/@onLoaded
sname
onLoaded
sisSynchronized
false
sthrowException
false
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Tree;
import org.eclipse.swt.widgets.TreeItem;

import java.util.Collections;
import java.util.Comparator;

def log = log;
def store = store;
def world = world;
searchButton.display.asyncExec({
    //分组
    def root = ["childs":[]];
    for(record in store.records){
        def des = world.getThing(record.path);
        if(des == null){
            log.info("thing not exists or has deleted, path=" + record.path);
            continue;
        }

        def group = des.getString("group");
        if(group == null || group == ""){
            root.childs.add(des);
        }else{
            for(grs in group.split("[,]")){
                def gs = grs.split("[.]");
                def subRoot = null;
                def currentRoot = root;
                for(g in gs){
                    subRoot = currentRoot.get(g);
                    if(subRoot == null){ 
                        subRoot = ["childs":[]];
                        subRoot.put("__name__", g);
                        currentRoot.put(g, subRoot);
                    }
                    currentRoot = subRoot;
                }
                subRoot.childs.add(des);
            }
        }
    }
    
    //构造子节点树
    dataTree.removeAll();
    createTree(dataTree, root);
});

def createTree(item, aroot){
    def groups = [];
    for(key in aroot.keySet()){
        def v = aroot.get(key);
        if(v instanceof Map){
            groups.add(v);
        }
    }
    
    //为group排序
    Collections.sort(groups, [
            compare : {
               o1, o2->
               if(o1.__name__.toLowerCase() < o2.__name__.toLowerCase()) return -1;
               if(o1.__name__.toLowerCase() == o2.__name__.toLowerCase()) return 0;
               return 1;
            }
        ] as Comparator);
    for(g in groups){
        Collections.sort(g.childs, [
                compare : {
                   o1, o2->
                   if(o1.metadata.label.toLowerCase() < o2.metadata.label.toLowerCase()) return -1;
                   if(o1.metadata.label.toLowerCase() == o2.metadata.label.toLowerCase()) return 0;
                   return 1;
                }
            ] as Comparator);
        def subItem = new TreeItem(item, SWT.NONE);
        subItem.setText(g.__name__);
        createTree(subItem, g);
    }

    Collections.sort(aroot.childs, [
                compare : {
                   o1, o2->
                   if(o1.metadata.label.toLowerCase() < o2.metadata.label.toLowerCase()) return -1;
                   if(o1.metadata.label.toLowerCase() == o2.metadata.label.toLowerCase()) return 0;
                   return 1;
                }
            ] as Comparator);
    for(child in aroot.childs){
       
        def subItem = new TreeItem(item, SWT.NONE);
        subItem.setText(child.metadata.label);
        subItem.setData(child);
    }
}
#$@text#$@
sid
onLoaded
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@searchText
sname
searchText
sstyle
SINGLE
sH_SCROLL
false
sV_SCROLL
false
sWRAP
false
sREAD_ONLY
false
sPASSWORD
false
sSEARCH
true
sCANCEL
false
sBORDER
true
salign
LEFT
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
searchText
slabel
searchText
sdescriptors
xworker.swt.Widgets/@Text
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@searchText/@searchTextGridData
sname
searchTextGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
searchTextGridData
slabel
searchTextGridData
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@searchButton
sname
searchButton
stext
label:xworker.ide.worldexplorer.swt.i18n.I18nResource/@buttons/@searchButton
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
searchButton
slabel
searchButton
sdescriptors
xworker.swt.Widgets/@Button
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@searchButton/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@searchButton/@Listeners/@searchButtonSelection
sname
searchButtonSelection
stype
Selection
sid
searchButtonSelection
slabel
searchButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@searchButton/@Listeners/@searchButtonSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
store.doAction("load", actionContext, ["params":[
    "registType":"template",
    "keywords":searchText.getText(),
    "thing":thing]
]);
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@dataTree
sname
dataTree
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
false
sHIDE_SELECTION
false
sBORDER
false
slineVisible
false
smultipleColumns
false
sheaderVisible
false
ssortIndicator
false
smoveableColumns
false
sheadImages
false
ssubImages
false
scheckSelection
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sid
dataTree
slabel
dataTree
sdescriptors
xworker.swt.Widgets/@Tree
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@dataTree/@registTableGridData
sname
registTableGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
2
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
registTableGridData
slabel
registTableGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@dataTree/@listeners
sname
listeners
sid
listeners
slabel
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@dataTree/@listeners/@registTableSelection
sname
registTableSelection
stype
Selection
sid
registTableSelection
slabel
registTableSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@dataTree/@listeners/@registTableSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.ActionContext;
import org.xmeta.Thing;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;

descTree.removeAll();

//def data = registTable.getSelection()[0].getData();
def thing = event.item.getData();
if(thing != null){
    openUrl("do?sc=xworker.ide.worldexplorer.swt.http.ThingDoc/@desc&thing=" + thing.metadata.path, false);
        
    initDescTree(thing, descTree, [:]);
}

leditButton.setEnabled(true);
if(thing != null && thing.getBoolean("isNode")){
    lopenButton.setEnabled(false);
}else{
    lopenButton.setEnabled(true);
}

def initDescTree(thing, item, context){
    if(context.get(thing) != null){
        return;
    }
    
    context.put(thing, thing);
    def treeItem = new TreeItem(item, SWT.NONE);
    treeItem.setText(thing.metadata.label + " (" + thing.getThingName() + ")");
    treeItem.setData(thing);
    
    for(child in thing.getAllChilds()){
        initDescTree(child, treeItem, context);
    }
    treeItem.expanded = true;
}
   
def openUrl(url, isOuterUrl){
    //log.info(url);
    if(isOuterUrl){
        browser.setUrl(url);
    }else{
        def globalCfg = world.getThing("_local.xworker.config.GlobalConfig");
        descBrowser.setUrl(globalCfg.webUrl + url);
    }
}
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@pageToolbar
sname
pageToolbar
sbeforePageText
第
safterPageText
页 共{0}页
sdisplayInfo
true
sdisplayMsg
第{0}-第{1}条，共{2}条
semptyMsg
没有数据
sfirstText
首页
slastText
最后一页
sattribute
下一页
sstore
store
sid
pageToolbar
sdescriptors
xworker.app.view.swt.Items/@PagingToolbar
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@registsComposite/@pageToolbar/@pageToolbarGridData
sname
pageToolbarGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
pageToolbarGridData
slabel
pageToolbarGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@descSashFrom
sname
descSashFrom
sstyle
HORIZONTAL
sSMOOTH
false
sweights
50,50
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
descSashFrom
sdescriptors
xworker.swt.Widgets/@SashForm
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@descSashFrom/@descBrowser
sname
descBrowser
sBRODER
false
sMOZILLA
false
sNO_FOCUS
false
sid
descBrowser
slabel
descBrowser
sdescriptors
xworker.swt.Widgets/@Browser
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@descSashFrom/@descTree
sname
descTree
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
false
sHIDE_SELECTION
false
sBORDER
false
slineVisible
false
smultipleColumns
false
sheaderVisible
false
ssortIndicator
false
smoveableColumns
false
sheadImages
false
ssubImages
false
scheckSelection
false
sxw_cl_global
false
sid
descTree
slabel
descTree
sdescriptors
xworker.swt.Widgets/@Tree
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@descSashFrom/@descTree/@listeners
sname
listeners
sid
listeners
slabel
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@descSashFrom/@descTree/@listeners/@descTreeSelection
sname
descTreeDefaultSelection
stype
DefaultSelection
sid
descTreeSelection
slabel
descTreeDefaultSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@registTabItem/@listSashFrom/@descSashFrom/@descTree/@listeners/@descTreeSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
def items = descTree.getSelection();
if(items != null && items.length > 0){
    def item = items[0];
    
    explorerActions.doAction("openThing", ["thing":item.getData()]);
}
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@helpTabItem
sname
helpTabItem
stext
帮助
sCLOSE
false
sid
helpTabItem
slabel
helpTabItem
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@helpTabItem/@helpBrowser
sname
helpBrowser
sBRODER
false
sMOZILLA
false
sNO_FOCUS
false
sid
helpBrowser
slabel
helpBrowser
sdescriptors
xworker.swt.Widgets/@Browser
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@tableFolder/@tableFolderGridDAta
sname
tableFolderGridDAta
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sid
tableFolderGridDAta
slabel
tableFolderGridDAta
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite
sname
listButtonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
listButtonComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@listbuttonComGridData
sname
listbuttonComGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sid
listbuttonComGridData
slabel
listbuttonComGridData
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@listButtonRwLayout
sname
listButtonRwLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sid
listButtonRwLayout
slabel
listButtonRwLayout
sdescriptors
xworker.swt.Layouts/@RowLayout
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@lopenButton
sname
lopenButton
stext
label:xworker.ide.worldexplorer.swt.i18n.I18nResource/@templateDialog/@userButton
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
false
sredraw
true
svisible
true
sxw_cl_global
false
sid
lopenButton
slabel
lopenButton
sdescriptors
xworker.swt.Widgets/@Button
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@lopenButton/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@lopenButton/@Listeners/@lopenButtonSelection
sname
lopenButtonSelection
stype
Selection
sid
lopenButtonSelection
slabel
lopenButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@lopenButton/@Listeners/@lopenButtonSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
false
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.ActionContext;
import org.xmeta.Thing;

if(dataTree.getSelection().length == 0) return;

def template = dataTree.getSelection()[0].getData();
if(template != null){
    def worldDescriptor = template.getThing("InputThing@0");
    if(worldDescriptor != null){
        Thing words = new Thing(worldDescriptor.metadata.path);
        templateWordsEditor.editorActions.doAction("setThing", ["thing":words]);        
    }else{
        Thing words = new Thing();
        templateWordsEditor.editorActions.doAction("setThing", ["thing":words]);        
    }
        
    mainCompositeStackLayout.topControl = templateComposite;
    mainComposite.layout();	
}else{
    log.info("tempalte is null");
}



/*
def data = listTree.getSelection()[0].getData();
if(data.value != null){
    if(data.type == "xworker.example"){
        def globalCfg = world.getThing("_local.xworker.config.GlobalConfig");
        explorerActions.doAction("openUrl", ["url":globalCfg.getString("webUrl") + "do?sc=" + 
                data.value.getString("xworker.exampleThing")]);
    }else if(data.type == "template"){    
        for(child in templateWordsComposite.getChildren()){
            child.dispose();
            templateWordsComposite.removeControl(child);
        }
            
        //设置模板的词汇节点
        def thing = data.value;
        if(thing.getBoolean("isNode")){
            return;
        }
        def worldDescriptor = thing.getThing("InputThing@0");
        if(worldDescriptor != null){
            Thing structForm = new Thing();
            structForm.put("descriptors", "xworker.swt.xworker.ThingDescritporForm");
            structForm.name = "contentForm";
            structForm.descriptorPath = worldDescriptor.metadata.path;
            structForm.H_SCROLL = "true";
            structForm.V_SCROLL = "true";

            ActionContext newContext = new ActionContext();
            newContext.put("explorerActions", explorerActions);
            newContext.put("explorerContext", explorerContext);
            newContext.put("thingContext", actionContext);
            newContext.put("parent", templateWordsComposite);
            newContext.put("utilBrowser", utilBrowser);

            def structFormObj = structForm.doAction("create", newContext);      
            newContext = structFormObj.getData();       
            newContext.contentFormModel.doAction("init", newContext);
            newContext.contentFormModel.doAction("setValue", newContext);
            
            templateWordsComposite.layout();
            
            actionContext.put("templateModel", newContext.contentFormModel);  
            actionContext.put("templateContext", newContext);          
        }else{
            actionContext.put("templateModel", null); 
        }

        mainCompositeStackLayout.topControl = templateComposite;
        mainComposite.layout();
    }
}
*/
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@lopenButton/@RowData
sname
RowData
sexclude
false
swidth
80
sheight
-1
sid
RowData
slabel
RowData
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@leditButton
sname
leditButton
stext
label:xworker.ide.worldexplorer.swt.i18n.I18nResource/@buttons/@editButton
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
false
sredraw
true
svisible
true
sxw_cl_global
false
sid
leditButton
slabel
leditButton
sdescriptors
xworker.swt.Widgets/@Button
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@leditButton/@Listeners
sname
Listeners
sid
Listeners
slabel
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@leditButton/@Listeners/@leditButtonSelection
sname
leditButtonSelection
stype
Selection
sid
leditButtonSelection
slabel
leditButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@leditButton/@Listeners/@leditButtonSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Thing;

if(dataTree.getSelection().length == 0) return;

def template = dataTree.getSelection()[0].getData();
if(template != null){
    explorerActions.doAction("openThing", ["thing":template]);
}
#$@text#$@
sid
GroovyAction
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@listComposite/@listButtonComposite/@leditButton/@RowData
sname
RowData
sexclude
false
swidth
80
sheight
-1
sid
RowData
slabel
RowData
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@init
sname
init
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;

if(actionContext.get("utilBrowser") != null){
    utilBrowser.attach(descBrowser);
    utilBrowser.attach(helpBrowser);
}

//初始化关联模板的数据
searchButtonSelection.handleEvent(null);

def config = world.get("_local.xworker.config.GlobalConfig");
helpBrowser.setUrl(config.webUrl + "do?sc=xworker.ide.worldexplorer.swt.http.ThingDoc/@desc&thing=xworker.ide.relations.MetaThingRelation/@templateCategory");
#$@text#$@
sid
init
sdescriptors
xworker.swt.Widgets/@Code
@xworker.ide.relations.TemplateCompoiste/@shell/@mainComposite/@mainCompositeStackLayout
sname
mainCompositeStackLayout
stopControl
listComposite
sid
mainCompositeStackLayout
slabel
mainCompositeStackLayout
sdescriptors
xworker.swt.Layouts/@StackLayout
