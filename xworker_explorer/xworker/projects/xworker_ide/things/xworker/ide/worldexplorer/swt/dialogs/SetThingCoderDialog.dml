%1498648460384
@
sname=shell
stext=lang:d=设置事物编码&en=Set Thing Code Type
sNO_TRIM=false
sCLOSE=true
sTITLE=true
sMIN=true
sMAX=true
sBORDER=false
sRESIZE=true
sON_TOP=false
sTOOL=false
sNO_FOCUS=false
swidth=800
sheight=600
scenterScreen=true
spack=false
smaximized=false
sfullScreen=false
sdesign=true
sisIde=false
sdesignDefaultOpen=false
sexitOnDispose=false
sH_SCROLL=false
sV_SCROLL=false
sNO_BACKGROUND=false
sNO_MERGE_PAINTS=false
sNO_REDRAW_RESIZE=false
sNO_RADIO_GROUP=false
sEMBEDDED=false
sDOUBLE_BUFFERED=false
slabel=SetThingCoderDialog
scapture=false
senabled=true
sredraw=true
svisible=true
sdescriptors=xworker.swt.widgets.Shell
sinheritDescription=false
sth_createIndex=false
sth_registMyChilds=false
sth_registDisabled=false
sth_mark=false
  @/@shellGridLayout
  sname=shellGridLayout
  smakeColumnsEqualWidth=false
  smarginWidth=5
  smarginHeight=5
  smarginLeft=0
  smarginTop=0
  smarginRight=0
  smarginBottom=0
  shorizontalSpacing=5
  sverticalSpacing=5
  sdescriptors=xworker.swt.Layouts/@GridLayout
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=shellGridLayout
  @/@form
  sname=form
  scolumn=1
  sH_SCROLL=true
  sV_SCROLL=true
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  sdescriptors=xworker.swt.Widgets/@ThingForm
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=form
    @/@form/@formGridData
    sname=formGridData
    sstyle=FILL_BOTH
    shorizontalIndent=0
    swidth=-1
    sheight=-1
    shorizontalAlignment=BEGINNING
    sverticalAlignment=CENTER
    shorizontalSpan=1
    sverticalSpan=1
    sgrabExcessHorizontalSpace=false
    sgrabExcessVerticalSpace=false
    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=formGridData
    @/@form/@Thing
    sname=Thing
    sdescriptors=xworker.swt.xworker.ThingForm/@Thing
    smany=true
    seditCols=2
    sinitialization=false
    smodifier=public
    sinheritDescription=false
    snotXmlAttribute=false
    sjson_isArray=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Thing
      @/@form/@Thing/@currentType
      sname=currentType
      slabel=当前编码
      sinputtype=label
      sshowLabel=true
      sreadOnly=false
      sinheritDescription=false
      svalidateAllowBlank=true
      LvalidateOnBlur=true
      LallowDecimals=true
      LallowNegative=true
      snotXmlAttribute=false
      sen_label=Current Type
      sdescriptors=xworker.lang.MetaDescriptor3/@attribute
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=currentType
      @/@form/@Thing/@types
      sname=setType
      slabel=新编码
      sinputtype=select
      sshowLabel=true
      sreadOnly=false
      sinheritDescription=false
      svalidateAllowBlank=false
      sblankText=新编码不能为空，请选择一个编码。
      LvalidateOnBlur=true
      LallowDecimals=true
      LallowNegative=true
      snotXmlAttribute=false
      srelationDataObject=xworker.things.p2016.p12.p29.ThingCoder
      srelationValueField=name
      srelationLabelField=label
      sen_label=New Type
      sdescriptors=xworker.lang.MetaDescriptor3/@attribute
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=types
      @/@form/@Thing/@description
      sname=description
      slabel=说明
      sinputtype=htmlDesc
      sshowLabel=true
      sreadOnly=false
      sdefault=xworker.ide.worldexplorer.swt.dialogs.SetThingCoderDialog/@form/@Thing/@description
      sinheritDescription=false
      Sdescription=
#$@text#$@
<p><strong>常用编码系列是：</strong></p>

<ul>
	<li><strong>dml</strong><br />
	Dynamic Model Lanuage的缩写，是动态模型编程的缩写，目前常用这个编码系列。<br />
	&nbsp;</li>
	<li><strong>dmw</strong><br />
	和dml类似，区别是dmw是为windows准备的，目的是使用javaw.exe执行动态模型，而不是使用java.exe，这样执行时可以 不用显示控制台。<br />
	目前linux和macos下不显示控制台的方法还未找到。</li>
</ul>

<p><strong>常用编码格式：</strong></p>

<ul>
	<li><strong>properties</strong><br />
	是XWorker的默认格式，类似Java的properties文件，每一行是一个key=value格式的文本，带缩进。<br />
	&nbsp;</li>
	<li><strong>xml</strong><br />
	为手工编写和人工阅读而用，也可方便在网络(HTML)中显示代码。优点是文件体积小（因为不保存默认值），缺点是速度稍慢和有些功能不支持，比如模型A和B如果是相互为类，即A是B的类同时B也是A的类的时候会无限递归。<br />
	由于两个模型之间互为类的情况很罕见，所以一般情况下使用xml编码是没有问题的，使用的时候规避这一点就好。</li>
</ul>

<p>&nbsp;</p>
#$@text#$@
      svalidateAllowBlank=true
      LvalidateOnBlur=true
      LallowDecimals=true
      LallowNegative=true
      snotXmlAttribute=false
      sen_label=Description
      sdescriptors=xworker.lang.MetaDescriptor3/@attribute
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=description
  @/@6766
  sname=buttonComposite
  sBORDER=false
  sH_SCROLL=false
  sV_SCROLL=false
  sNO_BACKGROUND=false
  sNO_FOCUS=false
  sNO_MERGE_PAINTS=false
  sNO_REDRAW_RESIZE=false
  sNO_RADIO_GROUP=false
  sEMBEDDED=false
  sDOUBLE_BUFFERED=false
  scapture=false
  senabled=true
  sredraw=true
  svisible=true
  sdescriptors=xworker.swt.Widgets/@Composite
  sid=6766
    @/@6766/@6767
    sname=buttonCompositeGridData
    sstyle=FILL_HORIZONTAL
    shorizontalIndent=0
    swidth=-1
    sheight=-1
    shorizontalAlignment=END
    sverticalAlignment=CENTER
    shorizontalSpan=1
    sverticalSpan=1
    sgrabExcessHorizontalSpace=false
    sgrabExcessVerticalSpace=false
    sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
    sid=6767
    @/@6766/@6768
    sname=buttonCompositeRowLayout
    sfill=false
    sjustify=false
    smarginWidth=0
    smarginHeight=0
    smarginLeft=3
    smarginTop=3
    smarginRight=3
    smarginBottom=3
    spack=true
    sspacing=3
    stype=SWT.HORIZONTAL
    swrap=true
    sdescriptors=xworker.swt.Layouts/@RowLayout
    sid=6768
    @/@6766/@6769
    sname=okButton
    stext=lang:d=确定(&O)&en=Ok(&amp;O)
    stype=SWT.PUSH
    sflat=false
    sborder=false
    sselected=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.Widgets/@Button
    sth_createIndex=false
    sid=6769
      @/@6766/@6769/@6770
      sname=RowData
      sexclude=false
      swidth=80
      sheight=-1
      sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
      sth_createIndex=false
      sid=6770
      @/@6766/@6769/@6771
      sname=Listeners
      sdescriptors=xworker.swt.widgets.Widget/@Listeners
      sth_createIndex=false
      sid=6771
        @/@6766/@6769/@6771/@6772
        sname=okButtonSelection
        stype=Selection
        sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
        sth_createIndex=false
        sid=6772
          @/@6766/@6769/@6771/@6772/@GroovyAction
          sname=GroovyAction
          sisSynchronized=false
          sthrowException=true
          suseOtherAction=false
          svarScope=Local
          sdisableGlobalContext=false
          Scode=
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

if(form.doAction("validate", actionContext)){
    def values = form.doAction("getValues", actionContext);
    if(values.setType != null){
        //设置编码
        currentThing.getRoot().getMetadata().setCoderType(values.setType);
        
        //保存
        editorActions.doAction("save");
    }
    
    shell.dispose();
}
#$@text#$@
          sinterpretationType=Action
          screateLocalVarScope=false
          ssaveReturn=false
          sdebugLog=false
          sdescriptors=xworker.lang.actions.Actions/@GroovyAction
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=GroovyAction
    @/@6766/@6773
    sname=cancelButton
    stext=lang:d=取消(&C)&en=Cancel(&amp;C)
    stype=SWT.PUSH
    sflat=false
    sborder=false
    sselected=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.swt.Widgets/@Button
    sth_createIndex=false
    sid=6773
      @/@6766/@6773/@6774
      sname=RowData
      sexclude=false
      swidth=80
      sheight=-1
      sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
      sth_createIndex=false
      sid=6774
      @/@6766/@6773/@6775
      sname=Listeners
      sdescriptors=xworker.swt.widgets.Widget/@Listeners
      sth_createIndex=false
      sid=6775
        @/@6766/@6773/@6775/@6776
        sname=cancelButtonSelection
        stype=Selection
        sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
        sth_createIndex=false
        sid=6776
          @/@6766/@6773/@6775/@6776/@Dispose
          sname=Dispose
          scontrolList=shell
          sinterpretationType=Self
          sattributeTemplate=false
          schildsAttributeTemplate=false
          svarScope=Local
          sisSynchronized=false
          sthrowException=true
          suseOtherAction=false
          screateLocalVarScope=false
          ssaveReturn=false
          sdisableGlobalContext=false
          sdebugLog=false
          sdescriptors=xworker.swt.actions.ControlActions/@Dispose
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=Dispose
  @/@init
  sname=init
  sisSynchronized=false
  sthrowException=true
  suseOtherAction=false
  svarScope=Local
  sdisableGlobalContext=false
  Scode=
#$@text#$@
//设置事物的编码
def coder = currentThing.getRoot().getMetadata().getCoderType();
def values = ["currentType":coder, "setType":coder];

form.doAction("setPartialValues", actionContext, "values", values);
#$@text#$@
  sinterpretationType=Action
  screateLocalVarScope=false
  ssaveReturn=false
  sdebugLog=false
  sdescriptors=xworker.swt.widgets.Widget/@Code
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=init
