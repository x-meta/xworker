^1447156253058
@
sname
DesignerCommandDomain
slabel
SWT设计器命令
sextends
xworker.lang.command.BaseDomain
sparentShell
var:parentShell
sdescription
<p>SWT设计器命令空间。</p>
sdescriptors
xworker.lang.command.CommandDomain
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands
sname
OtherCommands
sdescriptors
xworker.lang.command.CommandDomain/@OtherCommands
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@list_nodes
sname
list_nodes
slabel
事物节点列表
shasContents
true
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@list_nodes/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@list_nodes/@actions/@getContents
sname
getContents
sisSynchronized
false
sthrowException
true
suseOtherAction
false
suseOuterJava
true
suseInnerJava
false
souterClassName
xworker.ide.command.ThingEditorCommand
smethodName
list_nodesContents
sdisableGlobalContext
false
sattributeTemplate
false
sinterpretationType
Action
svarScope
Global
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@JavaAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@list_add_childs
sname
list_add_childs
slabel
可添加子节点列表
shasContents
true
sdescriptors
xworker.lang.command.CommandDomain/@OtherCommands/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@list_add_childs/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@list_add_childs/@actions/@run
sname
getContents
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.swt.xwidgets.SelectContent;

if(actionContext.get("doInitChildTree") == false){
    //如果子节点树没有初始化，那么初始化
    actionContext.getScope(0).put("doInitChildTree", true);
    descriptsComboSelection.handleEvent(null);
}

//查找子节点
def dess = childScripts.doAction("searchChilds", actionContext, ["keyword": text]);

def contents = [];
for(des in dess){
    def content = new SelectContent(des.getMetadata().getLabel(), des);
    contents.add(content);
}

return contents;
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@SelectThingAttributes
sname
SelectThingAttributes
slabel
选择事物属性
shasContents
true
sdescriptors
xworker.lang.command.CommandDomain/@OtherCommands/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@SelectThingAttributes/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@OtherCommands/@SelectThingAttributes/@actions/@run
sname
getContents
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.swt.xwidgets.SelectContent;
import xworker.util.UtilData;
if(text == null){
	text = "";
}

text = text.toLowerCase();
def txts = text.split("[ ]");
def contents = [];
def context = [:];
for(des in currentThing.getAllAttributesDescriptors()){
    def name = des.getMetadata().getName();
    def label= name +  "(" + des.getMetadata().getLabel() + ")";
    label = label.toLowerCase();
    if(UtilData.indexHas(label, txts) && context.get(name) == null){
        def content = new SelectContent(label, label, name,name );
        contents.add(content);
        
        context.put(name, name);
    }
}

return contents;
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select
sname
find
slabel
查找事物
shasContents
false
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select/@actions/@run1
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
scode
actions.doAction("selectThing", actionContext, ["thing": thingNode]);
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select/@thing
sname
thingNode
slabel
事物节点
scommand
xworker.ide.worldexplorer.swt.command.ThingEditorCommandDomain/@OtherCommands/@list_nodes
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@add1
sname
add
slabel
添加子节点
shasContents
false
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@add1/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@add1/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;
import org.xmeta.Thing;

//检查事物是否已经变更
def checkedThing = actions.doAction("checkThing", ["thing":currentThing]);
if(checkedThing == null || checkedThing instanceof String){
    return;
}
currentThing = checkedThing;


//def selectIndex = childList.getSelectionIndex();
def childStructure = descriptor;
if(childStructure == null){
    return;
}

def childData = ["name": name];

//创建和添加子节点
Thing childObj = new Thing(null, null, childStructure.metadata.path, false);
childObj.cognize(childData);
childObj.set("descriptors", childStructure.metadata.path);        

def treeItem = innerOutline.getSelection()[0];
currentThing.addChild(childObj);
currentThing.save();
actionContext.getScope(0).put("rootLastModified", currentThing.getRoot().getMetadata().getLastModified());
currentThing = world.getThing(currentThing.metadata.path);
childObj = currentThing.childs.get(currentThing.childs.size() - 1);

TreeItem newItem = new TreeItem(treeItem, SWT.NONE);
actions.doAction("initOutlineTreeItem", actionContext, ["treeItem": newItem, "thing": childObj]);
currentAddModel.doAction("setValue", currentAddModelContext);

treeItem.setExpanded(true);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@add1/@actions/@run/@returnValue
sisValidate
false
sname
returnValue
sdescriptors
xworker.lang.actions.Inout/@returnValue
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@add1/@descritpor
sname
descriptor
slabel
子节点描述者
scommand
xworker.ide.worldexplorer.swt.command.ThingEditorCommandDomain/@OtherCommands/@list_add_childs
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@add1/@name
sname
name
slabel
名称
scommand
xworker.lang.command.BaseDomain/@OtherCommands/@InputText
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@remove
sname
delete
slabel
删除节点
shasContents
false
sdescription
<p>删除当前选中的节点？</p>
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@remove/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@remove/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def treeItem = innerOutline.getSelection()[0];
def parentTreeItem = treeItem.getParentItem();
treeItem.dispose();

def parent = currentThing.getParent();
parent.removeChild(currentThing);
parent.save();
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@remove/@choice
sname
choice
slabel
选择
scommand
xworker.lang.command.BaseDomain/@OtherCommands/@YesNo
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@set
sname
set
slabel
设置属性
shasContents
false
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@set/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@set/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def ovalues = currentModel.doAction("getValue", currentModelContext);
ovalues.put(name, value);
currentModel.doAction("setValue", currentModelContext, ["thingAttributes": ovalues]);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@set/@attributeName
sname
name
slabel
属性名
scommand
xworker.ide.worldexplorer.swt.command.ThingEditorCommandDomain/@OtherCommands/@SelectThingAttributes
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@set/@value
sname
value
slabel
属性值
scommand
xworker.lang.command.BaseDomain/@OtherCommands/@InputText
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@Save
sname
Save
slabel
保存
shasContents
false
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@Save/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@Save/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
scode
okButtonSelection.handleEvent(null);
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select1
sname
view
slabel
查看控件
shasContents
false
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select1/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@select1/@actions/@run
sname
vrun
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.ActionContext;

def ac = new ActionContext();
def domainContext = commandExecutor.getActionContext();
ac.put("parent", domainContext.get("shell"));
ac.put("control", domainContext.get("control"));
ac.put("ec", actionContext);

def shellThing = world.getThing("xworker.ide.worldexplorer.swt.designer.CmdSelectShell");
def shell = shellThing.doAction("create", ac);
shell.open();
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@edit
sname
edit
slabel
编辑属性
shasContents
false
sdescriptors
xworker.lang.command.CommandDomain/@Command
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@edit/@actions
sname
actions
sdescriptors
xworker.lang.command.CommandDomain/@Command/@actions
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@edit/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.ActionContext;
import org.xmeta.Thing;

//属性的描述者
def descriptor = currentThing.getAttributeDescriptor(name);

if(descriptor != null){
    def ac = new ActionContext();
    ac.put("parent", commandExecutor.getActionContext().get("shell"));
    ac.put("thing", currentThing.getRoot().getMetadata().getPath());
    ac.put("currentThing", currentThing);
    ac.put("ec", actionContext);
    
    def thing = new Thing("xworker.lang.MetaDescriptor3");
    thing.addChild(descriptor.detach());
    
    def ovalues = currentModel.doAction("getValue", currentModelContext);
    
    def newThing = new Thing(thing.getMetadata().getPath());
    newThing.put(name, ovalues.get(name));
    
    def shellThing = world.getThing("xworker.ide.worldexplorer.swt.command.EditAttributeShell");
    def shell = shellThing.doAction("create", ac);   
    ac.thingForm.doAction("setThing", ac, ["thing": newThing]);    
    shell.open();
    ac.thingForm.doAction("setFocus", ac);
    
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
@/@edit/@attributeName
sname
name
slabel
属性名
scommand
xworker.ide.worldexplorer.swt.command.ThingEditorCommandDomain/@OtherCommands/@SelectThingAttributes
sdescriptors
xworker.lang.command.CommandDomain/@Command/@Parameter
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
