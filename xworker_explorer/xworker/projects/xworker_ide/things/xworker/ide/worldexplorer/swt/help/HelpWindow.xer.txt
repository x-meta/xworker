@xworker.ide.worldexplorer.swt.help.HelpWindow
sname
HelpWindow
slabel
HelpWindow
sdescriptors
xworker.swt.widgets.Display
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell
sname
shell
stext
"帮助"
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
true
sMAX
true
sBORDER
false
sRESIZE
true
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
-1
sheight
-1
scenterScreen
true
spack
false
smaximized
true
sfullScreen
true
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.widgets.Display/@Shell
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@shellGridLayout
sname
shellGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite
sname
addressComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
addressComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@addressCompositeGridData
sname
addressCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sid
addressCompositeGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@addressCompositeGridLayout
sname
addressCompositeGridLayout
snumColumns
2
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sid
addressCompositeGridLayout
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar
sname
buttonToolBar
stype
HORIZONTAL
sFLAT
true
sWRAP
false
sBORDER
false
sSHADOW_OUT
false
sRIGHT
false
sid
buttonToolBar
sdescriptors
xworker.swt.Widgets/@ToolBar
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@backButton
sname
backButton
stype
PUSH
stext
"返回"
sid
backButton
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@backButton/@listeners
sname
listeners
sid
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@backButton/@listeners/@commonButtonSelection
sname
commonButtonSelection
stype
Selection
sid
commonButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@backButton/@listeners/@commonButtonSelection/@script
sname
script
sisSynchronized
false
sthrowException
false
suseOtherAction
false
svarScope
Global
Scode
#$@text#$@
def item = event.widget;
if (item == backButton) browser.back(); 
else if (item == forwardButton) browser.forward();
else if (item == stopButton) browser.stop();
else if (item == refreshButton) browser.refresh();
else if (item == goButton) browser.setUrl(addressText.getText());
#$@text#$@
sid
script
sdescriptors
xworker.lang.actions.GroovyAction
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@fowardButton
sname
forwardButton
stype
PUSH
stext
"前进"
sid
fowardButton
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@fowardButton/@listeners
sname
listeners
sid
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@fowardButton/@listeners/@forwardButtonSelection
sname
forwardButtonSelection
stype
Selection
sref
commonButtonSelection
sid
forwardButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@stopButton
sname
stopButton
stype
PUSH
stext
"停止"
sid
stopButton
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@stopButton/@listeners
sname
listeners
sid
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@stopButton/@listeners/@stopButtonSelection
sname
stopButtonSelection
stype
Selection
sref
commonButtonSelection
sid
stopButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@refreshButton
sname
refreshButton
stype
PUSH
stext
"刷新"
sid
refreshButton
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@refreshButton/@listeners
sname
listeners
sid
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@buttonToolBar/@refreshButton/@listeners/@refreshButtonSelection
sname
refreshButtonSelection
stype
Selection
sref
commonButtonSelection
sid
refreshButtonSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@addressText
sname
addressText
sstyle
SINGLE
sH_SCROLL
false
sV_SCROLL
false
sWRAP
false
sREAD_ONLY
true
sPASSWORD
false
sSEARCH
false
sCANCEL
false
sBORDER
true
salign
LEFT
scapture
false
senabled
true
sredraw
true
svisible
true
sid
addressText
sdescriptors
xworker.swt.Widgets/@Text
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@addressComposite/@addressText/@addressTextGridData
sname
addressTextGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sid
addressTextGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@browser
sname
browser
sBRODER
false
sMOZILLA
false
sNO_FOCUS
false
sdescriptors
xworker.swt.Widgets/@Browser
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@browser/@borwserGridData
sname
borwserGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@statusComposite
sname
statusComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sid
statusComposite
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@statusComposite/@statusCompositeGridLayout
sname
statusCompositeGridLayout
snumColumns
2
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sid
statusCompositeGridLayout
sdescriptors
xworker.swt.Layouts/@GridLayout
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@statusComposite/@statusCompositeGridData
sname
statusCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sid
statusCompositeGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@statusComposite/@statusLabel
sname
statusLabel
stext
"                               "
stype
HORIZONTAL
sshadow
SHADOW_OUT
sBORDER
false
salignment
LEFT
sid
statusLabel
sdescriptors
xworker.swt.Widgets/@Label
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@statusComposite/@statusLabel/@statusLabelGridData
sname
statusLabelGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sid
statusLabelGridData
sdescriptors
xworker.swt.Commons/@GridData
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@statusComposite/@progressBar
sname
progressBar
sstyle
HORIZONTAL
sSMOOTH
false
sINDETERMINATE
false
sBORDER
false
sid
progressBar
sdescriptors
xworker.swt.Widgets/@ProgressBar
@xworker.ide.worldexplorer.swt.help.HelpWindow/@shell/@init
sname
init
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
Scode
#$@text#$@
import org.eclipse.swt.browser.StatusTextListener;
import org.eclipse.swt.browser.ProgressListener;
import org.eclipse.swt.browser.TitleListener;
import org.eclipse.swt.browser.LocationListener;

def globalCfg = world.getThing("_local.xworker.config.GlobalConfig");
browser.setUrl("http.//localhost." + globalCfg.getString("webPort") + "/do?sc=xworker.HtmlDoc/@index");

//添加utilBrowser如果存在
def utilBrowser = actionContext.get("utilBrowser");
if(utilBrowser != null && utilBrowser instanceof StatusTextListener){
    browser.addStatusTextListener(utilBrowser);
}

titleListener = [
    changed : {event ->
        shell.setText(event.title);
    }
] as TitleListener;   
browser.addTitleListener(titleListener); 
    
progressListener = [
    changed : {event ->
        if(event.widget != browser) return;
        
        if (event.total == 0) return;                            
		int ratio = event.current * 100 / event.total;
		if (progressBar != null) progressBar.setSelection(ratio);		
    },
    completed : {event ->
        if(event.widget != browser) return;
        if (progressBar != null) progressBar.setSelection(0);
        
		backButton.setEnabled(browser.isBackEnabled());
		forwardButton.setEnabled(browser.isForwardEnabled());
    }] as ProgressListener;    
browser.addProgressListener(progressListener);

statusTextListener = [
    changed : {event ->
        if(event.widget != browser) return;
        statusLabel.setText(event.text);
        statusLabel.pack();
    }
] as StatusTextListener;
browser.addStatusTextListener(statusTextListener);

locationListener = [
    changed : {event ->
        if (event.top) addressText.setText(event.location);
    },
    
    changing : {event ->
    }
] as LocationListener;
browser.addLocationListener(locationListener);
#$@text#$@
sdescriptors
xworker.swt.Widgets/@Code
