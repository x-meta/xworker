^1393494178897
@xworker.cocos2d.editors.ResourceEditor
sname
shell
stext
资源编辑器
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
true
sMAX
true
sBORDER
false
sRESIZE
true
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
800
sheight
600
scenterScreen
true
spack
false
smaximized
false
sfullScreen
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
slabel
ResourceEditor
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.Shell
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@shellFillLayout
sname
shellFillLayout
stype
SWT.HORIZONTAL
sxw_cl_global
false
sdescriptors
xworker.swt.Layouts/@FillLayout
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@setCocos2dProject
sname
setCocos2dProject
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(actionContext.get("cocos2dProject") == null){
    //currentThing是通过编辑界面传入的
    actionContext.getScope(0).put("cocos2dProject", actionContext.get("currentThing"));
    log.info("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" + actionContext.get("currentThing"));
}

log.info("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.swt.Widgets/@Code
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite
sname
mainComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainCompositeGridLayout
sname
mainCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm
sname
mainSashForm
sstyle
HORIZONTAL
sSMOOTH
false
sweights
30,70
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@SashForm
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@mainSashFormGridData
sname
mainSashFormGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree
sname
tree
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
false
sHIDE_SELECTION
false
sBORDER
false
slineVisible
false
smultipleColumns
false
sheaderVisible
false
ssortIndicator
false
smoveableColumns
false
sheadImages
false
ssubImages
false
scheckSelection
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Tree
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels
sname
TreeModels
sdescriptors
xworker.swt.widgets.Tree/@treeModels
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels/@treeModel
sname
treeModel
srootVisiable
false
sbindToParent
true
smultiSubModel
false
srootNodeId
__TreeNodeRootId__
smultiSubModelSeparator
-
sloadBackground
false
saddTabUrl
false
sdescriptors
xworker.app.model.tree.TreeModels/@TreeModel
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels/@treeModel/@actions
sname
actions
sdescriptors
xworker.app.model.tree.TreeModel/@13208
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels/@treeModel/@actions/@getRoot
sname
getRoot
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
scode
return [id:0];
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels/@treeModel/@actions/@getChilds
sname
getChilds
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(id == 0){
    def list =[];
    def category = world.getThing("xworker.cocos2d.resource.ResourceTypes/@ResourceCategorys");
    for(child in category.getChilds()){
        list.add([id: child.get("name"), text: child.getMetadata().getLabel(), leaf:"true", icon: child.getString("icon")]);
    }
    list.add([id:"resourceGroup", text:"资源组", leaf:"false", icon:"icons/folder.png"]);
    
    return list;
}else if(id == "resourceGroup"){
    def category = cocos2dProject.getMetadata().getCategory();
    def resources = category.getThing("Resources");
    def list = [];
    if(resources != null){    
        for(group in resources.get("ResourceGroup@")){
            def data = [:];
            data.put("id", "group_" + group.getMetadata().getName());
            data.put("text", group.getMetadata().getName());
            data.put("dataId", group.getMetadata().getPath());
            data.put("icon", "icons/text_list_bullets.png");
            list.add(data);
        }
    }
    return list;
}
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels/@treeModel/@Root
sname
Root
Lleaf
false
shref
#
LallowChildren
true
LallowDrag
true
LallowDrop
true
Lchecked
false
Ldisabled
false
Ldraggable
false
Leditable
true
Lexpandable
false
Lexpanded
false
Lhidden
false
LisTarget
true
LsingleClickExpand
false
sdescriptors
xworker.app.model.tree.TreeModel/@Root
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@TreeModels/@treeModel/@Root/@children
sname
children
Lleaf
false
shref
#
LallowChildren
true
LallowDrag
true
LallowDrop
true
Lchecked
false
Ldisabled
false
Ldraggable
false
Leditable
true
Lexpandable
false
Lexpanded
false
Lhidden
false
LisTarget
true
LsingleClickExpand
false
sdescriptors
xworker.app.model.tree.TreeNode/@children
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@Listeners
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@Listeners/@treeSelection
sname
treeSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@tree/@Listeners/@treeSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def data = event.item.getData();
if(data.id == "image"){
    contentStackLayout.topControl = imageEditorComposite;
    contentComposite.layout();
}else if(data.id == "audio"){
    contentStackLayout.topControl = audioEditorComposite;
    contentComposite.layout();
}else if(data.id == "animation"){
    contentStackLayout.topControl = animationEditorComposite;
    contentComposite.layout();
}else if(data.id == "resourceGroup"){
    contentStackLayout.topControl = resourceGroupEditorComposite;
    contentComposite.layout();
}else if(data.id.startsWith("group_")){    
    contentStackLayout.topControl = groupEditorComposite;
    contentComposite.layout();  

    groupEditorContext.getScope(0).put("groupPath", data.dataId);
    groupEditorContext.actions.doAction("setGroupPath", groupEditorContext);  
}
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite
sname
contentComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@imageEditorComposite
sname
imageEditorComposite
sextendWidgetPath
xworker.cocos2d.editors.ImageEditor/@mainComposite
snewActionContext
true
snewActionContextName
imageEditorContext
sdescriptors
xworker.swt.Widgets/@ExtendWidget
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@contentStackLayout
sname
contentStackLayout
sdescriptors
xworker.swt.Layouts/@StackLayout
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite
sname
resourceGroupEditorComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@resourceGroupAddForm
sname
resourceGroupAddForm
scolumn
1
sH_SCROLL
true
sV_SCROLL
true
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sdescriptors
xworker.swt.Widgets/@ThingForm
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@resourceGroupAddForm/@Thing
sname
Thing
sdescriptors
xworker.swt.xworker.ThingForm/@Thing
smany
true
seditCols
2
sinitialization
false
smodifier
public
sinheritDescription
false
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@resourceGroupAddForm/@Thing/@name
sname
name
slabel
分组名称
sshowLabel
true
ssize
40
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@resourceGroupAddForm/@resourceGroupAddFormGridData
sname
resourceGroupAddFormGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466
sname
resourceGroupButtonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12467
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12468
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12469
sname
addResourceGroupButton
stext
添加资源分组
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12469/@12470
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12469/@12471
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12469/@12471/@12472
sname
addResourceGroupButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@12466/@12469/@12471/@12472/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;
import org.eclipse.swt.widgets.TreeItem;

import org.xmeta.Thing;
import xworker.swt.util.ResourceManager;

def shell = addResourceGroupButton.getShell();
//分组名不能为空
def values = resourceGroupAddForm.doAction("getValues", actionContext);
def groupName = values.get("name");
if(groupName == null || groupName == ""){
    def box = new MessageBox(shell, SWT.ICON_WARNING | SWT.OK);
    box.setText("添加资源分组");
    box.setMessage("请输入资源分组名称！");
    box.open();
    return;
}

//是否存在资源事物
def category = cocos2dProject.getMetadata().getCategory();
def resources = category.getThing("Resources");
if(resources == null){
    def box = new MessageBox(shell, SWT.ICON_WARNING | SWT.OK);
    box.setText("添加资源分组");
    box.setMessage("请先创建资源文件，可以通过Cocos2dApp的菜单->设置->初始化环境创建！");
    box.open();
    return;
}

//是否分组已存在
def groups = resources.get("ResourceGroup@");
for(group in groups){
    if(group.getMetadata().getName() == groupName){
        def box = new MessageBox(shell, SWT.ICON_WARNING | SWT.OK);
        box.setText("添加资源分组");
        box.setMessage("相同名称的分组已经存在，请输入其他分组名称。");
        box.open();
        return;
    }
}

//添加分组
def thing = new Thing("xworker.cocos2d.resource.Resource/@ResourceGroup");
thing.set("name", groupName);
resources.addChild(thing);
resources.save();

def parentTreeItem = tree.getSelection()[0];
def item = new TreeItem(parentTreeItem, SWT.NONE);
item.setText(groupName);
item.setData([id: "resGroup_" + groupName, dataId: groupName]);
def image = ResourceManager.createIamge("icons/text_list_bullets.png", actionContext);
if(image != null){
    item.setImage(image);
}
parentTreeItem.setExpanded(true);
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@resourceGroupEditorComposite/@resourceGroupEditorCompositeGridLayout
sname
resourceGroupEditorCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@audioEditorComposite
sname
audioEditorComposite
sextendWidgetPath
xworker.cocos2d.editors.AudioEditor/@mainComposite
snewActionContext
true
snewActionContextName
audioEditorContext
sdescriptors
xworker.swt.Widgets/@ExtendWidget
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@animationEditorComposite
sname
animationEditorComposite
sextendWidgetPath
xworker.cocos2d.editors.AnimationEditor/@mainComposite
snewActionContext
true
snewActionContextName
animationEditorContext
sdescriptors
xworker.swt.Widgets/@ExtendWidget
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@mainSashForm/@contentComposite/@groupEditorComposite
sname
groupEditorComposite
sextendWidgetPath
xworker.cocos2d.editors.ResourceGroupEditor/@mainComposite
snewActionContext
true
snewActionContextName
groupEditorContext
sdescriptors
xworker.swt.Widgets/@ExtendWidget
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@actions
sname
actions
sdescriptors
xworker.swt.Widgets/@actions
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@mainComposite/@actions/@getResourceThing
sname
getResourceGroups
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.project.index.ProjectThingIndexManager;

def resources = ProjectThingIndexManager.getThingsByDescriptor("xworker.cocos2d.resource.Resource", currentThing, actionContxt);
if(resources != null && resoures.size() > 0){
    return resources.get(0);
}else{
    return null;
}
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
@xworker.cocos2d.editors.ResourceEditor/@init
sname
init
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.project.index.ProjectThingIndexManager;

def resource = null;
def currentThing = actionContext.get("currentThing");
def resources = ProjectThingIndexManager.getThingsByDescriptor("xworker.cocos2d.resource.Resource", currentThing, actionContext);
if(resources != null && resources.size() > 0){
    resource = resources.get(0);
    actionContext.getScope(0).put("resource", resource);
    
    def cocos2dApp = ProjectThingIndexManager.getThingsByDescriptor("xworker.cocos2d.Cocos2dApp", currentThing, actionContext);
    if(cocos2dApp == null){   
        def box = new MessageBox(shell, SWT.ICON_WARNING | SWT.OK);
        box.setText("资源编辑器");
        box.setMessage("未找到Cocos2d应用事物，请在Cocos2d项目下创建一个xworker.cocos2d.Cocos2dApp资源事物");
        box.open();
        return;
    }
}else{
    def box = new MessageBox(shell, SWT.ICON_WARNING | SWT.OK);
    box.setText("资源编辑器");
    box.setMessage("未找到资源事物，请在Cocos2d项目下创建一个xworker.cocos2d.resource.Resource资源事物");
    box.open();
}
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.swt.Widgets/@Code
sth_createIndex
false
sregistMyChilds
false
sth_mark
false
