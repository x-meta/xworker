%1516675515300
@
sname=ChangeAngularjsData
slabel=从外部改变controller内的数据
stype=thingDesc
sicon=icons/html.png
sstyledTextForInsert=parentContext.parentContext.codeText
suseTargetThingDoc=false
Sdescription=
#$@text#$@
<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.8; font-weight: 400; box-sizing: border-box;">var </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">appElement = document.querySelector(</span><span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21); line-height: 1.8; font-weight: 400; box-sizing: border-box;">&#39;[ng-controller=seatsCtrl]&#39;</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">);
</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.8; font-weight: 400; box-sizing: border-box;">var </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">$scope = angular.element(appElement).scope();
$scope.$apply(</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.8; font-weight: 400; box-sizing: border-box;">function </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">() {</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">
    $scope.data = [
        { id: 1, cnt: 4 },
        { id: 3, cnt: 5 },
        { id: 2, cnt: 6 }
    ];
});</span></pre>

<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">

&nbsp;</pre>

<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;"><span style="margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: Verdana; font-weight: 400; box-sizing: border-box;">取到scope，然后调用$apply</span></span></pre>

<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">

&nbsp;</pre>

<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;"><span style="margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: Verdana; font-weight: 400; box-sizing: border-box;">或者在controller里写一个function</span></span></pre>

<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">$scope.update = </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.8; font-weight: 400; box-sizing: border-box;">function </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">(data) {
    $scope.data = data;
    $scope.$apply();
}</span></pre>

<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">外部调用这个function</p>

<pre class="code" name="code" style="margin: 0px; padding: 0px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); border-image: none; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; display: block; white-space: pre-wrap; -ms-word-break: break-all; -ms-word-wrap: break-word; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">
<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.8; font-weight: 400; box-sizing: border-box;">var </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">ele = document.querySelector(</span><span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21); line-height: 1.8; font-weight: 400; box-sizing: border-box;">&quot;[ng-controller=seatsCtrl]&quot;</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.8; font-weight: 400; box-sizing: border-box;">);
angular.element(ele).scope().update([
        { id: 1, cnt: 7 },
        { id: 3, cnt: 8 },
        { id: 2, cnt: 9 }
]);</span></pre>

<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">注意function内部，需要调用$apply()</p>

<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">如果不调用apply，虽然scope的数据变化了，但并不会更新到页面上去显示</p>

<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">&nbsp;</p>

<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); text-transform: none; line-height: 16.8px; text-indent: 0px; letter-spacing: normal; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">从非angularjs的js代码中去改变angularjs的controller的数据，或许，这并不是标准的angularjs的用法，但可能会遇到需要这样做的时候。</p>
#$@text#$@
sdescriptors=xworker.swt.xworker.ThingRegistThing
sinheritDescription=false
sth_createIndex=true
sth_registThing=child|xworker.things.p2018.p01.p23.Angularjs
sth_registMyChilds=false
sth_registDisabled=false
sth_mark=false
