%1595990959207
@
sname=OverwriteMethods
slabel=重写方法
sautoExecute=false
sdescription=<p>重写事物的方法。</p>
sen_label=Rewirete Methods
sen_group=Model
sdescriptors=xworker.lang.util.ThingGuide
sinheritDescription=false
sth_createIndex=true
sth_registThing=guide|xworker.lang.actions.Actions
sth_registMyChilds=false
sth_registDisabled=false
sth_noThingRegistViewer=false
sgroup=模型
sth_fileMonitor=false
sth_deprecated=false
sth_mark=false
sth_registQueryOnlySelf=false
  @/@selectMethod
  sname=selectMethod
  slabel=选择要重写方法
  sdescription=<p>选择一个要重写的方法。</p>
  snotRemoveGuideOnFinish=false
  sdescriptors=xworker.lang.util.ThingGuideNodes/@Composite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=selectMethod
    @/@selectMethod/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.lang.util.ThingGuideNodes/@Composite/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Composite
      @/@selectMethod/@Composite/@compositeFillLayot
      sname=compositeFillLayout
      stype=SWT.HORIZONTAL
      sdescriptors=xworker.swt.Layouts/@FillLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=compositeFillLayot
      @/@selectMethod/@Composite/@sashForm
      sname=sashForm
      sstyle=HORIZONTAL
      sSMOOTH=false
      sweights=30,70
      sBORDER=false
      sH_SCROLL=false
      sV_SCROLL=false
      sNO_BACKGROUND=false
      sNO_FOCUS=false
      sNO_MERGE_PAINTS=false
      sNO_REDRAW_RESIZE=false
      sNO_RADIO_GROUP=false
      sEMBEDDED=false
      sDOUBLE_BUFFERED=false
      scapture=false
      senabled=true
      sredraw=true
      svisible=true
      sdescriptors=xworker.swt.Widgets/@SashForm
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=sashForm
        @/@selectMethod/@Composite/@sashForm/@list
        sname=list
        sstyle=SINGLE
        sH_SCROLL=true
        sV_SCROLL=true
        sBORDER=false
        scapture=false
        senabled=true
        sredraw=true
        svisible=true
        sdescriptors=xworker.swt.Widgets/@List
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=list
          @/@selectMethod/@Composite/@sashForm/@list/@Listeners
          sname=Listeners
          sdescriptors=xworker.swt.widgets.Widget/@Listeners
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=Listeners
            @/@selectMethod/@Composite/@sashForm/@list/@Listeners/@listSelection
            sname=listSelection
            stype=Selection
            sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_mark=false
            sid=listSelection
              @/@selectMethod/@Composite/@sashForm/@list/@Listeners/@listSelection/@GroovyAction
              sname=GroovyAction
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
import xworker.util.XWorkerUtils;

def name = list.getSelection()[0];

//正在编辑的事物
def editThing = thingGuide.getEditThing();
def parent = editThing.getParent();
def action = parent.getActionThing(name);

//显示文档
browser.setUrl(XWorkerUtils.getThingDescUrl(action));
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_mark=false
              sid=GroovyAction
        @/@selectMethod/@Composite/@sashForm/@browser
        sname=browser
        sMOZILLA=false
        sWEBKIT=false
        sjavascriptEnabled=true
        sdescriptors=xworker.swt.Widgets/@Browser
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=browser
          @/@selectMethod/@Composite/@sashForm/@browser/@UtilBrowser
          sname=UtilBrowser
          sdescriptors=xworker.swt.browser.Browser/@UtilBrowser
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=UtilBrowser
      @/@selectMethod/@Composite/@init
      sname=init
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import org.eclipse.swt.SWT;

//正在编辑的事物
def editThing = thingGuide.getEditThing();
def parent = editThing.getParent();

if(parent == null){
    browser.setText("不是事物的行为定义，不能选择要重写的方法。");
}else{
    def actions = parent.getActionThings();
    def names = [];
    for(action in actions){
        names.add(action.getMetadata().getName());
    }
    //排序
    Collections.sort(names);
    
    //加入到list中
    for(name in names){
        list.add(name);
    }
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.swt.widgets.Widget/@Code
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=init
    @/@selectMethod/@actions
    sname=actions
    sdescriptors=xworker.lang.util.ThingGuideNodes/@Composite/@actions1
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actions
      @/@selectMethod/@actions/@doFinish
      sname=doFinish
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
if(list.getSelectionCount() == 0){
    noActionMsg(actionContext);
    return false;
}else{
    thingGuide.setData("action", list.getSelection()[0]);
    return true;
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=doFinish
        @/@selectMethod/@actions/@doFinish/@ActionDefined
        sname=ActionDefined
        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=ActionDefined
          @/@selectMethod/@actions/@doFinish/@ActionDefined/@noAction
          sname=noActionMsg
          sshell=ognl:sashForm.getShell()
          sicon=ICON_WARNING
          sbuttons=OK
          stitle=选择要重写的方法
          smessage=请选择一个要重写的动作。
          sinterpretationType=Self
          sattributeTemplate=false
          schildsAttributeTemplate=false
          svarScope=Local
          sisSynchronized=false
          sthrowException=true
          screateLocalVarScope=false
          ssaveReturn=false
          sdisableGlobalContext=false
          sdebugLog=false
          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=noAction
  @/@selectActionDescriptor
  sname=selectActionDescriptor
  slabel=选择动作类型
  snotRemoveGuideOnFinish=false
  sdescriptors=xworker.lang.util.ThingGuideNodes/@Composite
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_mark=false
  sid=selectActionDescriptor
    @/@selectActionDescriptor/@Composite
    sname=Composite
    sBORDER=false
    sH_SCROLL=false
    sV_SCROLL=false
    sNO_BACKGROUND=false
    sNO_FOCUS=false
    sNO_MERGE_PAINTS=false
    sNO_REDRAW_RESIZE=false
    sNO_RADIO_GROUP=false
    sEMBEDDED=false
    sDOUBLE_BUFFERED=false
    scapture=false
    senabled=true
    sredraw=true
    svisible=true
    sdescriptors=xworker.lang.util.ThingGuideNodes/@Composite/@Composite
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=Composite
      @/@selectActionDescriptor/@Composite/@compositeFillLayout
      sname=compositeFillLayout
      stype=SWT.HORIZONTAL
      sdescriptors=xworker.swt.Layouts/@FillLayout
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=compositeFillLayout
      @/@selectActionDescriptor/@Composite/@thingRegist
      sname=thingRegist
      sthing=xworker.lang.actions.Actions
      sregistType=child
      sparent=false
      ssearchByKeywords=true
      sshowContent=true
      scontentDisplayType=Composite
      sshowDescBrowser=false
      sdescBrowserRight=false
      sautoLoad=true
      scache=true
      sdescritporForNewThing=xworker.lang.MetaDescriptor3
      sdescritporChilds=false
      ssashFormWeights=40,60
      sdescriptors=xworker.swt.Widgets/@ThingRegistSelector
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=thingRegist
    @/@selectActionDescriptor/@actions
    sname=actions
    sdescriptors=xworker.lang.util.ThingGuideNodes/@Composite/@actions1
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_mark=false
    sid=actions
      @/@selectActionDescriptor/@actions/@doFinish
      sname=doFinish
      sisSynchronized=false
      sthrowException=true
      suseOtherAction=false
      svarScope=Local
      sdisableGlobalContext=false
      Scode=
#$@text#$@
import org.xmeta.Thing;

//描述者
def descriptor = thingRegist.doAction("getThing", actionContext);

if(descriptor == null){
    noActionMsg(actionContext);
    return false;
}else{
    def name = thingGuide.getData("action");
    def actionThing = new Thing(name, null, descriptor.getMetadata().getPath(), false);
    
    thingGuide.getEditThing().addChild(actionThing);
    return true;
}
#$@text#$@
      sinterpretationType=Action
      screateLocalVarScope=false
      ssaveReturn=false
      sdebugLog=false
      sdescriptors=xworker.lang.actions.Actions/@GroovyAction
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_mark=false
      sid=doFinish
        @/@selectActionDescriptor/@actions/@doFinish/@ActionDefined
        sname=ActionDefined
        sdescriptors=xworker.lang.actions.Inout/@ActionDefined
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_mark=false
        sid=ActionDefined
          @/@selectActionDescriptor/@actions/@doFinish/@ActionDefined/@noAction
          sname=noActionMsg
          sshell=ognl:Composite.getShell()
          sicon=ICON_WARNING
          sbuttons=OK
          stitle=选择动作类型
          smessage=请选择一个动作类型。
          sinterpretationType=Self
          sattributeTemplate=false
          schildsAttributeTemplate=false
          svarScope=Local
          sisSynchronized=false
          sthrowException=true
          screateLocalVarScope=false
          ssaveReturn=false
          sdisableGlobalContext=false
          sdebugLog=false
          sdescriptors=xworker.swt.actions.MessageBoxActions/@MessageBox
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_mark=false
          sid=noAction
