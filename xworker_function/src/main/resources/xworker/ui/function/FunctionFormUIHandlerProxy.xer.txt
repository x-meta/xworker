^1412928288784
@
sname
FunctionFormUIHandlerProxy
slabel
FunctionFormUIHandlerProxy
sselfCallback
true
sdynamicParameter
false
sexecuteParameterMySelf
false
sisLocalVariableContainer
false
sunTrustValue
false
srunAtParameterSetted
false
Sdescription
#$@text#$@
<p>事物表单UI代理函数，可以方便实现通过事物表单编辑Map类型的数据或单值数据。</p>

<p><strong>编辑单个属性或Map</strong></p>

<p>&nbsp;&nbsp;&nbsp; 如果returnAttributeName为空那么函数的返回值是表单的值Map，否则函数的值是表单中对应的属性。</p>

<p><strong>是否显示帮助</strong></p>

<p>&nbsp;&nbsp;&nbsp; 即是否显示函数本身的description属性，函数的description一般是函数实例设置的提示文字。</p>

<p><strong>表单事物</strong></p>

<p>&nbsp;&nbsp;&nbsp; 首先通过属性formThingPath获取，如果没有择取第一个FormThing子事物。</p>
#$@text#$@
sdescriptors
xworker.lang.function.Function
sth_createIndex
false
sth_mark
false
@/@actions
sname
actions
sdescriptors
xworker.lang.MetaDescriptor3/@actions
sth_createIndex
false
sth_mark
false
@/@actions/@run
sname
doFunction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
suseOuterJava
true
souterClassName
xworker.ui.function.FunctionRequestUIHandlerProxy
smethodName
formRun
sdisableGlobalContext
false
sattributeTemplate
false
sinterpretationType
Action
svarScope
Global
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@JavaAction
sth_createIndex
false
sth_mark
false
@/@actions/@getSavedValueThing
sname
getSavedValueThing
sisSynchronized
false
sthrowException
true
suseOtherAction
false
suseOuterJava
true
souterClassName
xworker.lang.function.FunctionActions
smethodName
getSavedValueThing
sdisableGlobalContext
false
sattributeTemplate
false
sinterpretationType
Action
svarScope
Local
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@JavaAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@name
sname
name
sshowLabel
true
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_mark
false
@/@label
sname
label
sshowLabel
true
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_mark
false
@/@uiHandlerId
sname
uiHandlerId
sinputtype
openWindow
sshowLabel
true
ssize
60
sgroup
NotModify
sinputattrs
xworker.ui.editors.attribute.UIHandlerIDSelectShell
sreadOnly
false
sdefault
xworker_session_swt_dialogComposite
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_mark
false
@/@formThingPath
sname
formThingPath
sinputtype
dataSelector
sshowLabel
true
ssize
60
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.function.Function/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@returnAttributeName
sname
returnAttributeName
sshowLabel
true
ssize
40
sreadOnly
false
sinheritDescription
false
sdescription
<p>要返回的属性名称，如果不为空返回指定的属性，否则返回表单的所有值，即返回一个Map。</p>
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.function.Function/@attribute
sth_createIndex
false
sth_mark
false
@/@description
sname
description
sinputtype
html
sshowLabel
true
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_mark
false
@/@selfCallback
sname
selfCallback
sinputtype
truefalse
sshowLabel
true
sgroup
NotModify
sreadOnly
false
sdefault
true
sinheritDescription
false
Sdescription
#$@text#$@
<p>如果为true，那么本函数自己执行回调而不是FunctionRequest自动执行回调。</p>

<p>比如UI请求时需要等待，而如果不是selfCallback，那么回调在打开UI时就会自动完成，以致于无法进行UI交互。</p>
#$@text#$@
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_mark
false
@/@Parameter
sname
Parameter
sdescriptors
xworker.lang.MetaThing/@thing
sextends
xworker.lang.function.Function/@thing
sth_createIndex
false
sth_mark
false
@/@FormThing
sname
FormThing
sdescriptors
xworker.lang.MetaDescriptor3
sextends
xworker.lang.MetaDescriptor3
smany
true
seditCols
2
sinitialization
false
smodifier
public
sinheritDescription
false
Sdescription
#$@text#$@
<p>表单事物，如果属性未设置或属性设置的表单事物不存在时使用。</p>

<p><strong>注意：</strong></p>

<p>表单事物应该有一个description属性，用于显示帮助文档。</p>
#$@text#$@
sth_createIndex
false
sth_mark
false
@/@FormThing/@actions
sname
actions
sdescriptors
xworker.lang.MetaDescriptor3/@actions
sth_createIndex
false
sth_mark
false
@/@FormThing/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionCallback;
import xworker.ui.function.FunctionManager;
import xworker.ui.function.FunctionRequestUtil;

//回调
def thing = request.getThing().getParent();
def attrName = thing.getString("returnAttributeName");
if(attrName == ""){
    attrName = null;
}
def value = attrName != null ? values.get(attrName) : values;
def functionRequest = request.getRequestMessage();
if(message == "ok"){
    FunctionRequestUtil.callbakMyselfOk(functionRequest, value, actionContext);
}else{
    FunctionRequestUtil.callbakMyselfCancel(unctionRequest, value, actionContext);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
@/@FormThing/@actions/@callback
sname
callback
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionRequestUtil;

//表单事物
def thing = FunctionRequestUtil.getUIDescriptionThing(uiRequest.getRequestMessage());
def values = uiRequest.getRequestMessage().getParam().getValue();
if(values instanceof Map){    
}else{
    values = [:];
}

if(thing != null){
    values.put("description", thing.getMetadata().getPath());
}

formThing.doAction("setValues", actionContext, ["values": values]);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
@/@attribute
sname
attribute
slabel
属性
sdescriptors
xworker.lang.MetaDescriptor3/@thing
sextends
xworker.lang.MetaDescriptor3/@attribute
smany
true
seditCols
2
sinitialization
false
smodifier
public
sinheritDescription
false
sth_createIndex
false
sth_mark
false
