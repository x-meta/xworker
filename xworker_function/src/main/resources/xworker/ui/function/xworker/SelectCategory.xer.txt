^1456393398079
@
sname
SelectCategory
slabel
SelectCategory
sdescriptors
xworker.lang.MetaDescriptor3,xworker.lang.MetaDescriptor3/@thing
smany
true
seditCols
2
sinitialization
false
smodifier
public
sinheritDescription
false
Sdescription
#$@text#$@
<p>获取事物管理器和目录的函数。</p>

<p><strong>注意</strong></p>

<p>本函数固定设置thingManager和category两个参数。必须要同时选择事物管理器和目录。</p>
#$@text#$@
sth_createIndex
false
sth_mark
false
@/@actions
sname
actions
sdescriptors
xworker.lang.MetaDescriptor3/@actions
sth_createIndex
false
sth_mark
false
sid
actions
@/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionCallback;
import xworker.ui.function.FunctionManager;
import xworker.ui.function.FunctionRequestUtil;

//回调
def functionRequest = request.getRequestMessage();
if(message == "ok"){
    FunctionRequestUtil.callbakMyselfOk(functionRequest, values.get("category").getIndexObject(), actionContext);
}else{
    FunctionRequestUtil.callbakMyselfCancel(unctionRequest, values.get("category").getIndexObject(), actionContext);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
run
@/@actions/@requestCallback
sname
requestCallback
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;
import xworker.ui.function.FunctionCallback;
import xworker.ui.function.FunctionRequestUtil;

if(uiRequest.getRequestMessage() instanceof FunctionCallback)  {
    //参数的描述
    def descriptor = FunctionRequestUtil.getUIDescriptionThing(uiRequest.getRequestMessage()); //uiRequest.getRequestMessage().getParam().getDescriptor();
    
    //browserUIHandler
    def browserUIHandler = formThing.getData("formContext").get("browserUIHandler");
    
    browserUIHandler.requestUI(new UIRequest(descriptor, actionContext), actionContext);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
requestCallback
@/@SwtEditSetting
sshowMenu
true
sname
SwtEditSetting
sdescriptors
xworker.lang.MetaDescriptor3/@SwtObject
sth_createIndex
false
sth_mark
false
sid
SwtEditSetting
@/@SwtEditSetting/@SwtEditor
sname
SwtEditor
sdescriptors
xworker.lang.MetaDescriptor3/@SwtObject/@SwtEditor
sth_createIndex
false
sth_mark
false
sid
SwtEditor
@/@SwtEditSetting/@SwtEditor/@composite
sname
composite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
composite
@/@SwtEditSetting/@SwtEditor/@composite/@compositeGridLayout
sname
compositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
0
sverticalSpacing
0
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
compositeGridLayout
@/@SwtEditSetting/@SwtEditor/@composite/@resources
sname
resources
sdescriptors
xworker.swt.Widgets/@Resource
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
resources
@/@SwtEditSetting/@SwtEditor/@composite/@resources/@packageIamge
sname
packageImage
slabel
packageImage
stype
Image
simageFile
/xworker/ide/images/package.gif
sdescriptors
xworker.swt.util.Resource/@Image
sid
packageIamge
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder
sname
tabFolder
sstyle
TOP
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@TabFolder
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
tabFolder
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@tabFolderGridData
sname
tabFolderGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
tabFolderGridData
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem
sname
projectItem
stext
项目
sdescriptors
xworker.swt.widgets.TabFolder/@TabItem
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
projectItem
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite
sname
categoryComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
categoryComposite
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@categoryCompositeGridData
sname
categoryCompositeGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
categoryCompositeGridData
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@categoryCompositeGridLayout
sname
categoryCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
categoryCompositeGridLayout
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree
sname
tree
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
false
sHIDE_SELECTION
false
sBORDER
false
slineVisible
false
smultipleColumns
false
sheaderVisible
false
ssortIndicator
false
smoveableColumns
false
sheadImages
false
ssubImages
false
scheckSelection
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Tree
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
tree
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree/@treeGridData
sname
treeGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
treeGridData
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree/@TreeModels
sname
TreeModels
sdescriptors
xworker.swt.widgets.Tree/@treeModels
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
TreeModels
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree/@TreeModels/@dataModel
sname
dataModel
sdefaultWorld
true
sdisplayLevel
category
srefreshOnGetChilds
false
srootVisiable
true
sbindToParent
true
smultiSubModel
false
srootNodeId
__TreeNodeRootId__
smultiSubModelSeparator
-
sloadBackground
false
saddTabUrl
false
scacheExpandStatusId
xworker_project_tree
sdescriptors
xworker.app.model.tree.TreeModels/@XWorkerModel
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
dataModel
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree/@Listeners
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
Listeners
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree/@Listeners/@treeSelection
sname
treeSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
treeSelection
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@tree/@Listeners/@treeSelection/@treeSelectionAction
sname
treeSelectionAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def index = event.item.getData().get("data");
actionContext.getScope(0).put("result", null);

if(index != null && (index.getType() == "category" 
    || index.getType() == "thingManager")){
    if(index.getType() == "category"){
        actionContext.getScope(0).put("result", index.getIndexObject());
        okButton.setEnabled(true);
        createCategoryButton.setEnabled(true);
        deleteCategoryButton.setEnabled(true);
        actionContext.put("category", index.getIndexObject());
        actionContext.put("thingManager", index.getIndexObject().getThingManager());
    }else{
        okButton.setEnabled(false);
        createCategoryButton.setEnabled(true);
        deleteCategoryButton.setEnabled(false);
        actionContext.put("category", index.getIndexObject().getCategory(""));
        actionContext.put("thingManager", index.getIndexObject());
    }
}else{
    okButton.setEnabled(false);
    createCategoryButton.setEnabled(false);
    deleteCategoryButton.setEnabled(false);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
treeSelectionAction
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.Widgets/@Composite
sid
9223
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@9224
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
9224
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@9225
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
9225
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@5153
sname
createCategoryButton
stext
创建目录
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
false
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
5153
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@5153/@5154
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5154
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@5153/@5155
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5155
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@5153/@5155/@5156
sname
createCategoryButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5156
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@5153/@5155/@5156/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.ActionContext;
import xworker.swt.util.SwtDialog;
import org.xmeta.util.UtilString;


import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;
import org.eclipse.swt.widgets.TreeItem;

def ac = new ActionContext();
ac.put("parent", categoryComposite.getShell());

def shellThing = world.getThing("xworker.ide.worldExplorer.swt.dialogs.NewCategoryDialog/@shellt");
def shell = shellThing.doAction("create", ac);
def dialog = new SwtDialog(categoryComposite.getShell(), shell, ac);

def newCategory = dialog.open();
if(newCategory != null){
    def categoryPath =  null;
    if(category.getCategory(newCategory) != null){
        MessageBox box = new MessageBox(categoryComposite.getShell(), SWT.OK | SWT.ICON_ERROR);
        box.setText(UtilString.getString("res:res.w_exp:commonBoxTitle:操作信息", actionContext));
        box.setMessage(UtilString.getString("res:res.w_exp:alertCategoryExists:目录已经存在！", actionContext));
        box.open();
        return;
    }else{
        def simpleCategoryName = newCategory;
        if(category.getName() != "" && category.getName() != null){
            newCategory = category.getName() + "." + newCategory;
        }
        
        if(!thingManager.createCategory(newCategory)){
            MessageBox box = new MessageBox(shell, SWT.OK | SWT.ICON_ERROR);
            box.setText("创建目录");
            box.setMessage("不能创建目录：" + newPackage + "!");
            box.open();
            return;
        }else{
            def parentTreeItem = tree.getSelection()[0];
            def parentIndex = parentTreeItem.getData().get("index");
            parentIndex.refresh();
            def newIndex = null;
            for(index in parentIndex.childs){
                if(index.name == simpleCategoryName){
                     newIndex = index;
                     break;
                }
            }
            //查找插入的位置
            int index = 0;
            for(item in parentTreeItem.getItems()){
                if(item.getData().name >= simpleCategoryName){         
                    break;
                }
                
                index ++;
            }
            
            TreeItem citem = new TreeItem(parentTreeItem, SWT.NONE, index);
            citem.setText(simpleCategoryName);
            citem.setData(["data":newIndex, "index":newIndex,"name":simpleCategoryName]);
            citem.setImage(packageImage);
            citem.setData("_treeModel", dataModel);
        }
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@51531
sname
deleteCategoryButton
stext
删除目录
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
false
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
51531
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@51531/@5154
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5154
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@51531/@5155
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5155
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@51531/@5155/@5156
sname
createThingManagerButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5156
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@projectItem/@categoryComposite/@9223/@51531/@5155/@5156/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

def item = tree.getSelection()[0];
def categoryPath = item.getData().get("data").getPath();
    
def box = new MessageBox(tree.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
box.setText("删除目录");
box.setMessage("确定要删除选择的目录" + categoryPath + "吗?");
if(SWT.OK == box.open()){
    box = new MessageBox(tree.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
    box.setText("删除目录");
    box.setMessage("删除目录将会永久删除目录下的事物，要继续吗？");
    if(SWT.OK == box.open()){
        def index = item.getData().get("data")
        def category = world.get(index.getPath());
        category.getThingManager().removeCategory(category.getName());
        index.getParent().refresh();
           
        item.dispose();
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem
sname
libTabItem
stext
事物库
sdescriptors
xworker.swt.widgets.TabFolder/@TabItem
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libTabItem
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite
sname
libComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libComposite
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable
sname
libTable
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
true
sHIDE_SELECTION
true
sBORDER
false
slineVisible
true
smultipleColumns
false
sheaderVisible
false
ssortIndicator
true
smoveableColumns
true
sheadImages
false
ssubImages
false
sVIRTUAL
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Table
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libTable
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@DataStore
sname
DataStore
sattachToParent
true
sloadBackground
true
sautoLoad
false
sautoSave
false
spaging
extend
spageSize
50
sstoreSortField
_extend
sstoreSortDir
ASC
seditable
extend
seditmethod
extend
sdescriptors
xworker.swt.widgets.Table/@DataStore
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
DataStore
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@DataStore/@dataObjects
sname
dataObjects
sdescriptors
xworker.app.view.swt.data.DataStore/@DataObjects
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
dataObjects
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@DataStore/@dataObjects/@AbstractDataObject
sname
AbstractDataObject
seditCols
2
spaging
false
sreadUrl
do?sc=xworker.app.view.extjs.server.DataObjectStore/@read
screateUrl
do?sc=xworker.app.view.extjs.server.DataObjectStore/@create
supdateUrl
do?sc=xworker.app.view.extjs.server.DataObjectStore/@update
sdestroyUrl
do?sc=xworker.app.view.extjs.server.DataObjectStore/@destroy
LstoreAutoDestroy
false
sstoreAutoLoad
false
LstoreAutoSave
true
LstoreBatch
true
LstorePruneModifiedRecords
false
LstoreRemoteSort
false
LstoreRestful
false
sstoreRoot
'rows'
sstoreSuccessProperty
'success'
sstoreTotalProperty
'totalCount'
sstoreMessageProperty
'msg'
sgridEditable
false
sgridEditType
cell
sformReadUrl
do?sc=xworker.app.view.extjs.server.DataObjectForm/@read
sformCreateUrl
do?sc=xworker.app.view.extjs.server.DataObjectForm/@create
sformUpdateUrl
do?sc=xworker.app.view.extjs.server.DataObjectForm/@update
sformDestroyUrl
do?sc=xworker.app.view.extjs.server.DataObjectForm/@delete
spaging_afterPageText
页 共
spaging_beforePageText
第
Lpaging_displayInfo
false
spaging_displayMsg
第{0}-第{1}条，共{2}条
spaging_emptyMsg
没有数据
spaging_firstText
首页
spaging_lastText
最后一页
spaging_nextText
下一页
Lpaging_prependButtons
false
spaging_prevText
上一页
spaging_refreshText
刷新
sgridColumnLocking
false
sgridLockText
'锁定'
sgridUnlockText
'解锁'
scolumnGroup
false
sgridCheckable
false
sgridRowNumber
false
sgridGrouping
false
sgridGroupTextTpl
'{text} ({[values.rs.length]} 条)'
sgridRowExpander
false
sautoGenerateId
false
sidGenerateType
action
sidAction
generateId
sstoreSortDir
ASC
sautoInit
false
sautoInitAction
beforeCreate
scacheRelation
false
scacheRelationMaxSize
1000
scacheRelationReadnone
false
safterCreated
false
sonLoaded
false
sbeforeUpdate
false
safterUpdated
false
sbeforeDelete
false
safterDeleted
false
safterQueryed
false
sdescriptors
xworker.dataObject.DataObjects/@AbstractDataObject
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
AbstractDataObject
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@DataStore/@dataObjects/@AbstractDataObject/@name
sname
name
slabel
事物库名
stype
string
soptional
true
skey
false
sdataField
true
sviewField
true
sreadField
true
screateEditor
true
seditEditor
true
sviewEditor
true
sgridEditor
true
squeryEditor
true
sreadOnly
false
seditable
true
sdisabled
false
sshowLabel
true
slabelAlign
right
slabelVAlign
baseline
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sshowInTable
true
sgridWidth
350
sdisplayRelationLabel
false
sgridFixed
false
sgridHidden
false
sgridHideable
true
sgridSortable
false
scolumnLocked
false
sgridGroupable
true
sgridMenuDisabled
false
sgridResizable
true
sdescriptors
xworker.dataObject.AbstractDataObject/@attribute
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
name
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@Listeners
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
Listeners
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@Listeners/@libTableSelection
sname
libTableSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libTableSelection
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@Listeners/@libTableSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def lib = event.item.getData();
def index = lib.getTodayIndex();
actionContext.getScope(0).put("result", index.getIndexObject());

okButton.setEnabled(true);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
GroovyAction
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@Listeners/@libTableDefaultSeleciton
sname
libTableDefaultSeleciton
stype
DefaultSelection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libTableDefaultSeleciton
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@Listeners/@libTableDefaultSeleciton/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def lib = event.item.getData();
def index = lib.getTodayIndex();
actionContext.getScope(0).put("result", index.getIndexObject());

okButtonSelection.handleEvent(null);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
GroovyAction
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libTable/@libTableGriddata
sname
libTableGriddata
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libTableGriddata
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@libCompositeGridLayout
sname
libCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
libCompositeGridLayout
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387
sname
libButtonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sid
5387
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5388
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
5388
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5389
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
5389
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5390
sname
editLibButton
stext
编辑事物库
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
5390
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5390/@5391
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5391
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5390/@5392
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5392
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5390/@5392/@5393
sname
editLibButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5393
@/@SwtEditSetting/@SwtEditor/@composite/@tabFolder/@libTabItem/@libComposite/@5387/@5390/@5392/@5393/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.util.UtilThing;
import xworker.util.XWorkerUtils;

def libConfig = UtilThing.getThingIfNotExistsCreate("_local.xworker.config.ThingLib", "_local", "xworker.ide.config.ThingLib");

XWorkerUtils.ideOpenThing(libConfig);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
GroovyAction
@/@SwtEditSetting/@SwtEditor/@composite/@9223
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.Widgets/@Composite
sid
9223
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9224
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
9224
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9225
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
9225
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9226
sname
okButton
stext
确定
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
false
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
9226
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9226/@9227
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
9227
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9226/@9228
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
9228
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9226/@9228/@9229
sname
okButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
9229
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9226/@9228/@9229/@FuntionUIOk
sname
FuntionUIOk
sinterpretationType
Self
sattributeTemplate
false
schildsAttributeTemplate
false
svarScope
Local
sisSynchronized
false
sthrowException
true
suseOtherAction
false
screateLocalVarScope
false
ssaveReturn
false
sdisableGlobalContext
false
sdescriptors
xworker.ui.function.actions.FuntionUIOk
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
FuntionUIOk
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9230
sname
cancelButton
stext
取消
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
9230
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9230/@9231
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
9231
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9230/@9232
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
9232
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9230/@9232/@9233
sname
cancelButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
9233
@/@SwtEditSetting/@SwtEditor/@composite/@9223/@9230/@9232/@9233/@FunctionUIOkNull
sname
FunctionUIOkNull
sinterpretationType
Self
sattributeTemplate
false
schildsAttributeTemplate
false
svarScope
Local
sisSynchronized
false
sthrowException
true
suseOtherAction
false
screateLocalVarScope
false
ssaveReturn
false
sdisableGlobalContext
false
sdescriptors
xworker.ui.function.actions.FunctionUIOkNull
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
FunctionUIOkNull
@/@SwtEditSetting/@SwtEditor/@composite/@init
sname
init
sdescriptors
xworker.swt.xworker.RunAction
sth_createIndex
false
sth_mark
false
sid
init
@/@SwtEditSetting/@SwtEditor/@composite/@init/@init
sname
init
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ide.config.ThingLibs;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TableItem;

def libs = ThingLibs.getAllLibs();
for(lib in libs){
    def item = new TableItem(libTable, SWT.NONE);
    item.setText(lib.label);
    item.setData(lib);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
init
@/@SwtEditSetting/@SwtEditor/@model
sname
model
sdataType
Map
svalidate
true
sfocus
false
sfocusColor
"#E8FAFF"
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.swt.Widgets/@Model
sth_createIndex
false
sth_mark
false
sid
model
@/@SwtEditSetting/@SwtEditor/@model/@path
sname
thingManager
sswtControl
thingManagerTree
svalidate
true
sfocus
false
sfocusColor
"#E8FAFF"
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.swt.model.Model/@Model
sth_createIndex
false
sth_mark
false
sid
path
@/@SwtEditSetting/@SwtEditor/@model/@path/@actions
sname
actions
sdescriptors
xworker.swt.model.Model/@actions1
sth_createIndex
false
sth_mark
false
sid
actions
@/@SwtEditSetting/@SwtEditor/@model/@path/@actions/@getValue
sname
getValue
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Index;

if(thingManagerTree.getSelection().length == 0){
    return null;
}

def index = thingManagerTree.getSelection()[0].getData().get("data");
if(index.getType() == Index.TYPE_THINGMANAGER || index.getType() == Index.TYPE_CATEGORY){
    return index;
}else{
    return null;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
getValue
@/@SwtEditSetting/@SwtEditor/@model/@path/@actions/@doValidate
sname
doValidate
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Index;

if(thingManagerTree.getSelection().length == 0){
    message.put("message", "请选择一个事物管理器！");
    return false;
}

def index = thingManagerTree.getSelection()[0].getData().get("data");
if(index.getType() == Index.TYPE_THINGMANAGER){
    return true;
}else{
     message.put("message", "请选择一个事物管理器！");
    return false;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
doValidate
@/@SwtEditSetting/@SwtEditor/@model/@category
sname
category
sswtControl
categoryTree
svalidate
true
sfocus
false
sfocusColor
"#E8FAFF"
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.swt.model.Model/@Model
sth_createIndex
false
sth_mark
false
sid
category
@/@SwtEditSetting/@SwtEditor/@model/@category/@actions
sname
actions
sdescriptors
xworker.swt.model.Model/@actions1
sth_createIndex
false
sth_mark
false
sid
actions
@/@SwtEditSetting/@SwtEditor/@model/@category/@actions/@getValue
sname
getValue
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Index;

if(categoryTree.getSelection().length == 0){
    return null;
}

def index = categoryTree.getSelection()[0].getData().get("data");
if(index.getType() == Index.TYPE_CATEGORY){
    return index;
}else{
    return null;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
getValue
@/@SwtEditSetting/@SwtEditor/@model/@thing
sname
thing
svalidate
true
sfocus
false
sfocusColor
"#E8FAFF"
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.swt.model.Model/@Model
sth_createIndex
false
sth_mark
false
sid
thing
@/@SwtEditSetting/@SwtEditor/@model/@thing/@actions
sname
actions
sdescriptors
xworker.swt.model.Model/@actions1
sth_createIndex
false
sth_mark
false
sid
actions
@/@SwtEditSetting/@SwtEditor/@model/@thing/@actions/@getValue
sname
getValue
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.program.Program;
import org.eclipse.swt.widgets.TreeItem;
import xworker.ide.worldexplorer.actions.ExplorerActions;

if(dataTable.getSelection().length > 0){
    def item = dataTable.getSelection()[0];
    def data = item.getData();
    return world.getThing(data.path);
}else{
    return null;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
getValue
