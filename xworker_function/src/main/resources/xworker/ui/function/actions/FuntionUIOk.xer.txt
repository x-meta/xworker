^1421062080266
@
sname
FuntionUIOk
slabel
FuntionUIOk
sdescriptors
xworker.lang.MetaDescriptor3
sextends
xworker.lang.actions.SelfAction
smany
true
seditCols
2
sinitialization
false
sgroup
ui.function
smodifier
public
sinheritDescription
false
Sdescription
#$@text#$@
<p>在函数的界面请求里执行函数的Ok回调操作，即确认并返回值。</p>

<p><strong>返回值result</strong></p>

<p>&nbsp;&nbsp;&nbsp; 函数的返回值从当前变量上下文actionContext中取，返回值的变量名为result。</p>

<p><strong>SWT快捷方式</strong></p>

<p>&nbsp;&nbsp;&nbsp; 可以迅速的从SWT控件中取值</p>

<ul>
	<li><strong>swtTableData</strong><br />
	值是swt的table变量名，取表格选中的行的getData()值。<br />
	&nbsp;</li>
	<li><strong>setTableDataList</strong><br />
	取选中的表格的行的getData()值的列表。<br />
	&nbsp;</li>
	<li><strong>swtTableCheckedDataList</strong><br />
	取表格行复选框checked状态为true的getData()值的列表。</li>
</ul>
#$@text#$@
snotXmlAttribute
false
sth_createIndex
true
sth_registThing
child|xworker.lang.actions.Actions
sth_registMyChilds
false
sth_mark
false
@/@actions
sname
actions
sdescriptors
xworker.lang.MetaDescriptor3/@actions
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@actions/@run
sname
run
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionRequestUtil;
import org.xmeta.util.UtilData;

//函数请求变量
def ac = request.getActionContext();
def fnRequest = request.getRequestMessage();

def swtTableData = self.getStringBlankAsNull("swtTableData");
def swtTableDataList = self.getStringBlankAsNull("swtTableDataList");
def swtTableCheckedDataList = self.getStringBlankAsNull("swtTableCheckedDataList");
def resultStr = self.getStringBlankAsNull("result");
if(resultStr != null){
    actionContext.peek().put("result", UtilData.getData(self, "result", actionContext));
}else if(swtTableData != null){
    def datas = getTableDatas(actionContext.get(swtTableData));
    if(datas.size() > 0){
        actionContext.peek().put("result", datas.get(0));
    }else{
        actionContext.peek().put("result", null);
    }
}else if(swtTableDataList != null){
    def datas = getTableDatas(actionContext.get(swtTableDataList));
    actionContext.peek().put("result", datas);
}else if(swtTableCheckedDataList != null){
    def datas = getTableDatasChecked(actionContext.get(swtTableCheckedDataList));
    actionContext.peek().put("result", datas);
}

//执行函数请求的回调ok
FunctionRequestUtil.callbakMyselfOk(fnRequest, actionContext.get("result"), ac);

def getTableDatas(table){
    def datas = [];
    if(table == null){
        return datas;
    }
    for(item in table.getSelection()){
        datas.add(item.getData());
    }
    return datas;
}

def getTableDatasChecked(table){
    def datas = [];
    if(table == null){
        return datas;
    }
    for(item in table.getItems()){
        if(item.getChecked() == true){
            datas.add(item.getData());
        }
    }
    return datas;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@name
sname
name
sshowLabel
true
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@label
sname
label
sshowLabel
true
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@result
sname
result
sshowLabel
true
ssize
50
sreadOnly
false
sdefault
var:result
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@description
sname
description
sinputtype
html
sshowLabel
true
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@swtTableData
sname
swtTableData
sshowLabel
true
sgroup
SWT
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@swtTableDataList
sname
swtTableDataList
sshowLabel
true
sgroup
SWT
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
@/@swtTableCheckedDataList
sname
swtTableCheckedDataList
sshowLabel
true
sgroup
SWT
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
snotXmlAttribute
false
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
