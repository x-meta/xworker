^1462774345346
@
sname
shell
stext
Function Request
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
true
sMAX
true
sBORDER
false
sRESIZE
true
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
800
sheight
600
scenterScreen
true
spack
false
smaximized
false
sfullScreen
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
slabel
FunctionRequestShell
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.Shell
sth_createIndex
false
sth_mark
false
@/@composite
sname
composite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
composite
@/@composite/@resources
sname
resources
sdescriptors
xworker.swt.Widgets/@Resource
sth_createIndex
false
sth_mark
false
sid
resources
@/@composite/@resources/@requestImg
sname
requestImg
stype
Image
simageFile
icons/application_go.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_mark
false
sid
requestImg
@/@composite/@resources/@paramReadyImg
sname
paramNotReadyImg
stype
Image
simageFile
icons/tag_blue_delete.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_mark
false
sid
paramReadyImg
@/@composite/@resources/@paramReadyImg1
sname
paramReadyImg
stype
Image
simageFile
icons/tag_green.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_mark
false
sid
paramReadyImg1
@/@composite/@resources/@paramNotSetImg
sname
paramNotSetImg
stype
Image
simageFile
icons/tag_blue_add.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_mark
false
sid
paramNotSetImg
@/@composite/@resources/@stepReturnImage
sname
stepReturnImage
stype
Image
simageFile
icons/debug/stepreturn_co.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
stepReturnImage
@/@composite/@resources/@stepOverImage
sname
stepOverImage
stype
Image
simageFile
icons/debug/stepover_co.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
stepOverImage
@/@composite/@resources/@stepIntoImage
sname
stepIntoImage
stype
Image
simageFile
icons/debug/stepinto_co.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
stepIntoImage
@/@composite/@resources/@toggleBreakPointImage
sname
toggleBreakPointImage
stype
Image
simageFile
icons/debug/public_co.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
toggleBreakPointImage
@/@composite/@resources/@addParameterImage
sname
addParameterImage
stype
Image
simageFile
icons/plugin_add.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
addParameterImage
@/@composite/@resources/@removeParameterImage
sname
removeParameterImage
stype
Image
simageFile
icons/plugin_delete.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
removeParameterImage
@/@composite/@resources/@paramUpImage
sname
paramUpImage
stype
Image
simageFile
icons/arrow_up.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramUpImage
@/@composite/@resources/@paramDownImage
sname
paramDownImage
stype
Image
simageFile
icons/arrow_down.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramDownImage
@/@composite/@resources/@toConstantsImage
sname
toConstantsImage
stype
Image
simageFile
icons/text_signature.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
toConstantsImage
@/@composite/@resources/@runImage
sname
runImage
stype
Image
simageFile
icons/debug/run_exc.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
runImage
@/@composite/@resources/@runParameterImage
sname
runParameterImage
stype
Image
simageFile
icons/debug/runlast_co.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
runParameterImage
@/@composite/@resources/@editInstanceImage
sname
editInstanceImage
stype
Image
simageFile
icons/bug_edit.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
editInstanceImage
@/@composite/@resources/@editProtoImage
sname
editProtoImage
stype
Image
simageFile
icons/brick_edit.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
editProtoImage
@/@composite/@resources/@viewGlobalVarImage
sname
viewGlobalVarImage
stype
Image
simageFile
icons/zoom.png
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
viewGlobalVarImage
@/@composite/@resources/@saveFunctionImage
sname
saveFunctionImage
stype
Image
simageFile
/xworker/ide/images/save.gif
sdescriptors
xworker.swt.util.Resource/@Image
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
saveFunctionImage
@/@composite/@resources/@application_side_contract
sname
application_side_contractImg
stype
Image
simageFile
icons/application_side_contract.png
sdescriptors
xworker.swt.util.Resource/@Image
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
application_side_contract
@/@composite/@resources/@application_side_expandImage
sname
application_side_expandImage
stype
Image
simageFile
icons/application_side_expand.png
sdescriptors
xworker.swt.util.Resource/@Image
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
application_side_expandImage
@/@composite/@Listeners
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sth_mark
false
sid
Listeners
@/@composite/@Listeners/@compositeDispose
sname
compositeDispose
stype
Dispose
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_mark
false
sid
compositeDispose
@/@composite/@Listeners/@compositeDispose/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(!request.isExecuted()){
    request.cancel();
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@ListenersPrepared
sname
ListenersPrepared
sdescriptors
xworker.swt.widgets.Widget/@ListenersPrepared
sth_createIndex
false
sth_mark
false
sid
ListenersPrepared
@/@composite/@ListenersPrepared/@thingFormModifedListener
sname
thingFormModifedListener
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listenersPrepared/@Listener
sth_createIndex
false
sth_mark
false
sid
thingFormModifedListener
@/@composite/@ListenersPrepared/@thingFormModifedListener/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def nomodify = actionContext.g().get("thingForm_nomodify");

if(nomodify == null || nomodify == false){
    saveFunctionButton.setText("*保存函数修改*");
    actionContext.g().put("thingForm_item", requestTree.getSelection()[0]);
    actionContext.g().put("thingForm_modify", true);
}else{
    saveFunctionButton.setText("保存函数修改");
    actionContext.g().put("thingForm_modify", false);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@ListenersPrepared/@paramNoteModifiedListener
sname
paramNoteModifiedListener
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listenersPrepared/@Listener
sth_createIndex
false
sth_mark
false
sid
paramNoteModifiedListener
@/@composite/@ListenersPrepared/@paramNoteModifiedListener/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(actionContext.get("saveNoteButton") != null){
    saveNoteButton.setText("*保存参数注释*");
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@designCompositeGridLayout
sname
compositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
designCompositeGridLayout
@/@composite/@coolBar
sname
coolBar
stype
HORIZONTAL
sBORDER
false
sFLAT
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@CoolBar
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
coolBar
@/@composite/@coolBar/@coolbarGridData
sname
coolbarGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
2
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
coolbarGridData
@/@composite/@coolBar/@functionCollItem
sname
functionCollItem
sDROP_DOWN
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
functionCollItem
@/@composite/@coolBar/@functionCollItem/@functionCoolBar
sname
functionCoolBar
stype
HORIZONTAL
sFLAT
true
sWRAP
false
sBORDER
false
sSHADOW_OUT
false
sRIGHT
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem/@ToolBar
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
functionCoolBar
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466821
sname
manageRequestButton
stype
SWT.PUSH
simage
saveFunctionImage
stoolTiptext
保存函数
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
466821
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466821/@4669
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466821/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466821/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466821/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;
import xworker.ui.function.FunctionRequestUIFactory;

UIRequest uiRequest = new UIRequest(world.getThing("xworker.ui.function.FunctionSaveShell/@composite"), actionContext);
			
//按照函数栈的选择保存函数			
def index = stackList.getSelectionIndex();
def stackFunction = null;
if(index > 0){
    index = index - 1;
    stackFunction = stackList.getData().get(index);
    stackFunction = stackFunction.getCallback().getRequest();
}else{
    stackFunction = stackList.getData().get(0);
}


//消息设置成FunctionRequest
uiRequest.setRequestMessage(stackFunction);
uiRequest.setFinishedMessage(stackFunction);

//向界面发送请求
FunctionRequestUIFactory.requestUI(request, "xworker_session_swt_dialogComposite", uiRequest, actionContext);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668211
sname
viewActionContextButton
stype
SWT.PUSH
simage
viewGlobalVarImage
stoolTiptext
查看全局变量
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668211
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668211/@4669
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668211/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668211/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668211/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;
import xworker.ui.function.FunctionRequestUIFactory;

UIRequest uiRequest = new UIRequest(world.getThing("xworker.ui.function.xworker.ActionContextViewerShell/@composite1"), actionContext);
			
//消息设置成FunctionRequest
uiRequest.setRequestMessage(request);
uiRequest.setFinishedMessage(request);

//向界面发送请求
FunctionRequestUIFactory.requestUI(request, "xworker_session_swt_dialogComposite", uiRequest, actionContext);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668212
sname
editFunctionThingButton
stype
SWT.PUSH
simage
editInstanceImage
stoolTiptext
编辑函数实例
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668212
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668212/@4669
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668212/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668212/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@4668212/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ide.worldexplorer.actions.ExplorerActions;

def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
if(param == null){
    ExplorerActions.openThing(functionRequest.getThing());
}else{
    if(param.getValueThing() == null){
    }else{
        ExplorerActions.openThing(param.getValueThing());
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466811
sname
editFunctionButton
stype
SWT.PUSH
simage
editProtoImage
stoolTiptext
编辑函数原型
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
466811
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466811/@4669
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466811/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466811/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@functionCollItem/@functionCoolBar/@466811/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ide.worldexplorer.actions.ExplorerActions;

def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
if(param == null){
    ExplorerActions.openThing(functionRequest.getDescriptor());
}else{
    if(param.getValueThing() == null){
    }else{
        ExplorerActions.openThing(param.getValueRequest().getDescriptor());
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@mainCoolItem
sname
mainCoolItem
sDROP_DOWN
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
mainCoolItem
@/@composite/@coolBar/@mainCoolItem/@runToolBar
sname
runToolBar
stype
HORIZONTAL
sFLAT
true
sWRAP
false
sBORDER
false
sSHADOW_OUT
false
sRIGHT
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem/@ToolBar
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
runToolBar
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668326
sname
executeRequestButton
stype
SWT.PUSH
simage
runImage
stoolTiptext
执行函数
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668326
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668326/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668326/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668326/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668326/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

def item = requestTree.getItems()[0];
def functionRequest = item.getData();
if(functionRequest.getFirstUnReadyParam() != null){
    actions.doAction("selectNextUnSetParam");
    /*
    def shell = contentComposite.getShell();    
    def box = new MessageBox(shell, SWT.ICON_WARNING | SWT.OK);
    box.setText("函数执行");
    box.setMessage("不能执行函数，还有未设置的参数！");
    box.open();    */
}else{
    //执行函数
    //def values = thingForm.doAction("getValues");
    //functionRequest.getThing().getAttributes().putAll(values);
    functionRequest.getFunctionAssist().stepNone();
    functionRequest.run(actionContext);    
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668323
sname
stepReturnButton
stype
SWT.PUSH
simage
stepReturnImage
stoolTiptext
Step Return
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668323
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668323/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668323/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668323/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668323/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ui.function.FunctionRequest;
import xworker.ui.function.FunctionCallback;

//通过执行参数的事物来获取参数的值
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");

//设置调试装填
def assist = functionRequest.getFunctionAssist();
assist.stepReturn(functionRequest);

//参数事物的执行
functionRequest.run(actionContext);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668
sname
stepOverButton
stype
SWT.PUSH
simage
stepOverImage
stoolTiptext
Step Over
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ui.function.FunctionRequest;
import xworker.ui.function.FunctionCallback;
import xworker.ui.function.FunctionAssist;

//通过执行参数的事物来获取参数的值
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");

//设置调试装填
if(functionRequest == null && param != null){
    functionRequest = param.getValueRequest();
}
def assist = functionRequest.getFunctionAssist();
if(param != null){
    assist.stepOver(param.getValueRequest(), actionContext);    
}else{
    assist.stepOver(functionRequest, actionContext);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668324
sname
stepIntoButton
stype
SWT.PUSH
simage
stepIntoImage
stoolTiptext
Step Into
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668324
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668324/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668324/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668324/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@mainCoolItem/@runToolBar/@4668324/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ui.function.FunctionRequest;
import xworker.ui.function.FunctionCallback;

//通过执行参数的事物来获取参数的值
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");

//设置调试装填
if(functionRequest == null && param != null){
   functionRequest = param.getValueRequest();
}
def assist = functionRequest.getFunctionAssist();
assist.stepInto(functionRequest);

//参数事物的执行
functionRequest.run(actionContext);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@paramsCoolItem
sname
paramsCoolItem
sDROP_DOWN
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramsCoolItem
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar
sname
paramsToolbar
stype
HORIZONTAL
sFLAT
false
sWRAP
false
sBORDER
false
sSHADOW_OUT
false
sRIGHT
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem/@ToolBar
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramsToolbar
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668325
sname
runParameterButton
stype
SWT.PUSH
simage
runParameterImage
stoolTiptext
执行当前参数
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668325
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668325/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668325/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668325/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668325/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ui.function.FunctionRequest;
import xworker.ui.function.FunctionCallback;

//通过执行参数的事物来获取参数的值
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");

//参数事物的执行
param.run();
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466831
sname
addParamterButton
stype
SWT.PUSH
simage
addParameterImage
stoolTiptext
添加参数
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
466831
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466831/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466831/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466831/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466831/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionManager;

def item = requestTree.getSelection()[0];
def functionRequest = item.getData();

//添加参数的请求
FunctionManager.sendAddParameterRequest(functionRequest);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466832
sname
removeParamterButton
stype
SWT.PUSH
simage
removeParameterImage
stoolTiptext
删除参数
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
466832
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466832/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466832/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466832/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@466832/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

def box = new MessageBox(coolBar.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
box.setText("删除参数");
box.setMessage("确实要删除选中的参数么？");
if(box.open() == SWT.OK){
    def item = requestTree.getSelection()[0];
    def param = item.getData("param");
    param.getRequest().removeParam(param);
    
    item.dispose();
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668321
sname
moveParamterUPButton
stype
SWT.PUSH
simage
paramUpImage
stoolTiptext
上移参数
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668321
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668321/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668321/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668321/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668321/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionRequest;

def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = param.getRequest();
def parentItem = item.getParentItem();
if(functionRequest.moveParamUp(param)){
    def index = parentItem.indexOf(item);
    def upItem = parentItem.getItem(index - 1);
    def upText = upItem.getText();
    def upData = upItem.getData();
    def upParam = upItem.getData("param");
    def upIcon = upItem.getImage();
    upItem.setText(item.getText());
    upItem.setData(item.getData());
    upItem.setData("param", item.getData("param"));   
    upItem.setImage(item.getImage()); 
    item.setText(upText);
    item.setData(upData);
    item.setData("param", upParam);
    item.setImage(upIcon);    
    requestTree.setSelection(upItem);

    //重新初始化子节点
    for(citem in upItem.getItems()){
        citem.dispose();        
    }
    for(citem in item.getItems()){
        citem.dispose();
    }
    actions.doAction("refreshFunctionTree", actionContext, 
             ["parentItem": upItem, "functionRequest": upItem.getData(), "currentRequest": null]);
    actions.doAction("refreshFunctionTree", actionContext, 
             ["parentItem": item, "functionRequest": item.getData(), "currentRequest": null]);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668322
sname
moveParamterDownButton
stype
SWT.PUSH
simage
paramDownImage
stoolTiptext
下移参数
senabled
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668322
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668322/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668322/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668322/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668322/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionRequest;

def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = param.getRequest();
def parentItem = item.getParentItem();
if(functionRequest.moveParamDown(param)){
    def index = parentItem.indexOf(item);
    def upItem = parentItem.getItem(index + 1);
    def upText = upItem.getText();
    def upData = upItem.getData();
    def upParam = upItem.getData("param");
    def upIcon = upItem.getImage();
    upItem.setText(item.getText());
    upItem.setData(item.getData());
    upItem.setData("param", item.getData("param"));   
    upItem.setImage(item.getImage()); 
    item.setText(upText);
    item.setData(upData);
    item.setData("param", upParam);
    item.setImage(upIcon);    
    requestTree.setSelection(upItem);

    //重新初始化子节点
    for(citem in upItem.getItems()){
        citem.dispose();        
    }
    for(citem in item.getItems()){
        citem.dispose();
    }
    actions.doAction("refreshFunctionTree", actionContext, 
             ["parentItem": upItem, "functionRequest": upItem.getData(), "currentRequest": null]);
    actions.doAction("refreshFunctionTree", actionContext, 
             ["parentItem": item, "functionRequest": item.getData(), "currentRequest": null]);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668311
sname
convertToConstantsButton
stype
SWT.PUSH
simage
toConstantsImage
stoolTiptext
把参数值转化为常量
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4668311
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668311/@4669
sname
RowData
sexclude
false
swidth
-1
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668311/@4670
sname
Listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
4670
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668311/@4670/@4671
sname
executeRequestButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@coolBar/@paramsCoolItem/@paramsToolbar/@4668311/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import xworker.ui.function.FunctionRequestUtil;

import org.xmeta.Thing;

def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = item.getData();

def box = new MessageBox(coolBar.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
box.setText("转为常量");
box.setMessage("确定要把当前函数转为常量么？转为常量后函数参数和子节点都会被删除。");            
if(SWT.OK == box.open()){
    def name = null;
    def value = null;
    def valueThing = null;
    if(param != null){
        name = param.getName();
        value = param.getValue();
        valueThing = param.getSavedValueThing();
    }else{
        name = functionRequest.getThing().getMetadata().getName();
        value = functionRequest.getValue();
        
        valueThing = functionRequest.getThing().doAction("getSavedValueThing", 
            actionContext, ["name":name, "value":value]);
    }
    if(valueThing == null){
         valueThing = FunctionRequestUtil.getValueThing(name, value);
    }
    if(functionRequest != null){
        valueThing.put("name", functionRequest.getThing().getMetadata().getName());
        functionRequest.init(valueThing, false);
    }else{
        param.setValueThing(valueThing, value);
    }
    
    
    actions.doAction("refreshFunctionTree", actionContext, 
        ["parentItem":item, "functionRequest":functionRequest, "currentRequest":null]);
  
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@coolBar/@viewCoolItem
sname
viewCoolItem
sDROP_DOWN
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
viewCoolItem
@/@composite/@coolBar/@viewCoolItem/@viewToolbar
sname
viewToolbar
stype
HORIZONTAL
sFLAT
false
sWRAP
false
sBORDER
false
sSHADOW_OUT
false
sRIGHT
false
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.CoolBar/@CoolItem/@ToolBar
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
viewToolbar
@/@composite/@coolBar/@viewCoolItem/@viewToolbar/@setLeftSizeToolItem
sname
setLeftSizeToolItem
stype
PUSH
simage
application_side_contractImg
stoolTiptext
打开/隐藏函数语法树
senabled
true
sxw_cl_global
false
sdescriptors
xworker.swt.widgets.ToolBar/@ToolItem
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
setLeftSizeToolItem
@/@composite/@coolBar/@viewCoolItem/@viewToolbar/@setLeftSizeToolItem/@listeners
sname
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
listeners
@/@composite/@coolBar/@viewCoolItem/@viewToolbar/@setLeftSizeToolItem/@listeners/@setLeftSizeToolItemSelection
sname
setLeftSizeToolItemSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
setLeftSizeToolItemSelection
@/@composite/@coolBar/@viewCoolItem/@viewToolbar/@setLeftSizeToolItem/@listeners/@setLeftSizeToolItemSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(sashForm.getMaximizedControl() == null){
    sashForm.setMaximizedControl(mainComposite);
    setLeftSizeToolItem.setImage(application_side_expandImage);
}else{
    sashForm.setMaximizedControl(null);
    setLeftSizeToolItem.setImage(application_side_contractImg);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm
sname
sashForm
sstyle
HORIZONTAL
sSMOOTH
false
sweights
30,70
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@SashForm
sth_createIndex
false
sth_mark
false
sid
sashForm
@/@composite/@sashForm/@sashFormGridData
sname
sashFormGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
2
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
sashFormGridData
@/@composite/@sashForm/@treeSashForm
sname
treeSashForm
sstyle
VERTICAL
sSMOOTH
false
sweights
20,80
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@SashForm
sth_createIndex
false
sth_mark
false
sid
treeSashForm
@/@composite/@sashForm/@treeSashForm/@stackComposite
sname
stackComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
stackComposite
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackCompositeGridLayout
sname
stackCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
stackCompositeGridLayout
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackLabel
sname
stackLabel
sBORDER
false
stype
HORIZONTAL
sshadow
SHADOW_OUT
salignment
LEFT
stext
函数栈：
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Label
sth_createIndex
false
sth_mark
false
sid
stackLabel
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackLabel/@stackLabelGridData
sname
stackLabelGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
stackLabelGridData
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackList
sname
stackList
sstyle
SINGLE
sH_SCROLL
true
sV_SCROLL
true
sBORDER
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@List
sth_createIndex
false
sth_mark
false
sid
stackList
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackList/@stackListGridData
sname
stackListGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
stackListGridData
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackList/@Listeners
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sth_mark
false
sid
Listeners
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackList/@Listeners/@stackListSelection
sname
stackListSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_mark
false
sid
stackListSelection
@/@composite/@sashForm/@treeSashForm/@stackComposite/@stackList/@Listeners/@stackListSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def index = stackList.getSelectionIndex();
 def stackFunction = null;
if(index > 0){
    index = index - 1;
    stackFunction = stackList.getData().get(index);
    stackFunction = stackFunction.getCallback().getRequest();
}else{
    stackFunction = stackList.getData().get(index);
}


//初始化函数语法树
actions.doAction("initFunctionRequest", actionContext, ["request": stackFunction, "initStackList": false]);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@treeSashForm/@treeComposite
sname
treeComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
treeComposite
@/@composite/@sashForm/@treeSashForm/@treeComposite/@treeCompositeFillLayout
sname
treeCompositeFillLayout
stype
SWT.HORIZONTAL
sxw_cl_global
false
sdescriptors
xworker.swt.Layouts/@FillLayout
sth_createIndex
false
sth_mark
false
sid
treeCompositeFillLayout
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite
sname
fullRequestComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
fullRequestComposite
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@fullRequestCompositeGridLayout
sname
fullRequestCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
0
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
fullRequestCompositeGridLayout
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTreeLabel
sname
requestTreeLabel
sBORDER
false
stype
HORIZONTAL
sshadow
SHADOW_OUT
salignment
LEFT
stext
函数语法树：
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Label
sth_createIndex
false
sth_mark
false
sid
requestTreeLabel
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTreeLabel/@requestTreeLabelGridData
sname
requestTreeLabelGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
requestTreeLabelGridData
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree
sname
requestTree
sselectStyle
SINGLE
sV_SCROLL
true
sH_SCROLL
true
sCHECK
false
sFULL_SELECTION
false
sHIDE_SELECTION
false
sBORDER
false
slineVisible
false
smultipleColumns
false
sheaderVisible
false
ssortIndicator
false
smoveableColumns
false
sheadImages
false
ssubImages
false
scheckSelection
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Tree
sth_createIndex
false
sth_mark
false
sid
requestTree
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreeGridData
sname
requestTreeGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
requestTreeGridData
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@Listeners
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sth_mark
false
sid
Listeners
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@Listeners/@treeSelection
sname
treeSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_mark
false
sid
treeSelection
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@Listeners/@treeSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;
import xworker.ui.UIManager;
import xworker.ui.function.FunctionParameter;

def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
if(param != null){
    functionRequest = param.getValueRequest();
}

if(functionRequest != null){
    def requestThing = functionRequest.getThing();
    if(requestThing != null){
        UIManager.requestUI("xworker_session_function_swt_outline", requestThing, actionContext);
    }else{
        UIManager.requestUI("xworker_session_function_swt_outline", world.getThing("xworker.ui.function.swt.FunctionHelpDescs/@functioNotSet"), actionContext);
    }
}else{
    UIManager.requestUI("xworker_session_function_swt_outline", world.getThing("xworker.ui.function.swt.FunctionHelpDescs/@functioNotSet"), actionContext);
}

//设置保存的方法
if(param != null){
    UIManager.requestUI("xworker_session_function_param_swt_outline", param.getDescriptor(), actionContext);

    //显示参数的值
    objectViewer.doAction("setObject", actionContext, ["object": param.getValue()]);
    
    //设置参数名
    paramText.setText(param.getName());
    
    //设置按钮的状态
    if(param.getValueThing() == null){
        stepOverButton.setEnabled(false);
        stepReturnButton.setEnabled(false);
        stepIntoButton.setEnabled(false);
        UIManager.requestUI("xworker_session_function_function_swt_outline", world.getThing("xworker.ui.function.xworker.OutlineMessage/@paramFunctioNotSeted"), actionContext);
    }else{
        stepOverButton.setEnabled(true);
        stepReturnButton.setEnabled(true);
        stepIntoButton.setEnabled(true);
        UIManager.requestUI("xworker_session_function_function_swt_outline", param.getValueRequest().getDescriptor(), actionContext);
    }
    runParameterButton.setEnabled(true);

    
    //是否可编辑参数
    if(param.getRequest().isDynamicParameter()){        
        removeParamterButton.setEnabled(true);
    }else{        
        removeParamterButton.setEnabled(true);
    }
    if(param.getValueRequest() != null && param.getValueRequest().isDynamicParameter()){
        addParamterButton.setEnabled(true);
    }else{
        addParamterButton.setEnabled(true);
    }
    
    moveParamterUPButton.setEnabled(true);
    moveParamterDownButton.setEnabled(true);
    
    try{
        //设置不需要修改状态的变更
        actionContext.g().put("thingForm_nomodify", true);
        //自动保存先前为未保存的
        actions.doAction("autoSaveThingForm", actionContext);
        
        if(param.getValueThing() == null){
            thingForm.doAction("setDescriptor", actionContext, ["descriptor": world.getThing("xworker.ui.function.xworker.OutlineMessage/@FunctionNotSet")]);
        }else{
            thingForm.doAction("setThing", actionContext, ["thing": param.getValueThing()]);
        }
    }finally{
        actionContext.g().put("thingForm_nomodify", false);
    }
}else{
    //contentTabFolder.setSelection(functionTabItem);
    
    //设置按钮的状态
    stepOverButton.setEnabled(true);
    stepReturnButton.setEnabled(true);
    stepIntoButton.setEnabled(true);
    runParameterButton.setEnabled(true);
    removeParamterButton.setEnabled(false);
    moveParamterUPButton.setEnabled(false);
    moveParamterDownButton.setEnabled(false);
    
    if(functionRequest.isDynamicParameter()){
        addParamterButton.setEnabled(true);
    }else{
        addParamterButton.setEnabled(false);
    }

    try{
        //设置不需要修改状态的变更
        actionContext.g().put("thingForm_nomodify", true);  
        //自动保存先前为未保存的
        actions.doAction("autoSaveThingForm", actionContext);
        
        thingForm.doAction("setThing", actionContext, ["thing": functionRequest.getThing()]);
    }finally{
        actionContext.g().put("thingForm_nomodify", false);  
    }
    //noteThingForm.doAction("setValues", actionContext, ["values":["description": functionRequest.getThing().getString("description")]]);
    
    objectViewer.doAction("setObject", actionContext, ["object": functionRequest.getValue()]);    
    
    UIManager.requestUI("xworker_session_swt_outline", functionRequest.getDescriptor(), actionContext);
}

saveFunctionButton.setEnabled(true);

mainCompositeStackLayout.topControl = contentComposite;
mainComposite.layout();
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu
sname
requestTreePopMenu
sstyle
POP_UP
sNO_RADIO_GROUP
false
salign
LEFT_TO_RIGHT
svisible
true
senabled
true
sdescriptors
xworker.swt.widgets.Control/@Menu
sth_createIndex
false
sth_mark
false
sid
requestTreePopMenu
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@copyFuntionItem
sname
copyFuntionItem
stext
拷贝
sselected
false
senabled
true
sdescriptors
xworker.swt.widgets.Menu/@MenuItem
sth_createIndex
false
sth_mark
false
sid
copyFuntionItem
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@copyFuntionItem/@listeners
sname
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_mark
false
sid
listeners
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@copyFuntionItem/@listeners/@copyFunctionItemSelection
sname
copyFunctionItemSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_mark
false
sid
copyFunctionItemSelection
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@copyFuntionItem/@listeners/@copyFunctionItemSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionEditor;

//复制当前函数到剪贴板中
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
def thing = null;
if(param != null){
    thing = param.getSavedThing();
}else if(functionRequest != null){
    thing = functionRequest.getSavedThing();
}
FunctionEditor.setClipboardThing(thing);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@cutFunctionItem
sname
cutFunctionItem
stext
剪切
sselected
false
senabled
true
sdescriptors
xworker.swt.widgets.Menu/@MenuItem
sth_createIndex
false
sth_mark
false
sid
cutFunctionItem
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@cutFunctionItem/@listeners
sname
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_mark
false
sid
listeners
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@cutFunctionItem/@listeners/@cutFunctionItemSelection
sname
cutFunctionItemSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_mark
false
sid
cutFunctionItemSelection
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@cutFunctionItem/@listeners/@cutFunctionItemSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionEditor;

//复制当前函数到剪贴板中
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
def thing = null;
if(param != null){
    thing = param.getSavedThing();
}else if(functionRequest != null){
    thing = functionRequest.getSavedThing();
}
FunctionEditor.setClipboardThing(thing);

//删除当前参数的函数设置
if(param != null){
    param.setValueThing(null, null);
    item.setData(null);
    actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":param.getValueRequest(), "currentRequest":null]);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@pasteFunctiomItem
sname
pasteFunctiomItem
stext
粘贴
sselected
false
senabled
true
sdescriptors
xworker.swt.widgets.Menu/@MenuItem
sth_createIndex
false
sth_mark
false
sid
pasteFunctiomItem
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@pasteFunctiomItem/@listeners
sname
listeners
sdescriptors
xworker.swt.events.Listeners/@listeners
sth_createIndex
false
sth_mark
false
sid
listeners
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@pasteFunctiomItem/@listeners/@pasteFunctionItemSelection
sname
pasteFunctionItemSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sth_mark
false
sid
pasteFunctionItemSelection
@/@composite/@sashForm/@treeSashForm/@treeComposite/@fullRequestComposite/@requestTree/@requestTreePopMenu/@pasteFunctiomItem/@listeners/@pasteFunctionItemSelection/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionEditor;

//复制当前函数到剪贴板中
def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
def thing = FunctionEditor.getClipboardThing();

if(thing == null){
    return;  
}else{
    thing = thing.detach();
}

//删除当前参数的函数设置
if(param != null){
    param.setValueThing(thing, null);
    item.setData(param.getValueRequest());
    actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":param.getValueRequest(), "currentRequest":null]);
}else{
    functionRequest.init(valueThing, false);
    
    actions.doAction("refreshFunctionTree", actionContext, 
        ["parentItem":item, "functionRequest":functionRequest, "currentRequest":null]);
 
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite
sname
mainComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
mainComposite
@/@composite/@sashForm/@mainComposite/@contentComposite
sname
contentComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
contentComposite
@/@composite/@sashForm/@mainComposite/@contentComposite/@conentCompositeGridLayout
sname
conentCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
conentCompositeGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder
sname
contentTabFolder
sstyle
TOP
sBORDER
false
sFLAT
true
sCLOSE
false
sSINGLE
false
sMRUVisible
false
ssimple
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@CTabFolder
sth_createIndex
false
sth_mark
false
sid
contentTableFolder
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem
sname
paramTabItem
stext
参数预览
sCLOSE
false
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
sth_createIndex
false
sth_mark
false
sid
paramTabItem
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite
sname
objectViewerComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
objectViewerComposite
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite/@objectViewerCompositeGridLayout
sname
objectViewerCompositeGridLayout
snumColumns
2
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
objectViewerCompositeGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite/@paramNameLabel
sname
paramNameLabel
sBORDER
false
stype
HORIZONTAL
sshadow
SHADOW_OUT
salignment
LEFT
stext
参数名：
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Label
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramNameLabel
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite/@paramText
sname
paramText
sstyle
SINGLE
sH_SCROLL
false
sV_SCROLL
false
sWRAP
false
sREAD_ONLY
true
sPASSWORD
false
sSEARCH
false
sCANCEL
false
sBORDER
true
salign
LEFT
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Text
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramText
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite/@paramText/@paramTextGridData
sname
paramTextGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
paramTextGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite/@objectViewer
sname
objectViewer
sH_SCROLL
true
sV_SCROLL
true
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sdescriptors
xworker.swt.Widgets/@ObjectViewer
sth_createIndex
false
sth_mark
false
sid
objectViewer
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramTabItem/@objectViewerComposite/@objectViewer/@objectViewerGridData
sname
objectViewerGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
2
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
objectViewerGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem
sname
functionTabItem
stext
编辑函数
sCLOSE
false
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
sth_createIndex
false
sth_mark
false
sid
functionTabItem
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite
sname
functionEditorComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
functionEditorComposite
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@functionEditorCompositeGridLayout
sname
functionEditorCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
0
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
functionEditorCompositeGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@thingForm
sname
thingForm
scolumn
1
sdefaultModify
thingFormModifedListener
sH_SCROLL
true
sV_SCROLL
true
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sdescriptors
xworker.swt.Widgets/@ThingForm
sth_createIndex
false
sth_mark
false
sid
thingForm
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@thingForm/@thingFormGridData
sname
thingFormGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
thingFormGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sid
5983
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@5984
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
2
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
5984
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@5985
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
5985
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@46682
sname
saveFunctionButton
stext
保存函数修改(&S)
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
46682
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@46682/@4669
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
4669
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@46682/@4670
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
4670
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@46682/@4670/@4671
sname
saveFunctionThingButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
4671
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@functionTabItem/@functionEditorComposite/@5983/@46682/@4670/@4671/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
if(param != null){
    functionRequest = param.getValueRequest();
}
def values = thingForm.doAction("getValues", actionContext);
functionRequest.getThing().putAll(values);
functionRequest.getThing().save();
functionRequest.setDescription(values.get("description"));

item.setText(functionRequest.getThing().getMetadata().getLabel() + "（" + functionRequest.getDescriptor().getMetadata().getLabel() + "）");
saveFunctionButton.setText("保存函数修改");
actionContext.g().put("thingForm_modify", false);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem
sname
paramFnSetTabItem
stext
设置函数
sCLOSE
false
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
sth_createIndex
false
sth_mark
false
sid
paramFnSetTabItem
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite
sname
paramComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
paramComposite
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@paramCompositeGridLayout
sname
paramCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
paramCompositeGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder
sname
ctabFolder
sstyle
TOP
sBORDER
false
sFLAT
true
sCLOSE
false
sSINGLE
false
sMRUVisible
true
ssimple
true
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@CTabFolder
sth_createIndex
false
sth_mark
false
sid
ctabFolder
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@ctabFolderGridData
sname
ctabFolderGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
ctabFolderGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem
sname
functionItem
stext
函数原型
stoolTipText
在这里选择函数原型。
sCLOSE
false
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
sth_createIndex
false
sth_mark
false
sid
functionItem
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite
sname
composite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
composite
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@compositeGridLayout
sname
compositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
compositeGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@functionsSelector
sname
functionsSelector
sthing
xworker.lang.function.Functions
sregistType
child
ssearchByKeywords
true
sshowDescBrowser
true
sdescBrowserRight
true
sautoLoad
true
scache
true
sdescriptors
xworker.swt.Widgets/@ThingRegistSelector
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
functionsSelector
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@functionsSelector/@functionsSelectorGridData
sname
functionsSelectorGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
functionsSelectorGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@functionsSelector/@actions
sname
actions
sdescriptors
xworker.swt.xworker.ThingRegistSelector/@actions1
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@functionsSelector/@actions/@selected
sname
selected
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;

if(actionContext.get("useFunctionProtoButton") == null){
    return;
}

if(thing != null && thing.getThingName() != "ThingIndex"){ 
    useFunctionProtoButton.setEnabled(true);
}else{
    useFunctionProtoButton.setEnabled(false);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
selected
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@functionsSelector/@actions/@defaultSelected
sname
defaultSelected
sisSynchronized
false
sthrowException
true
suseOtherAction
true
sotherActionPath
xworker.ui.function.FunctionRequestShell/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7313/@7315/@7316/@GroovyAction
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;

if(thing != null && thing.getThingName() != "ThingIndex"){ 
    useFunctionProtoButton.setEnabled(true);
}else{
    useFunctionProtoButton.setEnabled(false);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
defaultSelected
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.Widgets/@Composite
sid
7310
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7311
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
7311
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7312
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
7312
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7313
sname
useFunctionProtoButton
stext
使用函数原型（&2）
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
7313
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7313/@7314
sname
RowData
sexclude
false
swidth
150
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
7314
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7313/@7315
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
7315
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7313/@7315/@7316
sname
selectButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
7316
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@7313/@7315/@7316/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import org.xmeta.Thing;

//当前节点选中的函数
def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = item.getData();
def thing = functionsSelector.doAction("getThing"); 
if(thing == null){
    def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK);
    box.setText("选择函数原型");
    box.setMessage("当前选中的函数 原型不存在或是一个目录！");            
    box.open();
    return;
}

//如果函数已经存在，提示
if(functionRequest != null || (param != null && param.getValueThing() != null)){
    def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
    box.setText("选择函数原型");
    box.setMessage("当前节点的函数已存在，是否要覆盖？\n如果使用的函数原型，原先的函数参数及子节点将会被删除！");            
    if(SWT.CANCEL == box.open()){
        return;
    }
}

        if(thing == null){
            def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK);
            box.setText("选择函数原型");
            box.setMessage("当前选中的函数 原型不存在！");            
            box.open();
        }else if(param == null){
            def valueThing = new Thing(thing.getMetadata().getPath());
            valueThing.put("name", functionRequest.getThing().getMetadata().getName());
            functionRequest.init(valueThing, false);
            
            actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":functionRequest, "currentRequest":null]);
            
        }else{
            //设置参数的函数
            def valueThing = new Thing(thing.getMetadata().getPath());
            valueThing.set("name", param.getName());
            param.setValueThing(valueThing, null);
            item.setData(param.getValueRequest()); //参数的函数已变更，重新设置
            
            actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":param.getValueRequest(), "currentRequest":null]);

            //如果函数是立即执行的，那么执行
            if(thing.getBoolean("runAtParameterSetted")){
                param.execute();
            }else{           
                //选中下一个未设置的参数
                def selectItem = actions.doAction("selectNextUnSetParam", actionContext);
                if(selectItem == null){
                    actions.doAction("onAllParameterSetted");
                }
            }
        }
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@73131
sname
useBestFunctionButton
stext
使用最佳函数（&3）
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
73131
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@73131/@7314
sname
RowData
sexclude
false
swidth
150
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
7314
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@73131/@7315
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
7315
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@73131/@7315/@7316
sname
selectBestFnButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
7316
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionItem/@composite/@7310/@73131/@7315/@7316/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import org.xmeta.Thing;

//当前节点选中的函数
def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = item.getData();

//如果函数已经存在，提示
if(functionRequest != null || (param != null && param.getValueThing() != null)){
    def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
    box.setText("设置最佳函数");
    box.setMessage("当前节点的函数已存在，是否要覆盖？\n如果使用的函数原型，原先的函数参数及子节点将会被删除！");            
    if(SWT.CANCEL == box.open()){
        return;
    }
}
if(param != null){
   //设置参数的函数
   if(!param.setBestFunction()){
       def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_INFORMATION | SWT.OK);
       box.setText("设置最佳函数");
       box.setMessage("当前参数未设置最佳函数！");            
       box.open();
       return;       
   }
   
   item.setData(param.getValueRequest()); //参数的函数已变更，重新设置
            
   actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":param.getValueRequest(), "currentRequest":null]);

       
    //选中下一个未设置的参数
    def selectItem = actions.doAction("selectNextUnSetParam", actionContext);
    if(selectItem == null){
        actions.doAction("onAllParameterSetted");
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem
sname
functionInsTabItem
stext
函数实例
stoolTipText
在这里可以选择已注册的函数实例。
sCLOSE
false
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
sth_createIndex
false
sth_mark
false
sid
functionInsTabItem
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite
sname
composite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
composite
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@compositeGridLayout
sname
compositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
compositeGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@functionInsSelector
sname
functionInsSelector
sthing
xworker.lang.function.FunctionInstance
sregistType
child
ssearchByKeywords
true
sshowDescBrowser
true
sdescBrowserRight
true
sautoLoad
true
scache
true
sdescriptors
xworker.swt.Widgets/@ThingRegistSelector
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
functionInsSelector
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@functionInsSelector/@functionInsSelectorGridData
sname
functionInsSelectorGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
functionInsSelectorGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@functionInsSelector/@actions
sname
actions
sdescriptors
xworker.swt.xworker.ThingRegistSelector/@actions1
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@functionInsSelector/@actions/@selected
sname
selected
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(actionContext.get("callFunctionButton") == null){
    return;
}

if(thing != null && thing.getThingName() != "ThingIndex"){
    callFunctionButton.setEnabled(true);
    copyFunctionButton.setEnabled(true);
}else{
    callFunctionButton.setEnabled(false);
    copyFunctionButton.setEnabled(false);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
selected
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@functionInsSelector/@actions/@defaultSelected
sname
defaultSelected
sisSynchronized
false
sthrowException
true
suseOtherAction
true
sotherActionPath
xworker.ui.function.FunctionRequestShell/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7313/@7315/@7316/@GroovyAction
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(thing != null && thing.getThingName() != "ThingIndex"){
    callFunctionButton.setEnabled(true);
    copyFunctionButton.setEnabled(true);
}else{
    callFunctionButton.setEnabled(false);
    copyFunctionButton.setEnabled(false);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
defaultSelected
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.Widgets/@Composite
sid
7310
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7311
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
7311
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7312
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
7312
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7313
sname
callFunctionButton
stext
调用函数实例
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
7313
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7313/@7314
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
7314
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7313/@7315
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
7315
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7313/@7315/@7316
sname
selectButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
7316
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@7313/@7315/@7316/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import org.xmeta.Thing;

//当前节点选中的函数
def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = item.getData();

//如果函数已经存在，提示
if(functionRequest != null || (param != null && param.getValueThing() != null)){
    def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
    box.setText("调用函数实例");
    box.setMessage("当前节点的函数已存在，是否要覆盖？\n如果使用的函数原型，原先的函数参数及子节点将会被删除！");            
    if(SWT.CANCEL == box.open()){
        return;
    }
}

def thing = functionInsSelector.doAction("getThing");

        if(thing == null){
            def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK);
            box.setText("选择函数实例");
            box.setMessage("当前选中的函数 实例不存在！");            
            box.open();
        }else if(param == null){            
            def valueThing = new Thing("xworker.ui.function.common.CallFunction");            
            valueThing.put("name", functionRequest.getThing().getMetadata().getName());
            def functionPath = new Thing("xworker.lang.function.values.StringValue");
            functionPath.put("name", "functionPath");
            functionPath.put("value", thing.getMetadata().getPath());
            valueThing.addChild(functionPath);
            
            functionRequest.init(valueThing, false);
            
            actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":functionRequest, "currentRequest":null]);
            
            functionRequest.run(actionContext);
        }else{
            //设置参数的函数
            def valueThing = new Thing("xworker.ui.function.common.CallFunction");            
            valueThing.put("name", param.getName());
            def functionPath = new Thing("xworker.lang.function.values.StringValue");
            functionPath.put("name", "functionPath");
            functionPath.put("value", thing.getMetadata().getPath());
            valueThing.addChild(functionPath);

            param.setValueThing(valueThing, null);
            item.setData(param.getValueRequest()); //参数的函数已变更，重新设置
            
            actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":param.getValueRequest(), "currentRequest":null]);

            //如果函数是立即执行的，那么执行
            if(thing.getBoolean("runAtParameterSetted")){
                param.execute();
            }else{           
                //选中下一个未设置的参数
                def selectItem = actions.doAction("selectNextUnSetParam", actionContext, ["treeItem": item]);
                if(selectItem == null){
                    actions.doAction("onAllParameterSetted");
                }
            }
        }
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@73131
sname
copyFunctionButton
stext
复制函数实例
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
73131
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@73131/@7314
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
7314
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@73131/@7315
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
7315
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@73131/@7315/@7316
sname
selectButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
7316
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@functionInsTabItem/@composite/@7310/@73131/@7315/@7316/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import org.xmeta.Thing;

//当前节点选中的函数
def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = item.getData();

//如果函数已经存在，提示
if(functionRequest != null || (param != null && param.getValueThing() != null)){
    def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK | SWT.CANCEL);
    box.setText("复制函数实例");
    box.setMessage("当前节点的函数已存在，是否要覆盖？\n如果使用新的函数实例，原先的函数参数及子节点将会被删除！");            
    if(SWT.CANCEL == box.open()){
        return;
    }
}

def thing = functionInsSelector.doAction("getThing");
        if(thing == null){
            def box = new MessageBox(buttonComposite.getShell(), SWT.ICON_WARNING | SWT.OK);
            box.setText("选择函数实例");
            box.setMessage("当前选中的函数 实例不存在！");            
            box.open();
        }else if(param == null){            
            def valueThing = thing.detach();
            valueThing.put("name", functionRequest.getThing().getMetadata().getName());
            
            functionRequest.init(valueThing, false);
            
            actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":functionRequest, "currentRequest":null]);
            functionRequest.run(actionContext);
        }else{
            //设置参数的函数
            def valueThing = thing.detach();
            valueThing.put("name", param.getName());

            param.setValueThing(valueThing, null);
            item.setData(param.getValueRequest()); //参数的函数已变更，重新设置
            
            actions.doAction("refreshFunctionTree", actionContext, 
                ["parentItem":item, "functionRequest":param.getValueRequest(), "currentRequest":null]);

            //如果函数是立即执行的，那么执行
            if(thing.getBoolean("runAtParameterSetted")){
                param.execute();
            }else{           
                //选中下一个未设置的参数
                def selectItem = actions.doAction("selectNextUnSetParam", actionContext, ["treeItem": item]);
                if(selectItem == null){
                    actions.doAction("onAllParameterSetted");
                }
            }
        }
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem
sname
groovyItem
stext
脚本（Groovy）
stoolTipText
通过编写Groovy脚本返回数据。
sCLOSE
false
sdescriptors
xworker.swt.custom.CTabFolder/@CTabItem
sth_createIndex
false
sth_mark
false
sid
groovyItem
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite
sname
groovyComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
groovyComposite
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@groovyCompoisteGridLayout
sname
groovyCompoisteGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
groovyCompoisteGridLayout
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@codeText
sname
codeText
scodeName
java
scodeType
java
sWRAP
false
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@CodeEditor
sth_createIndex
false
sth_mark
false
sid
codeText
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@codeText/@codeTextGridData
sname
codeTextGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.Commons/@GridData
sth_createIndex
false
sth_mark
false
sid
codeTextGridData
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887
sname
buttonComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.Widgets/@Composite
sid
10887
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10888
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
10888
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10889
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
10889
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10890
sname
executeButton
stext
执行（&1）
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
10890
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10890/@10891
sname
RowData
sexclude
false
swidth
120
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
10891
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10890/@10892
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
10892
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10890/@10892/@10893
sname
executeButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
10893
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@paramFnSetTabItem/@paramComposite/@ctabFolder/@groovyItem/@groovyComposite/@10887/@10890/@10892/@10893/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

import org.xmeta.Thing;
import xworker.ui.function.FunctionStatus;
import xworker.ui.function.FunctionManager;

//当前选中的参数
def item = requestTree.getSelection()[0];
def param = item.getData("param");
def functionRequest = item.getData();

//执行脚本并获取参数值
def gthing = world.getThing("xworker.ui.function.swt.SelectFunctionGroovy");
gthing.set("code", codeText.getText());
def result = gthing.getAction().run(functionRequest.getActionContext());

def box = new MessageBox(groovyComposite.getShell(), SWT.ICON_INFORMATION | SWT.YES | SWT.NO | SWT.CANCEL);
box.setText("Groovy执行结果");
box.setMessage("选择'是'把Groovy当做函数，'否'仅替换参数值。");
def r = box.open();

if(r == SWT.YES || r == SWT.NO){
    if(param == null){
        if(r == SWT.NO){
            FunctionManager.finishRequest(functionRequest, result);
        }else{
            def thing = new Thing("xworker.lang.function.values.GroovyValue");
            thing.getAttributes().putAll(functionRequest.getThing().getAttributes());
            thing.put("code", codeText.getText());
	        functionRequest.init(thing, false);
            
            actions.doAction("refreshFunctionTree", actionContext,  ["parentItem":item, "functionRequest":functionRequest, "currentRequest":null]);
            //functionRequest.getCallback().ok(result, FunctionStatus.RUNNING, actionContext);
            FunctionManager.finishRequest(functionRequest, result);
        } 
    }else if(r == SWT.YES){
        //函数的回调，并返回原始界面
        param.setGroovyValue(result, codeText.getText());
        param.callback();
    }else{
        param.setValue(result, param.getValueThing());
        param.callback();
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@contentComposite/@contentTableFolder/@contentTabFolderGridData
sname
contentTabFolderGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
contentTabFolderGridData
@/@composite/@sashForm/@mainComposite/@dialogMainComposite
sname
dialogMainComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
slabel
对话
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
dialogMainComposite
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite
sname
dialogFormComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
dialogFormComposite
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogCompositeGridLayout
sname
dialogCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
0
smarginHeight
0
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
0
sverticalSpacing
0
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
dialogCompositeGridLayout
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm
sname
dialogForm
sH_SCROLL
true
sV_SCROLL
true
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sdescriptors
xworker.swt.Widgets/@ThingForm
sth_createIndex
false
sth_mark
false
sid
dialogForm
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@dialogFormGridData
sname
dialogFormGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
dialogFormGridData
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@formUIHandler
sname
formUIHandler
ssync
false
suiHandlerId
xworker_session_swt_dialogForm
sregistToUIManager
false
scallbakMyself
true
sdescriptors
xworker.ui.swt.xworker.ThingFormUIHandler
sth_createIndex
false
sth_mark
false
sid
formUIHandler
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@formUIHandler/@actions
sname
actions
sdescriptors
xworker.ui.UIHandler/@actions1
sth_createIndex
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@formUIHandler/@actions/@Begin
sname
requestCallback
schangeSelf
false
sinterpretationType
Self
sattributeTemplate
false
schildsAttributeTemplate
false
svarScope
Local
sisSynchronized
false
sthrowException
true
suseOtherAction
false
screateLocalVarScope
false
ssaveReturn
false
sdisableGlobalContext
false
sdescriptors
xworker.lang.actions.Actions/@ActionGroup
sth_createIndex
false
sth_mark
false
sid
Begin
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@formUIHandler/@actions/@Begin/@actions
sname
actions
sdescriptors
xworker.lang.actions.Begin/@actions
sth_createIndex
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@formUIHandler/@actions/@Begin/@actions/@setFormTop
sname
setFormTop
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionCallback;
import xworker.ui.function.FunctionRequestUIFactory;
import xworker.ui.function.FunctionRequestUtil;

//uiform的回调，用于当表单界面已经完成时界面的事项处理
stackLayout.topControl = dialogFormComposite;
dialogMainComposite.layout();

mainCompositeStackLayout.topControl = dialogMainComposite;
mainComposite.layout();

//选择节点
def requestMessage = uiRequest.getRequestMessage();
def functionRequest = null;
def param = null;
if(requestMessage instanceof FunctionCallback){
    functionRequest = requestMessage.getRequest();
    param = requestMessage.getParam();
}else{
    functionRequest = requestMessage;
}
if(functionRequest != null){
    actions.doAction("selectRequestItem", actionContext, ["request": functionRequest, "param": param]);
}

actionContext.getScope(0).put("uiRequest", uiRequest);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
setFormTop
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@formUIHandler/@actions/@Begin/@actions/@requestCallback
sinterpretationType
Self
sattributeTemplate
false
schildsAttributeTemplate
false
svarScope
Local
sname
requestCallback
sisSynchronized
false
sthrowException
true
suseOtherAction
false
screateLocalVarScope
false
ssaveReturn
false
sdisableGlobalContext
false
suiHandlerId
xworker_session_swt_outline
sthingPathVar
uiRequest.getThingPath()
sdescriptors
xworker.ui.UIActions/@RequestUI
sth_createIndex
false
sth_mark
false
sid
requestCallback
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@dialogForm/@sesssionDialogTreeMarkHandler
sname
formMarkHandler
ssync
false
suiHandlerId
xworker_session_swt_dialogForm_mark
sregistToUIManager
true
sdescriptors
xworker.ui.swt.design.MarkUIHandler
sth_createIndex
false
sth_mark
false
sid
sesssionDialogTreeMarkHandler
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@splitComposite
sname
splitComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sbackground
"#0080C0"
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
splitComposite
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@splitComposite/@splitCompositeGridData
sname
splitCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
0
sverticalSpan
0
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
splitCompositeGridData
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983
sname
buttonComposite1
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sid
5983
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5984
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
5984
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5985
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
5985
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5986
sname
addParamOkButton
stext
确定(&O)
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
5986
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5986/@5987
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5987
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5986/@5988
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5988
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5986/@5988/@5989
sname
sendButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5989
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogFormComposite/@5983/@5986/@5988/@5989/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
try{
    actionContext.push().put("message", "ok");
    dialogActions.doAction("executeForm", actionContext);
}finally{
    actionContext.pop();
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogContainerComposite
sname
dialogContainerComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
dialogContainerComposite
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogContainerComposite/@dialogContainerCompositeFillLayout
sname
dialogContainerCompositeFillLayout
stype
SWT.HORIZONTAL
sxw_cl_global
false
sdescriptors
xworker.swt.Layouts/@FillLayout
sth_createIndex
false
sth_mark
false
sid
dialogContainerCompositeFillLayout
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogContainerComposite/@compositeUIHandler
sname
compositeUIHandler
ssync
false
suiHandlerId
xworker_session_swt_dialogComposite
sregistToUIManager
false
scallbakMyself
true
sdescriptors
xworker.ui.swt.widgets.CompositeUIHandler
sth_createIndex
false
sth_mark
false
sid
compositeUIHandler
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogContainerComposite/@compositeUIHandler/@actions
sname
actions
sdescriptors
xworker.ui.UIHandler/@actions1
sth_createIndex
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@dialogContainerComposite/@compositeUIHandler/@actions/@requestCallback
sname
requestCallback
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.function.FunctionCallback;

stackLayout.topControl = dialogContainerComposite;
dialogMainComposite.layout();

mainCompositeStackLayout.topControl = dialogMainComposite;
mainComposite.layout();

//选择节点
def requestMessage = uiRequest.getRequestMessage();
def functionRequest = null;
def param = null;
if(requestMessage instanceof FunctionCallback){
    functionRequest = requestMessage.getRequest();
    param = requestMessage.getParam();
}else{
    functionRequest = requestMessage;
}
if(functionRequest != null){
    actions.doAction("selectRequestItem", actionContext, ["request": functionRequest, "param": param]);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
requestCallback
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite
sname
thingEditorComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
thingEditorComposite
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@thingEditorCompositeGridLayout
sname
thingEditorCompositeGridLayout
smakeColumnsEqualWidth
false
smarginWidth
5
smarginHeight
5
smarginLeft
0
smarginTop
0
smarginRight
0
smarginBottom
0
shorizontalSpacing
5
sverticalSpacing
5
sdescriptors
xworker.swt.Layouts/@GridLayout
sth_createIndex
false
sth_mark
false
sid
thingEditorCompositeGridLayout
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@thingEditor
sname
thingEditor
stitle
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@ThingEditor
sth_createIndex
false
sth_mark
false
sid
thingEditor
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@thingEditor/@thingEditorUIHandler
sname
thingEditorUIHandler
ssync
false
suiHandlerId
xworker_session_swt_dialogThingEditor
sregistToUIManager
false
scallbakMyself
true
sdescriptors
xworker.ui.swt.xworker.ThingEditorUIHandler
sth_createIndex
false
sth_mark
false
sid
thingEditorUIHandler
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@thingEditor/@thingEditorUIHandler/@actions
sname
actions
sdescriptors
xworker.ui.UIHandler/@actions1
sth_createIndex
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@thingEditor/@thingEditorUIHandler/@actions/@requestCallback
sname
requestCallback
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
stackLayout.topControl = thingEditorComposite;
dialogMainComposite.layout();

//选择节点
def requestMessage = uiRequest.getRequestMessage();
def functionRequest = null;
def param = null;
if(requestMessage instanceof FunctionCallback){
    functionRequest = requestMessage.getRequest();
    param = requestMessage.getParam();
}else{
    functionRequest = requestMessage;
}
if(functionRequest != null){
    actions.doAction("selectRequestItem", actionContext, ["request": functionRequest, "param": param]);
}

mainCompositeStackLayout.topControl = dialogMainComposite;
mainComposite.layout();
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
requestCallback
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@thingEditor/@thingEditorGridData
sname
thingEditorGridData
sstyle
FILL_BOTH
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.Commons/@GridData
sth_createIndex
false
sth_mark
false
sid
thingEditorGridData
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@splitComposite
sname
splitComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sbackground
"#0080C0"
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
splitComposite
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@splitComposite/@splitCompositeGridData
sname
splitCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
0
sverticalSpan
0
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
splitCompositeGridData
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983
sname
buttonComposite2
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sid
5983
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5984
sname
buttonCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
-1
shorizontalAlignment
END
sverticalAlignment
CENTER
shorizontalSpan
1
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sid
5984
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5985
sname
buttonCompositeRowLayout
sfill
false
sjustify
false
smarginWidth
0
smarginHeight
0
smarginLeft
3
smarginTop
3
smarginRight
3
smarginBottom
3
spack
true
sspacing
3
stype
SWT.HORIZONTAL
swrap
true
sdescriptors
xworker.swt.Layouts/@RowLayout
sid
5985
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5986
sname
editokButton
stext
确定(&1)
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
5986
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5986/@5987
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5987
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5986/@5988
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5988
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5986/@5988/@5989
sname
sendButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5989
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@5986/@5988/@5989/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
try{
    thingEditor.editorActions.doAction("save");

    actionContext.push().put("message", "ok");
    dialogActions.doAction("executeEditThing", actionContext);
}finally{
    actionContext.pop();
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@editDialigButton
sname
editThingDialigButton
stext
编辑对话(&2)
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sth_mark
false
sid
editDialigButton
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@editDialigButton/@5987
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5987
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@editDialigButton/@5988
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5988
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@editDialigButton/@5988/@5989
sname
editDialogButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5989
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@editDialigButton/@5988/@5989/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Thing;

def request = thingEditorUIHandler.getCurrentRequest();
if(request != null){
    def open = new Thing("xworker.ide.worldExplorer.actions.ExplorerActions/@OpenThing");
    open.put("thingPath", request.getThing().getMetadata().getPath());
    open.doAction("run", actionContext);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@59861
sname
editcancelButton
stext
取消(&C)
stype
SWT.PUSH
sflat
false
sborder
false
sselected
false
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Button
sth_createIndex
false
sid
59861
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@59861/@5987
sname
RowData
sexclude
false
swidth
80
sheight
-1
sdescriptors
xworker.swt.layout.LayoutDatas/@RowData
sth_createIndex
false
sid
5987
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@59861/@5988
sname
Listeners
sdescriptors
xworker.swt.widgets.Widget/@Listeners
sth_createIndex
false
sid
5988
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@59861/@5988/@5989
sname
sendButtonSelection
stype
Selection
sdescriptors
xworker.swt.events.Listeners/@listeners/@Listener
sth_createIndex
false
sid
5989
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@thingEditorComposite/@5983/@59861/@5988/@5989/@GroovyAction
sname
GroovyAction
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
try{
    actionContext.push().put("message", "cancel");
    dialogActions.doAction("executeEditThing", actionContext);
}finally{
    actionContext.pop();
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
GroovyAction
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@createOutline
sname
createOutline
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(actionContext.get("outlineComposite") == null){
    return;
}

def browserThing = world.getThing("xworker.ui.session.swt.DialogOutline/@composite");

try{
    if(actionContext.get("tab") == null){
        return;
    }
    actionContext.push().put("parent", outlineComposite);
    def outline = browserThing.doAction("create", actionContext);
    tab.setData("outlineTree", outline);
}finally{
    actionContext.pop();
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.swt.Widgets/@Code
sth_createIndex
false
sth_mark
false
sid
createOutline
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@actions
sname
dialogActions
sdescriptors
xworker.swt.Widgets/@actions
sth_createIndex
false
sth_mark
false
sid
actions
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@actions/@execute
sname
executeForm
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Thing;

if(message == "ok"){
    def validated = dialogForm.doAction("validate", actionContext);
    if(!validated){
        return;
    }
}

def request = formUIHandler.getCurrentRequest();

def values = dialogForm.doAction("getValues", actionContext);
request.run(["values": values, "message": message]);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
execute
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@actions/@executeEditThing
sname
executeEditThing
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.xmeta.Thing;

def request = thingEditorUIHandler.getCurrentRequest();
if(request != null){
    def thing = request.getThing();
    thing.doAction("run", request.actionContext, ["message": message, "request": request]);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
executeEditThing
@/@composite/@sashForm/@mainComposite/@dialogMainComposite/@stackLayout
sname
stackLayout
stopControl
dialogFormComposite
sdescriptors
xworker.swt.Layouts/@StackLayout
sth_createIndex
false
sth_mark
false
sid
stackLayout
@/@composite/@sashForm/@mainComposite/@mainCompositeStackLayout
sname
mainCompositeStackLayout
stopControl
contentComposite
sdescriptors
xworker.swt.Layouts/@StackLayout
sth_createIndex
false
sth_mark
false
sid
mainCompositeStackLayout
@/@composite/@splitComposite
sname
splitComposite
sBORDER
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_FOCUS
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
sbackground
"#0080C0"
scapture
false
senabled
true
sredraw
true
svisible
true
sxw_cl_global
false
sdescriptors
xworker.swt.Widgets/@Composite
sth_createIndex
false
sth_mark
false
sid
splitComposite
@/@composite/@splitComposite/@splitCompositeGridData
sname
splitCompositeGridData
sstyle
FILL_HORIZONTAL
shorizontalIndent
0
swidth
-1
sheight
1
shorizontalAlignment
BEGINNING
sverticalAlignment
CENTER
shorizontalSpan
2
sverticalSpan
1
sgrabExcessHorizontalSpace
false
sgrabExcessVerticalSpace
false
sxw_cl_global
false
sdescriptors
xworker.swt.layout.LayoutDatas/@GridData
sth_createIndex
false
sth_mark
false
sid
splitCompositeGridData
@/@composite/@actions
sname
actions
sdescriptors
xworker.swt.Widgets/@actions
sth_createIndex
false
sth_mark
false
sid
actions
@/@composite/@actions/@initTree
sname
initFullRequestTree
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;

import xworker.swt.util.XWorkerTreeUtil;

//先清空树，中间的节点也有可能被设置成起始节点
for(item in requestTree.getItems()){
    item.dispose();
}

init(requestTree, request.getRoot(), request, true);
    
if(actionContext.get("initStackList") != false){    
    //初始化函数栈    
    stackList.removeAll();
    def stacks = request.getStacks();
    stackList.setData(stacks);
    for(stack in stacks){
        def callback = stack.getCallback();
        def param = null;
        if(callback != null){
            param = callback.getParam();
            if(param ==null && callback.getRequest() != null && callback.getRequest().getCallback() != null){
                param = callback.getRequest().getCallback().getParam();
            }
        }
        def label = stack.getThing().getMetadata().getLabel();
        if(param != null){
            label = param.getLabel() + "（" + label + "）";
        }else{
            
        }
        stackList.add(label);
    }
}
    
def init(parent, functionRequest, currentRequest, isRoot){
    def thing = functionRequest.getThing();
    def item = new TreeItem(parent, SWT.NONE);
    item.setData(functionRequest);
    XWorkerTreeUtil.initItem(item, thing, actionContext);
    if(isRoot){
        item.setImage(requestImg);
    }
    
    for(param in functionRequest.getParameters()){
        def childItem = null;
        if(param.getValueRequest() != null){          
            childItem = init(item, param.getValueRequest(), currentRequest, false);            
            childItem.setData("param", param);
        }else{
            childItem = new TreeItem(item, SWT.NONE);
            XWorkerTreeUtil.initItem(childItem, param.getDescriptor(), actionContext);
            childItem.setData("param", param);
        }
        def valueThing = param.getValueThing();
        if(valueThing != null){
            childItem.setText(param.getLabel() + "（" + valueThing.getDescriptor().getMetadata().getLabel() + "）");
        }else{
            childItem.setText(param.getLabel());
        }
        actions.doAction("setParamItemIcon", actionContext, ["treeItem": childItem, "param": param]);
    }
    
    //item.setExpanded(true);
    if(functionRequest == currentRequest){
        requestTree.select(item);
    }
    
    return item;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
initTree
@/@composite/@actions/@initTree/@ins
sisValidate
false
sname
ins
sdescriptors
xworker.lang.actions.Inout/@ins
sth_createIndex
false
sth_mark
false
sid
ins
@/@composite/@actions/@initTree/@ins/@functionRequest
sname
functionRequest
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
functionRequest
@/@composite/@actions/@setParamItemIcon
sname
setParamItemIcon
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(actionContext.get("param") == null){
    return;
}

if(param.isReady()){
    treeItem.setImage(paramReadyImg);
}else if(param.getValueRequest() == null){
    treeItem.setImage(paramNotSetImg);
}else{
    treeItem.setImage(paramNotReadyImg);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
setParamItemIcon
@/@composite/@actions/@setParamItemIcon/@ins
sisValidate
false
sname
ins
sdescriptors
xworker.lang.actions.Inout/@ins
sth_createIndex
false
sth_mark
false
sid
ins
@/@composite/@actions/@setParamItemIcon/@ins/@request
sname
param
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
request
@/@composite/@actions/@setParamItemIcon/@ins/@parent
sname
treeItem
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
parent
@/@composite/@actions/@refreshFunctionTree
sname
refreshFunctionTree
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.TreeItem;

import xworker.swt.util.XWorkerTreeUtil;

//先清空父节点
for(item in parentItem.getItems()){
    item.dispose();
}

if(functionRequest != null){
    refresh(parentItem, functionRequest, currentRequest);
}

def param = parentItem.getData("param");
if(param != null){
    if(functionRequest != null){
        parentItem.setText(param.getName() + "（" + functionRequest.getDescriptor().getMetadata().getLabel() + "）");
    }else{
        parentItem.setText(param.getName());
    }
}else{
    parentItem.setText(functionRequest.getThing().getMetadata().getName() + "（" + functionRequest.getDescriptor().getMetadata().getLabel() + "）");
}
actions.doAction("setParamItemIcon", actionContext, ["treeItem": parentItem, "param": param]);

treeSelection.handleEvent(null);

def refresh(item, functionRequest, currentRequest){
    for(param in functionRequest.getParameters()){
        def childItem = null;
        if(param.getValueRequest() != null){     
            childItem = new TreeItem(item, SWT.NONE);
            XWorkerTreeUtil.initItem(childItem, param.getDescriptor(), actionContext);
            childItem.setData("param", param);   
            childItem.setData(param.getValueRequest());
            refresh(childItem, param.getValueRequest(), currentRequest);                        
        }else{
            childItem = new TreeItem(item, SWT.NONE);
            XWorkerTreeUtil.initItem(childItem, param.getDescriptor(), actionContext);
            childItem.setData("param", param);
        }
        def valueThing = param.getValueThing();
        if(valueThing != null){
            childItem.setText(param.getName() + "（" + valueThing.getDescriptor().getMetadata().getLabel() + "）");
        }else{
            childItem.setText(param.getName());
        }
        actions.doAction("setParamItemIcon", actionContext, ["treeItem": childItem, "param": param]);
    }
    
    item.setExpanded(true);
    if(functionRequest == currentRequest){
        requestTree.select(item);
    }
    
    return item;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
refreshFunctionTree
@/@composite/@actions/@refreshFunctionTree/@ins
sisValidate
false
sname
ins
sdescriptors
xworker.lang.actions.Inout/@ins
sth_createIndex
false
sth_mark
false
sid
ins
@/@composite/@actions/@refreshFunctionTree/@ins/@functionRequest
sname
functionRequest
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
functionRequest
@/@composite/@actions/@refreshFunctionTree/@ins/@parentItem
sname
parentItem
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
parentItem
@/@composite/@actions/@refreshFunctionTree/@ins/@currentRequest
sname
currentRequest
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
currentRequest
@/@composite/@actions/@selectNextUnSetParam
sname
selectNextUnSetParam
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
//选中下一个未设置的参数，如果有返回选中的参数的树节点，否则返回null
def treeItem = actionContext.get("treeItem");
if(treeItem == null){
    treeItem = requestTree;
}

for(item in treeItem.getItems()){
    def sitem = selectNextItem(item);
    if(sitem != null){
        return sitem;
    }
}

return null;

def selectNextItem(item){
    def param = item.getData("param");
    if(param != null && !param.isReady()){
        requestTree.setSelection(item);
        contentTabFolder.setSelection(paramFnSetTabItem);
        return item;
    }else{
        for(childItem in item.getItems()){
            def sitem = selectNextItem(childItem);
            if(sitem != null){
                return sitem;
            }
        }
    }
    
    return null;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
selectNextUnSetParam
@/@composite/@actions/@selectNextUnSetParam/@ins
sisValidate
false
sname
ins
sdescriptors
xworker.lang.actions.Inout/@ins
sth_createIndex
false
sth_mark
false
sid
ins
@/@composite/@actions/@selectNextUnSetParam/@ins/@treeItem
sname
treeItem
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
treeItem
@/@composite/@actions/@initFunctionRequest
sname
initFunctionRequest
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIManager;
import org.xmeta.Thing;

actionContext.getScope(0).put("request", request);

//初始化
actions.doAction("initFullRequestTree", actionContext, ["request": request]);


if(requestTree.getItems().length > 0 && requestTree.getSelection().length == 0){
    //如果没有选择函数选择根节点
    requestTree.setSelection(requestTree.getItems()[0]);
}
treeSelection.handleEvent(null);

//在outline显示函数本身的文档
def functionRequest = request;

//编辑函数
try{
    //设置不需要修改状态的变更
    actionContext.g().put("thingForm_nomodify", true);
    thingForm.doAction("setThing", ["thing": functionRequest.getThing()]);
    saveFunctionButton.setEnabled(false);
}finally{
     actionContext.g().put("thingForm_nomodify", false);
}    

//如果是回调显示回调的参数
def focusParam = functionRequest.getFocusedParam();
if(focusParam != null){
    if(setFocusParam(requestTree, focusParam)){
       treeSelection.handleEvent(null);
    }
    
    functionRequest.setFocusedParam(null);
}else{
    //选中未设置的参数
    actions.doAction("selectNextUnSetParam");
}

def setFocusParam(item, param){
    if(item.getData("param") == param){
        requestTree.setSelection(item);
        return true;
    }else{
        for(childItem in item.getItems()){
            if(setFocusParam(childItem, param)){
                return true;
            }
        }
    }
    
    return false;
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
initFunctionRequest
@/@composite/@actions/@initHandlers
sname
initHandlers
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
handlers.put("xworker_session_function_param_swt_outline", paramHelpBrowserUIHandler);
handlers.put("xworker_session_function_function_swt_outline", functionHelpBrowserUIHandler);
handlers.put("xworker_session_swt_outline", browserUIHandler);
handlers.put("xworker_session_swt_dialogForm", formUIHandler);
handlers.put("xworker_session_swt_dialogComposite", compositeUIHandler);
handlers.put("xworker_session_swt_dialogThingEditor", thingEditorUIHandler);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
initHandlers
@/@composite/@actions/@selectRequestItem
sname
selectRequestItem
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
//该方法是在form和composite的函数界面请求时界面已经初始化的回调
//用于在函数的树上选择界面对应的函数（参数）节点

//当处于子函数等语法树已变更时重新重新刷新函数栈和语法树
if(requestTree.getItems()[0].getData() != request.getRoot()){
    actions.doAction("initFullRequestTree", actionContext, ["request": request]);
}

//选择当前函数的树节点
for(item in requestTree.getItems()){
    selectItem(requestTree, item, request, param);
}

def selectItem(tree, item, request, param){
    if((param != null && item.getData("param") == param) || (param == null && item.getData() == request)){       
        tree.select(item);
        actions.doAction("initOutlineHtml");
        return true;
    }else{
        for(childItem in item.getItems()){
            if(selectItem(tree, childItem, request, param)){
                return true;
            }
        }
    }
    
    return false;
}

def initOutlineDoc(){

}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_mark
false
sid
selectRequestItem
@/@composite/@actions/@selectRequestItem/@ins
sisValidate
false
sname
ins
sdescriptors
xworker.lang.actions.Inout/@ins
sth_createIndex
false
sth_mark
false
sid
ins
@/@composite/@actions/@selectRequestItem/@ins/@request
sname
request
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
request
@/@composite/@actions/@selectRequestItem/@ins/@param
sname
param
stypeCheck
false
soptional
true
scheck
false
scheckLevel
exception
sdescriptors
xworker.lang.actions.Inout/@ins/@param
sth_createIndex
false
sth_mark
false
sid
param
@/@composite/@actions/@onAllParameterSetted
sname
onAllParameterSetted
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;

//当所有参数都已设置的一个事件处理
def box = new MessageBox(mainComposite.getShell(), SWT.ICON_INFORMATION | SWT.OK | SWT.CANCEL);
box.setText("所有参数已设置")
box.setMessage("所有参数已经设置，是否重新执行整个函数！");
if(box.open() == SWT.OK){
    def item = requestTree.getItems()[0];
    def functionRequest = item.getData();
    if(functionRequest.getFirstUnReadyParam() != null){
        actions.doAction("selectNextUnSetParam");
    }else{
        //执行函数
        functionRequest.getFunctionAssist().stepNone();
        functionRequest.run(actionContext);    
    }
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
onAllParameterSetted
@/@composite/@actions/@initOutlineHtml
sname
initOutlineHtml
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.ui.UIRequest;
import xworker.ui.UIManager;
import xworker.ui.function.FunctionParameter;

def item = requestTree.getSelection()[0];
def functionRequest = item.getData();
def param = item.getData("param");
if(param != null){
    functionRequest = param.getValueRequest();
}
if(functionRequest != null){
    def requestThing = functionRequest.getThing();
    if(requestThing != null){
        UIManager.requestUI("xworker_session_function_swt_outline", requestThing, actionContext);
    }else{
        UIManager.requestUI("xworker_session_function_swt_outline", world.getThing("xworker.ui.function.swt.FunctionHelpDescs/@functioNotSet"), actionContext);
    }
}else{
    UIManager.requestUI("xworker_session_function_swt_outline", world.getThing("xworker.ui.function.swt.FunctionHelpDescs/@functioNotSet"), actionContext);
}

if(param != null){
    UIManager.requestUI("xworker_session_function_param_swt_outline", param.getDescriptor(), actionContext);

    if(param.getValueThing() == null){
        UIManager.requestUI("xworker_session_function_function_swt_outline", world.getThing("xworker.ui.function.xworker.OutlineMessage/@paramFunctioNotSeted"), actionContext);
    }else{
        UIManager.requestUI("xworker_session_function_function_swt_outline", param.getValueRequest().getDescriptor(), actionContext);
    }
}else{
    
    UIManager.requestUI("xworker_session_swt_outline", functionRequest.getDescriptor(), actionContext);
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
initOutlineHtml
@/@composite/@actions/@hideFunctionTree
sname
hideFunctionTree
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
//隐藏函数语法树
sashForm.setMaximizedControl(mainComposite);
setLeftSizeToolItem.setImage(application_side_expandImage);
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_mark
false
sid
hideFunctionTree
@/@composite/@actions/@autoSaveThingForm
sname
autoSaveThingForm
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;
    
//如果tihngForm修改了，自动保存thingForm
def modifyed = actionContext.g().get("thingForm_modify");
if(modifyed != null && modifyed == true){
    //取上次有变动的Item
    def item = actionContext.g().get("thingForm_item");
    def functionRequest = item.getData();
    def param = item.getData("param");
    if(param != null){
        functionRequest = param.getValueRequest();
    }
    def values = thingForm.doAction("getValues", actionContext);
    functionRequest.getThing().putAll(values);
    functionRequest.getThing().save();
    functionRequest.setDescription(values.get("description"));
    
    item.setText(functionRequest.getThing().getMetadata().getLabel() + "（" + functionRequest.getDescriptor().getMetadata().getLabel() + "）");
}
#$@text#$@
sinterpretationType
Action
screateLocalVarScope
false
ssaveReturn
false
sdebugLog
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sinheritDescription
false
sth_createIndex
false
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
sid
autoSaveThingForm
@/@shellFillLayout
sname
shellFillLayout
stype
SWT.HORIZONTAL
sxw_cl_global
false
sdescriptors
xworker.swt.Layouts/@FillLayout
sth_createIndex
false
sth_mark
false
sid
shellFillLayout
