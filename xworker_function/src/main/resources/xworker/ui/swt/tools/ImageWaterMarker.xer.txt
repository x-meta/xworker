^1627552009610
@
sname
shell
stext
图片加水印工具
sNO_TRIM
false
sCLOSE
true
sTITLE
true
sMIN
true
sMAX
true
sBORDER
false
sRESIZE
true
sON_TOP
false
sTOOL
false
sNO_FOCUS
false
swidth
800
sheight
600
scenterScreen
true
spack
false
smaximized
false
sfullScreen
false
sH_SCROLL
false
sV_SCROLL
false
sNO_BACKGROUND
false
sNO_MERGE_PAINTS
false
sNO_REDRAW_RESIZE
false
sNO_RADIO_GROUP
false
sEMBEDDED
false
sDOUBLE_BUFFERED
false
slabel
ImageWaterMarker
scapture
false
senabled
true
sredraw
true
svisible
true
sdescriptors
xworker.swt.widgets.Shell
sinheritDescription
false
sth_createIndex
true
sth_keywords
图片,水印
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
  @/@shellFillLayout
  sname
  shellFillLayout
  stype
  SWT.HORIZONTAL
  sdescriptors
  xworker.swt.Layouts/@FillLayout
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  shellFillLayout
  @/@mainComposite
  sname
  mainComposite
  sBORDER
  false
  sH_SCROLL
  false
  sV_SCROLL
  false
  sNO_BACKGROUND
  false
  sNO_FOCUS
  false
  sNO_MERGE_PAINTS
  false
  sNO_REDRAW_RESIZE
  false
  sNO_RADIO_GROUP
  false
  sEMBEDDED
  false
  sDOUBLE_BUFFERED
  false
  scapture
  false
  senabled
  true
  sredraw
  true
  svisible
  true
  sdescriptors
  xworker.swt.Widgets/@Composite
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  mainComposite
    @/@mainComposite/@mainCompositeGridLayout
    sname
    mainCompositeGridLayout
    smakeColumnsEqualWidth
    false
    smarginWidth
    5
    smarginHeight
    5
    smarginLeft
    0
    smarginTop
    0
    smarginRight
    0
    smarginBottom
    0
    shorizontalSpacing
    5
    sverticalSpacing
    5
    sdescriptors
    xworker.swt.Layouts/@GridLayout
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    mainCompositeGridLayout
    @/@mainComposite/@9121
    sname
    buttonComposite
    sBORDER
    false
    sH_SCROLL
    false
    sV_SCROLL
    false
    sNO_BACKGROUND
    false
    sNO_FOCUS
    false
    sNO_MERGE_PAINTS
    false
    sNO_REDRAW_RESIZE
    false
    sNO_RADIO_GROUP
    false
    sEMBEDDED
    false
    sDOUBLE_BUFFERED
    false
    scapture
    false
    senabled
    true
    sredraw
    true
    svisible
    true
    sdescriptors
    xworker.swt.Widgets/@Composite
    sid
    9121
      @/@mainComposite/@9121/@9122
      sname
      buttonCompositeGridData
      sstyle
      FILL_HORIZONTAL
      shorizontalIndent
      0
      swidth
      -1
      sheight
      -1
      shorizontalAlignment
      BEGINNING
      sverticalAlignment
      CENTER
      shorizontalSpan
      1
      sverticalSpan
      1
      sgrabExcessHorizontalSpace
      false
      sgrabExcessVerticalSpace
      false
      sdescriptors
      xworker.swt.layout.LayoutDatas/@GridData
      sid
      9122
      @/@mainComposite/@9121/@9123
      sname
      buttonCompositeRowLayout
      sfill
      false
      sjustify
      false
      smarginWidth
      0
      smarginHeight
      0
      smarginLeft
      3
      smarginTop
      3
      smarginRight
      3
      smarginBottom
      3
      spack
      true
      sspacing
      3
      stype
      SWT.HORIZONTAL
      swrap
      true
      sdescriptors
      xworker.swt.Layouts/@RowLayout
      sid
      9123
      @/@mainComposite/@9121/@9124
      sname
      loadImageButton
      stext
      打开图片
      stype
      SWT.PUSH
      sflat
      false
      sborder
      false
      sselected
      false
      scapture
      false
      senabled
      true
      sredraw
      true
      svisible
      true
      sdescriptors
      xworker.swt.Widgets/@Button
      sth_createIndex
      false
      sid
      9124
        @/@mainComposite/@9121/@9124/@9125
        sname
        RowData
        sexclude
        false
        swidth
        80
        sheight
        -1
        sdescriptors
        xworker.swt.layout.LayoutDatas/@RowData
        sth_createIndex
        false
        sid
        9125
        @/@mainComposite/@9121/@9124/@9126
        sname
        Listeners
        sdescriptors
        xworker.swt.widgets.Widget/@Listeners
        sth_createIndex
        false
        sid
        9126
          @/@mainComposite/@9121/@9124/@9126/@9127
          sname
          loadImageButtonSelection
          stype
          Selection
          sdescriptors
          xworker.swt.events.Listeners/@listeners/@Listener
          sth_createIndex
          false
          sid
          9127
            @/@mainComposite/@9121/@9124/@9126/@9127/@Begin
            sname
            Begin
            schangeSelf
            false
            sinterpretationType
            Self
            sattributeTemplate
            false
            schildsAttributeTemplate
            false
            svarScope
            Local
            sisSynchronized
            false
            sthrowException
            true
            suseOtherAction
            false
            screateLocalVarScope
            false
            ssaveReturn
            false
            sdisableGlobalContext
            false
            sdebugLog
            false
            sdescriptors
            xworker.lang.actions.Actions/@ActionGroup
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            Begin
              @/@mainComposite/@9121/@9124/@9126/@9127/@Begin/@actions
              sname
              actions
              sdescriptors
              xworker.lang.actions.Begin/@actions
              sinheritDescription
              false
              sth_createIndex
              false
              sth_registMyChilds
              false
              sth_registDisabled
              false
              sth_mark
              false
              sid
              actions
                @/@mainComposite/@9121/@9124/@9126/@9127/@Begin/@actions/@openFile
                sname
                openFile
                sshell
                ognl:mainComposite.getShell()
                sstyle
                OPEN
                soverwrite
                false
                sinterpretationType
                Self
                sattributeTemplate
                false
                schildsAttributeTemplate
                false
                svarScope
                Local
                sisSynchronized
                false
                sthrowException
                true
                suseOtherAction
                false
                screateLocalVarScope
                false
                ssaveReturn
                true
                sreturnVarName
                fileName
                sdisableGlobalContext
                false
                sdebugLog
                false
                sdescriptors
                xworker.swt.actions.DialogActions/@FileDialog
                sinheritDescription
                false
                sth_createIndex
                false
                sth_registMyChilds
                false
                sth_registDisabled
                false
                sth_mark
                false
                sid
                openFile
                @/@mainComposite/@9121/@9124/@9126/@9127/@Begin/@actions/@setImage
                sname
                setImage
                sisSynchronized
                false
                sthrowException
                true
                suseOtherAction
                false
                svarScope
                Local
                sdisableGlobalContext
                false
                Scode
#$@text#$@
import xworker.swt.util.ResourceManager;

if(actionContext.get("fileName") != null){
    //选择的图片
    actionContext.peek().put("parent", mainComposite);
    def image = ResourceManager.createIamge(fileName, actionContext);
    if(image != null){
        imageCanvas.setImage(image);
    }
    actionContext.getScope(0).put("image", image);
}
#$@text#$@
                sinterpretationType
                Action
                screateLocalVarScope
                false
                ssaveReturn
                false
                sswitchResult
                false
                sdebugLog
                false
                sdescriptors
                xworker.lang.actions.Actions/@GroovyAction
                sinheritDescription
                false
                sth_createIndex
                false
                sth_registMyChilds
                false
                sth_registDisabled
                false
                sth_mark
                false
                sid
                setImage
      @/@mainComposite/@9121/@9128
      sname
      saveImageButton
      stext
      保存图片
      stype
      SWT.PUSH
      sflat
      false
      sborder
      false
      sselected
      false
      scapture
      false
      senabled
      true
      sredraw
      true
      svisible
      true
      sdescriptors
      xworker.swt.Widgets/@Button
      sth_createIndex
      false
      sid
      9128
        @/@mainComposite/@9121/@9128/@9129
        sname
        RowData
        sexclude
        false
        swidth
        80
        sheight
        -1
        sdescriptors
        xworker.swt.layout.LayoutDatas/@RowData
        sth_createIndex
        false
        sid
        9129
        @/@mainComposite/@9121/@9128/@9130
        sname
        Listeners
        sdescriptors
        xworker.swt.widgets.Widget/@Listeners
        sth_createIndex
        false
        sid
        9130
          @/@mainComposite/@9121/@9128/@9130/@9131
          sname
          saveImageButtonSelection
          stype
          Selection
          sdescriptors
          xworker.swt.events.Listeners/@listeners/@Listener
          sth_createIndex
          false
          sid
          9131
            @/@mainComposite/@9121/@9128/@9130/@9131/@Begin
            sname
            Begin
            schangeSelf
            false
            sinterpretationType
            Self
            sattributeTemplate
            false
            schildsAttributeTemplate
            false
            svarScope
            Local
            sisSynchronized
            false
            sthrowException
            true
            suseOtherAction
            false
            screateLocalVarScope
            false
            ssaveReturn
            false
            sdisableGlobalContext
            false
            sdebugLog
            false
            sdescriptors
            xworker.lang.actions.Actions/@ActionGroup
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            Begin
              @/@mainComposite/@9121/@9128/@9130/@9131/@Begin/@actions
              sname
              actions
              sdescriptors
              xworker.lang.actions.Begin/@actions
              sinheritDescription
              false
              sth_createIndex
              false
              sth_registMyChilds
              false
              sth_registDisabled
              false
              sth_mark
              false
              sid
              actions
                @/@mainComposite/@9121/@9128/@9130/@9131/@Begin/@actions/@FileDialog
                sname
                FileDialog
                sshell
                ognl:saveImageButton.getShell()
                sstyle
                SAVE
                soverwrite
                true
                sinterpretationType
                Self
                sattributeTemplate
                false
                schildsAttributeTemplate
                false
                svarScope
                Local
                sisSynchronized
                false
                sthrowException
                true
                suseOtherAction
                false
                screateLocalVarScope
                false
                ssaveReturn
                true
                sreturnVarName
                fileName
                sdisableGlobalContext
                false
                sdebugLog
                false
                sdescriptors
                xworker.swt.actions.DialogActions/@FileDialog
                sinheritDescription
                false
                sth_createIndex
                false
                sth_registMyChilds
                false
                sth_registDisabled
                false
                sth_mark
                false
                sid
                FileDialog
                @/@mainComposite/@9121/@9128/@9130/@9131/@Begin/@actions/@saveFile
                sname
                saveFile
                sisSynchronized
                false
                sthrowException
                true
                suseOtherAction
                false
                svarScope
                Local
                sdisableGlobalContext
                false
                Scode
#$@text#$@
import xworker.swt.util.SwtUtils;

if(actionContext.get("fileName") != null && actionContext.get("newImage") != null){
    def file = new File(fileName);
    SwtUtils.saveImage(newImage, file);
}
#$@text#$@
                sinterpretationType
                Action
                screateLocalVarScope
                false
                ssaveReturn
                false
                sdebugLog
                false
                sdescriptors
                xworker.lang.actions.Actions/@GroovyAction
                sinheritDescription
                false
                sth_createIndex
                false
                sth_registMyChilds
                false
                sth_registDisabled
                false
                sth_mark
                false
                sid
                saveFile
    @/@mainComposite/@imageCanvas
    sname
    imageCanvas
    sdescriptors
    xworker.swt.Widgets/@ImageViewer
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    imageCanvas
      @/@mainComposite/@imageCanvas/@imageCanvasGridData
      sname
      imageCanvasGridData
      sstyle
      FILL_BOTH
      shorizontalIndent
      0
      swidth
      -1
      sheight
      -1
      shorizontalAlignment
      BEGINNING
      sverticalAlignment
      CENTER
      shorizontalSpan
      1
      sverticalSpan
      1
      sgrabExcessHorizontalSpace
      false
      sgrabExcessVerticalSpace
      false
      sdescriptors
      xworker.swt.layout.LayoutDatas/@GridData
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      imageCanvasGridData
    @/@mainComposite/@generatorComposite
    sname
    generatorComposite
    sBORDER
    false
    sH_SCROLL
    false
    sV_SCROLL
    false
    sNO_BACKGROUND
    false
    sNO_FOCUS
    false
    sNO_MERGE_PAINTS
    false
    sNO_REDRAW_RESIZE
    false
    sNO_RADIO_GROUP
    false
    sEMBEDDED
    false
    sDOUBLE_BUFFERED
    false
    scapture
    false
    senabled
    true
    sredraw
    true
    svisible
    true
    sdescriptors
    xworker.swt.Widgets/@Composite
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    generatorComposite
      @/@mainComposite/@generatorComposite/@generatorCompositeGridData
      sname
      generatorCompositeGridData
      sstyle
      FILL_HORIZONTAL
      shorizontalIndent
      0
      swidth
      -1
      sheight
      -1
      shorizontalAlignment
      BEGINNING
      sverticalAlignment
      CENTER
      shorizontalSpan
      1
      sverticalSpan
      1
      sgrabExcessHorizontalSpace
      false
      sgrabExcessVerticalSpace
      false
      sdescriptors
      xworker.swt.layout.LayoutDatas/@GridData
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      generatorCompositeGridData
      @/@mainComposite/@generatorComposite/@generatorCompositeGridLayout
      sname
      generatorCompositeGridLayout
      snumColumns
      2
      smakeColumnsEqualWidth
      false
      smarginWidth
      5
      smarginHeight
      5
      smarginLeft
      0
      smarginTop
      0
      smarginRight
      0
      smarginBottom
      0
      shorizontalSpacing
      5
      sverticalSpacing
      5
      sdescriptors
      xworker.swt.Layouts/@GridLayout
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      generatorCompositeGridLayout
      @/@mainComposite/@generatorComposite/@paramsForm
      sname
      paramsForm
      scolumn
      -1
      sH_SCROLL
      true
      sV_SCROLL
      true
      sNO_BACKGROUND
      false
      sNO_FOCUS
      false
      sNO_MERGE_PAINTS
      false
      sNO_REDRAW_RESIZE
      false
      sNO_RADIO_GROUP
      false
      sEMBEDDED
      false
      sDOUBLE_BUFFERED
      false
      sdescriptors
      xworker.swt.Widgets/@ThingForm
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      paramsForm
        @/@mainComposite/@generatorComposite/@paramsForm/@paramsFormGridData
        sname
        paramsFormGridData
        sstyle
        FILL_HORIZONTAL
        shorizontalIndent
        0
        swidth
        -1
        sheight
        -1
        shorizontalAlignment
        BEGINNING
        sverticalAlignment
        CENTER
        shorizontalSpan
        1
        sverticalSpan
        1
        sgrabExcessHorizontalSpace
        false
        sgrabExcessVerticalSpace
        false
        sdescriptors
        xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        paramsFormGridData
        @/@mainComposite/@generatorComposite/@paramsForm/@Thing
        sname
        Thing
        slabel
        ImageWaterMarker
        sdescriptors
        xworker.lang.MetaDescriptor3,xworker.swt.xworker.ThingForm/@Thing
        smany
        true
        seditCols
        3
        sinitialization
        false
        smodifier
        public
        sinheritDescription
        false
        Sdescription
#$@text#$@
<p>为图片添加文字水印，文字重复在图片上出现。</p>

<p><strong>可以重写的方法：</strong></p>

<ul>
	<li><strong>getImage</strong><br />
	返会图片文件File或文件图片路径，或Image对象。<br />
	&nbsp;</li>
	<li><strong>getSaveFile</strong><br />
	返表示图片路径的File或字符串</li>
</ul>

<p><strong>支持的格式有：</strong></p>

<ul>
	<li>&nbsp;&nbsp;SWT.IMAGE_BMP</li>
	<li>&nbsp;&nbsp;SWT.IMAGE_GIF</li>
	<li>&nbsp;&nbsp;SWT.IMAGE_ICO</li>
	<li>&nbsp;&nbsp;SWT.IMAGE_JPEG</li>
	<li>&nbsp;&nbsp;SWT.IMAGE_PNG</li>
	<li>&nbsp;&nbsp;SWT.IMAGE_TIFF</li>
</ul>
#$@text#$@
        snotXmlAttribute
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        Thing
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@text
          sname
          text
          slabel
          文字
          ssize
          60
          scolspan
          3
          sshowLabel
          true
          sreadOnly
          false
          sinheritDescription
          false
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          text
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@font
          sname
          font
          slabel
          字体
          sinputtype
          fontSelect
          sshowLabel
          true
          sreadOnly
          false
          sinheritDescription
          false
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          font
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@color
          sname
          color
          slabel
          颜色
          sinputtype
          colorpicker
          sshowLabel
          true
          sreadOnly
          false
          sinheritDescription
          false
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          color
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@angle
          sname
          degree
          slabel
          角度
          sinputtype
          select
          sshowLabel
          true
          sreadOnly
          false
          sdefault
          -45
          sinheritDescription
          false
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          angle
            @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@angle/@45
            sname
            -90
            slabel
            -90
            svalue
            -90
            sdescriptors
            xworker.lang.MetaDescriptor3/@attribute/@value
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            45
            @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@angle/@90
            sname
            -45
            slabel
            -45
            svalue
            -45
            sdescriptors
            xworker.lang.MetaDescriptor3/@attribute/@value
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            90
            @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@angle/@451
            sname
            45
            slabel
            45
            svalue
            45
            sdescriptors
            xworker.lang.MetaDescriptor3/@attribute/@value
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            451
            @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@angle/@901
            sname
            90
            svalue
            90
            sdescriptors
            xworker.lang.MetaDescriptor3/@attribute/@value
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            901
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@alpha
          sname
          alpha
          slabel
          透明度
          sshowLabel
          true
          sreadOnly
          false
          sdefault
          40
          sinheritDescription
          false
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          alpha
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@hgap
          sname
          hgap
          slabel
          水平间隔
          sshowLabel
          true
          sreadOnly
          false
          sdefault
          3
          sinheritDescription
          false
          sdescription
          <p>为文字长度的倍数。</p>
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          hgap
          @/@mainComposite/@generatorComposite/@paramsForm/@Thing/@vgap
          sname
          vgap
          slabel
          垂直间隔
          sinputtype
          text
          sshowLabel
          true
          sreadOnly
          false
          sdefault
          5
          sinheritDescription
          false
          sdescription
          <p>为文字高度的倍数。</p>
          svalidateAllowBlank
          true
          LvalidateOnBlur
          true
          LallowDecimals
          true
          LallowNegative
          true
          snotXmlAttribute
          false
          sdescriptors
          xworker.lang.MetaDescriptor3/@attribute
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          vgap
      @/@mainComposite/@generatorComposite/@previewButton
      sname
      previewButton
      stext
      预览
      stype
      SWT.PUSH
      sflat
      false
      sborder
      false
      sselected
      false
      scapture
      false
      senabled
      true
      sredraw
      true
      svisible
      true
      sdescriptors
      xworker.swt.Widgets/@Button
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      previewButton
        @/@mainComposite/@generatorComposite/@previewButton/@previewButtonGridDAta
        sname
        previewButtonGridDAta
        shorizontalIndent
        0
        swidth
        -1
        sheight
        -1
        shorizontalAlignment
        BEGINNING
        sverticalAlignment
        CENTER
        shorizontalSpan
        1
        sverticalSpan
        1
        sgrabExcessHorizontalSpace
        false
        sgrabExcessVerticalSpace
        true
        sdescriptors
        xworker.swt.layout.LayoutDatas/@GridData
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        previewButtonGridDAta
        @/@mainComposite/@generatorComposite/@previewButton/@Listeners
        sname
        Listeners
        sdescriptors
        xworker.swt.widgets.Widget/@Listeners
        sinheritDescription
        false
        sth_createIndex
        false
        sth_registMyChilds
        false
        sth_registDisabled
        false
        sth_mark
        false
        sid
        Listeners
          @/@mainComposite/@generatorComposite/@previewButton/@Listeners/@Listener
          sname
          Listener
          stype
          Selection
          sdescriptors
          xworker.swt.events.Listeners/@listeners/@Listener
          sinheritDescription
          false
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          Listener
            @/@mainComposite/@generatorComposite/@previewButton/@Listeners/@Listener/@preview
            sname
            preview
            sisSynchronized
            false
            sthrowException
            true
            suseOtherAction
            false
            svarScope
            Local
            sdisableGlobalContext
            false
            Scode
#$@text#$@
import org.xmeta.Thing;
import xworker.swt.util.SwtUtils;
import xworker.swt.util.ResourceManager;

def oldNewImage = actionContext.get("newImage");

//获取参数
def values = paramsForm.doAction("getValues", actionContext);
def waterMarker = new Thing("xworker.swt.util.graphics.ImageWaterMarker");
waterMarker.getAttributes().putAll(values);
waterMarker.put("image", "var:image");
waterMarker.put("returnImage", "true");

def newImage = waterMarker.doAction("run", actionContext, ["image": image]);
imageCanvas.setImage(newImage);
actionContext.getScope(0).put("newImage", newImage);

if(oldNewImage != null){
    oldNewImage.dispose();
}
#$@text#$@
            sinterpretationType
            Action
            screateLocalVarScope
            false
            ssaveReturn
            false
            sswitchResult
            false
            sdebugLog
            false
            sdescriptors
            xworker.lang.actions.Actions/@GroovyAction
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            preview
          @/@mainComposite/@generatorComposite/@previewButton/@Listeners/@disposeListener
          sname
          disposeListener
          stype
          Dispose
          sdescriptors
          xworker.swt.events.Listeners/@listeners/@Listener
          sinheritDescription
          false
          sth_createIndex
          false
          sth_registMyChilds
          false
          sth_registDisabled
          false
          sth_mark
          false
          sid
          disposeListener
            @/@mainComposite/@generatorComposite/@previewButton/@Listeners/@disposeListener/@dispose
            sname
            dispose
            sisSynchronized
            false
            sthrowException
            true
            suseOtherAction
            false
            svarScope
            Local
            sdisableGlobalContext
            false
            Scode
#$@text#$@
def oldNewImage = actionContext.get("newImage");
if(oldNewImage != null){
    oldNewImage.dispose();
}
#$@text#$@
            sinterpretationType
            Action
            screateLocalVarScope
            false
            ssaveReturn
            false
            sdebugLog
            false
            sdescriptors
            xworker.lang.actions.Actions/@GroovyAction
            sinheritDescription
            false
            sth_createIndex
            false
            sth_registMyChilds
            false
            sth_registDisabled
            false
            sth_mark
            false
            sid
            dispose
