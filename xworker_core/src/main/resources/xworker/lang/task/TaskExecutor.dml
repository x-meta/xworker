%1562380323221
@
sname=TaskExecutor
slabel=TaskExecutor
sdescriptors=xworker.lang.MetaDescriptor3
sextends=xworker.lang.actions.SelfAction
smany=true
seditCols=2
sinitialization=false
sgroup=_actions.task
smodifier=public
sinheritDescription=false
Sdescription=
#$@text#$@
<p><strong>任务执行器</strong></p>

<p>&nbsp;&nbsp;&nbsp; 任务执行器负责执行指定的任务，可以监控任务的执行状态，并可以通过Executor框架反馈任务的执行结果。</p>

<p><strong>变量上下文</strong></p>

<p>&nbsp;&nbsp;&nbsp; 由于Executor框架是异步的，所以任务执行器使用独立的变量上下文。可以通过Map&lt;String, Object&gt; getVariables()方法设置要保存到的变量上下文中的变量，或通过Variables子节点设置变量。</p>

<ul>
	<li><strong>taskExecutor: TaskExecutor</strong><br />
	任务执行器会以taskExecutor变量名保存到变量上下文中。</li>
</ul>

<p><strong>任务</strong></p>

<p>&nbsp;&nbsp;&nbsp; 任务在Tasks下设置，任务是动作。任务执行后会检查任务是否执行成功，默认如果动作执行没有抛出异常都返回true。</p>

<ul>
	<li><strong>boolean check&lt;TaskName&gt;(Thing task, Object result)</strong><br />
	判断动作的执行结果是否ok，其中&lt;TaskName&gt;是任务动作的名字。</li>
</ul>

<p><strong>UI请求</strong></p>

<p>&nbsp;&nbsp;&nbsp; 任务也可以有自己的UI请求，如果任务的UI请求想要同时关闭任务执行器的UI请求，可以调用taskExecutor.removeRequest()方法。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>

<p>&nbsp;&nbsp;&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
#$@text#$@
snotXmlAttribute=false
sjson_isArray=false
sth_createIndex=true
sth_registThing=child|xworker.lang.actions.Actions
sth_registMyChilds=false
sth_registDisabled=false
sth_fileMonitor=false
sth_mark=false
  @/@actions
  sname=actions
  sdescriptors=xworker.lang.MetaDescriptor3/@actions
  sinheritDescription=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=actions
    @/@actions/@run
    sname=run
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    suseOuterJava=true
    suseInnerJava=false
    souterClassName=xworker.task.TaskExecutor
    smethodName=run
    sdisableGlobalContext=false
    sattributeTemplate=false
    sinterpretationType=Action
    svarScope=Global
    screateLocalVarScope=false
    ssaveReturn=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.Actions/@JavaAction
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=run
    @/@actions/@getVariables
    sname=getVariables
    sattributeName=variables
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.ActionUtil/@GetData1
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=getVariables
    @/@actions/@requestUI
    sname=requestUI
    stimeout=3600
    svariables=taskExecutor
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.executor.ExecutorActions/@RequestUI
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=requestUI
      @/@actions/@requestUI/@Requests
      sname=Requests
      sdescriptors=xworker.lang.executor.ExecutorActions/@RequestUI/@Requests
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_fileMonitor=false
      sth_mark=false
      sid=Requests
        @/@actions/@requestUI/@Requests/@RequestComposite
        sname=RequestComposite
        sdescriptors=xworker.lang.executor.requests.RequestComposite
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=RequestComposite
          @/@actions/@requestUI/@Requests/@RequestComposite/@Composite
          sname=Composite
          sBORDER=false
          sH_SCROLL=false
          sV_SCROLL=false
          sNO_BACKGROUND=false
          sNO_FOCUS=false
          sNO_MERGE_PAINTS=false
          sNO_REDRAW_RESIZE=false
          sNO_RADIO_GROUP=false
          sEMBEDDED=false
          sDOUBLE_BUFFERED=false
          scapture=false
          senabled=true
          sredraw=true
          spack=false
          svisible=true
          sdescriptors=xworker.lang.executor.requests.RequestComposite/@Composite
          sinheritDescription=false
          sth_createIndex=false
          sth_registMyChilds=false
          sth_registDisabled=false
          sth_fileMonitor=false
          sth_mark=false
          sid=Composite
            @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@compositeFillLayout
            sname=compositeFillLayout
            stype=SWT.HORIZONTAL
            sdescriptors=xworker.swt.Layouts/@FillLayout
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=compositeFillLayout
            @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder
            sname=cTabFolder
            sstyle=TOP
            sBORDER=false
            sFLAT=false
            sCLOSE=false
            sSINGLE=false
            sMRUVisible=false
            ssimple=false
            sdisposeControlOnItemClosed=false
            suseItemTopRightControl=false
            sH_SCROLL=false
            sV_SCROLL=false
            sNO_BACKGROUND=false
            sNO_FOCUS=false
            sNO_MERGE_PAINTS=false
            sNO_REDRAW_RESIZE=false
            sNO_RADIO_GROUP=false
            sEMBEDDED=false
            sDOUBLE_BUFFERED=false
            scapture=false
            senabled=true
            sredraw=true
            spack=false
            svisible=true
            sdescriptors=xworker.swt.Widgets/@CTabFolder
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=cTabFolder
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem
              sname=resultItem
              stext=lang:d=任务列表&en=Tasks
              sCLOSE=false
              sdelayReload=false
              sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=resultItem
                @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm
                sname=tasksSashForm
                sstyle=HORIZONTAL
                sSMOOTH=false
                sweights=30,70
                sBORDER=false
                sH_SCROLL=false
                sV_SCROLL=false
                sNO_BACKGROUND=false
                sNO_FOCUS=false
                sNO_MERGE_PAINTS=false
                sNO_REDRAW_RESIZE=false
                sNO_RADIO_GROUP=false
                sEMBEDDED=false
                sDOUBLE_BUFFERED=false
                scapture=false
                senabled=true
                sredraw=true
                spack=false
                svisible=true
                sdescriptors=xworker.swt.Widgets/@SashForm
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=tasksSashForm
                  @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite
                  sname=taskListComposite
                  sBORDER=true
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  spack=false
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_fileMonitor=false
                  sth_mark=false
                  sid=taskListComposite
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@taskListCompositeGridLayout
                    sname=taskListCompositeGridLayout
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=taskListCompositeGridLayout
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@taskList
                    sname=taskList
                    sstyle=SINGLE
                    sH_SCROLL=true
                    sV_SCROLL=true
                    sBORDER=true
                    scapture=false
                    senabled=true
                    sredraw=true
                    spack=false
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@List
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=taskList
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@taskList/@taskListGridData
                      sname=taskListGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_fileMonitor=false
                      sth_mark=false
                      sid=taskListGridData
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@taskList/@onSelection
                      sname=onSelection
                      sdescriptors=xworker.swt.widgets.Widget/@Event
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_fileMonitor=false
                      sth_mark=false
                      sid=onSelection
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@taskList/@onSelection/@GroovyAction
                        sname=GroovyAction
                        sisSynchronized=false
                        sthrowException=true
                        suseOtherAction=false
                        svarScope=Local
                        sdisableGlobalContext=false
                        Scode=
#$@text#$@
def index = taskList.getSelectionIndex();

def taskThing = taskList.getData().get(index);
actionContext.g().put("taskThing", taskThing);

//更新任务状态
actions.doAction("initTaskStatus", actionContext);
#$@text#$@
                        sinterpretationType=Action
                        screateLocalVarScope=false
                        ssaveReturn=false
                        sdebugLog=false
                        sdescriptors=xworker.lang.actions.Actions/@GroovyAction
                        sinheritDescription=false
                        sth_createIndex=false
                        sth_registMyChilds=false
                        sth_registDisabled=false
                        sth_fileMonitor=false
                        sth_mark=false
                        sid=GroovyAction
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729
                    sname=buttonComposite
                    sBORDER=false
                    sH_SCROLL=false
                    sV_SCROLL=false
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    scapture=false
                    senabled=true
                    sredraw=true
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Composite
                    sid=4729
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@4730
                      sname=buttonCompositeGridData
                      sstyle=FILL_HORIZONTAL
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=END
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sid=4730
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@4731
                      sname=buttonCompositeRowLayout
                      sfill=false
                      sjustify=false
                      smarginWidth=0
                      smarginHeight=0
                      smarginLeft=3
                      smarginTop=3
                      smarginRight=3
                      smarginBottom=3
                      spack=true
                      sspacing=3
                      stype=SWT.HORIZONTAL
                      swrap=true
                      sdescriptors=xworker.swt.Layouts/@RowLayout
                      sid=4731
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@4732
                      sname=refreshButton
                      stext=lang:d=刷新&en=Refresh
                      stype=SWT.PUSH
                      sflat=false
                      sborder=false
                      sselected=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Button
                      sth_createIndex=false
                      sid=4732
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@4732/@4733
                        sname=RowData
                        sexclude=false
                        swidth=80
                        sheight=-1
                        sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                        sth_createIndex=false
                        sid=4733
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@4732/@4734
                        sname=Listeners
                        sdescriptors=xworker.swt.widgets.Widget/@Listeners
                        sth_createIndex=false
                        sid=4734
                          @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@4732/@4734/@4735
                          sname=refreshButtonSelection
                          stype=Selection
                          sref=actions:refresh
                          sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                          sth_createIndex=false
                          sid=4735
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@executeButton
                      sname=executeButton
                      stext=lang:d=执行&en=Execute
                      stype=SWT.PUSH
                      sflat=false
                      sborder=false
                      sselected=false
                      scapture=false
                      senabled=true
                      sredraw=true
                      spack=false
                      svisible=true
                      sdescriptors=xworker.swt.Widgets/@Button
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_fileMonitor=false
                      sth_mark=false
                      sid=executeButton
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@executeButton/@4733
                        sname=RowData
                        sexclude=false
                        swidth=80
                        sheight=-1
                        sdescriptors=xworker.swt.layout.LayoutDatas/@RowData
                        sth_createIndex=false
                        sid=4733
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@executeButton/@4734
                        sname=Listeners
                        sdescriptors=xworker.swt.widgets.Widget/@Listeners
                        sth_createIndex=false
                        sid=4734
                          @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskListComposite/@4729/@executeButton/@4734/@4735
                          sname=executeButtonSelection
                          stype=Selection
                          sref=actions:execute
                          sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                          sth_createIndex=false
                          sid=4735
                  @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite
                  sname=taskStatusComposite
                  sBORDER=false
                  sH_SCROLL=false
                  sV_SCROLL=false
                  sNO_BACKGROUND=false
                  sNO_FOCUS=false
                  sNO_MERGE_PAINTS=false
                  sNO_REDRAW_RESIZE=false
                  sNO_RADIO_GROUP=false
                  sEMBEDDED=false
                  sDOUBLE_BUFFERED=false
                  scapture=false
                  senabled=true
                  sredraw=true
                  spack=false
                  svisible=true
                  sdescriptors=xworker.swt.Widgets/@Composite
                  sinheritDescription=false
                  sth_createIndex=false
                  sth_registMyChilds=false
                  sth_registDisabled=false
                  sth_fileMonitor=false
                  sth_mark=false
                  sid=taskStatusComposite
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@taskStatusCompositeGridLayout
                    sname=taskStatusCompositeGridLayout
                    snumColumns=4
                    smakeColumnsEqualWidth=false
                    smarginWidth=5
                    smarginHeight=5
                    smarginLeft=0
                    smarginTop=0
                    smarginRight=0
                    smarginBottom=0
                    shorizontalSpacing=5
                    sverticalSpacing=5
                    sdescriptors=xworker.swt.Layouts/@GridLayout
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=taskStatusCompositeGridLayout
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@statusLabel
                    sname=statusLabelLabel
                    sBORDER=false
                    stype=HORIZONTAL
                    salignment=LEFT
                    stext=lang:d=状态：&en=Status:
                    scapture=false
                    senabled=true
                    sredraw=true
                    spack=false
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Label
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=statusLabel
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@statuaLabel
                    sname=statusLabel
                    sBORDER=false
                    stype=HORIZONTAL
                    salignment=LEFT
                    scapture=false
                    senabled=true
                    sredraw=true
                    spack=false
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Label
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=statuaLabel
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@statuaLabel/@statusLabelGridData
                      sname=statusLabelGridData
                      shorizontalIndent=0
                      swidth=100
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=1
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_fileMonitor=false
                      sth_mark=false
                      sid=statusLabelGridData
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@taskExecutButton
                    sname=taskExecuteButton
                    stext=lang:d=执行&en=Execute
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=false
                    sredraw=true
                    spack=false
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=taskExecutButton
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@taskExecutButton/@4734
                      sname=Listeners
                      sdescriptors=xworker.swt.widgets.Widget/@Listeners
                      sth_createIndex=false
                      sid=4734
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@taskExecutButton/@4734/@4735
                        sname=taskExecuteButtonSelection
                        stype=Selection
                        sref=actions:taskExecute
                        sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                        sth_createIndex=false
                        sid=4735
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@setUnExecutedButtuon
                    sname=setUnExecutedButtuon
                    stext=lang:d=设置未执行&en=Set Unexecuted
                    stype=SWT.PUSH
                    sflat=false
                    sborder=false
                    sselected=false
                    scapture=false
                    senabled=false
                    sredraw=true
                    spack=false
                    svisible=true
                    sdescriptors=xworker.swt.Widgets/@Button
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=setUnExecutedButtuon
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@setUnExecutedButtuon/@4734
                      sname=Listeners
                      sdescriptors=xworker.swt.widgets.Widget/@Listeners
                      sth_createIndex=false
                      sid=4734
                        @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@setUnExecutedButtuon/@4734/@4735
                        sname=refreshButtonSelection
                        stype=Selection
                        sref=actions:refresh
                        sdescriptors=xworker.swt.events.Listeners/@listeners/@Listener
                        sth_createIndex=false
                        sid=4735
                    @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@objectViewer
                    sname=objectViewer
                    sH_SCROLL=true
                    sV_SCROLL=true
                    sNO_BACKGROUND=false
                    sNO_FOCUS=false
                    sNO_MERGE_PAINTS=false
                    sNO_REDRAW_RESIZE=false
                    sNO_RADIO_GROUP=false
                    sEMBEDDED=false
                    sDOUBLE_BUFFERED=false
                    sdescriptors=xworker.swt.Widgets/@ObjectViewer
                    sinheritDescription=false
                    sth_createIndex=false
                    sth_registMyChilds=false
                    sth_registDisabled=false
                    sth_fileMonitor=false
                    sth_mark=false
                    sid=objectViewer
                      @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@resultItem/@tasksSashForm/@taskStatusComposite/@objectViewer/@objectViewerGridData
                      sname=objectViewerGridData
                      sstyle=FILL_BOTH
                      shorizontalIndent=0
                      swidth=-1
                      sheight=-1
                      shorizontalAlignment=BEGINNING
                      sverticalAlignment=CENTER
                      shorizontalSpan=4
                      sverticalSpan=1
                      sgrabExcessHorizontalSpace=false
                      sgrabExcessVerticalSpace=false
                      sdescriptors=xworker.swt.layout.LayoutDatas/@GridData
                      sinheritDescription=false
                      sth_createIndex=false
                      sth_registMyChilds=false
                      sth_registDisabled=false
                      sth_fileMonitor=false
                      sth_mark=false
                      sid=objectViewerGridData
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@actionContextItem
              sname=actionContextItem
              stext=lang:d=变量上下文&en=ActionContext
              sCLOSE=false
              sdelayReload=false
              sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=actionContextItem
                @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@actionContextItem/@actionContextViewer
                sname=actionContextViewer
                sshowStack=false
                sactionContext=ognl:taskExecutor.getActionContext()
                sdescriptors=xworker.swt.Widgets/@ActionContextViewer
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=actionContextViewer
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@executorItem
              sname=executorItem
              stext=lang:d=任务执行器&en=Task Executor
              sCLOSE=false
              sdelayReload=false
              sdescriptors=xworker.swt.custom.CTabFolder/@CTabItem
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=executorItem
                @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@cTabFolder/@executorItem/@thingEditor
                sname=thingEditor
                sthingPath=ongl:taskExecutor.getThing()
                stitle=true
                suseRootThing=false
                ssaveActionContainer=true
                sdescriptors=xworker.swt.Widgets/@ThingEditor
                sinheritDescription=false
                sth_createIndex=false
                sth_registMyChilds=false
                sth_registDisabled=false
                sth_fileMonitor=false
                sth_mark=false
                sid=thingEditor
            @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@actions
            sname=actions
            sdescriptors=xworker.swt.Widgets/@actions
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=actions
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@actions/@refresh
              sname=refresh
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
taskList.removeAll();

//执行器事物
def taskThing = taskExecutor.getThing();
thingEditor.doAction("setThing", actionContext, "thing", taskThing);

def tasks = taskThing.getThing("Tasks@0");
def index = 0;
if(tasks != null){
    int i=0; 
    def taskListThings = [];
    taskList.setData(taskListThings);
    for(task in tasks.getChilds()){
        taskList.add(task.getMetadata().getLabel());
        taskListThings.add(task);
        if(task == taskExecutor.getCurrentTask()){
            index = i;            
        }
        i++;
    }
}

taskList.setSelection(index);

if(taskExecutor.getCurrentTask() != null){
    def results = taskExecutor.getTaskResults();
    def result = results.get(taskExecutor.getCurrentTask().getMetadata().getPath());
    if(result != null){
        objectViewer.doAction("setObject", actionContext, "object", result.result);
    }
}

taskExecuteButton.setEnabled(false);
setUnExecutedButtuon.setEnabled(false);
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=refresh
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@actions/@execute
              sname=execute
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
def display = buttonComposite.getDisplay();
def actions = actions;
def actionContext = actionContext;
def taskExecutor = taskExecutor;

//在线程中执行
new Thread({
    //继续执行任务
    taskExecutor.execute();
    
    //更新任务状态
    display.asyncExec({
        actions.doAction("initTaskStatus", actionContext);
    });
}).start();
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=execute
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@actions/@initTaskStatus
              sname=initTaskStatus
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
import xworker.util.UtilData;

//可能在其它线程中执行，故作判断
if(statusLabel.isDisposed()){
    return;
}

//taskThing是taskList选中时保存到全局上下文中的
def taskResult = taskExecutor.getTaskResult(taskThing);
if(taskResult != null){
    objectViewer.doAction("setObject", actionContext, "object", taskResult.result);
    if(taskResult.finished){
        statusLabel.setText(UtilData.getString("lang:d=已结束&en=Finished", actionContext));
    }else if(taskResult.result instanceof Exception){
        statusLabel.setText(UtilData.getString("lang:d=执行异常&en=Exception", actionContext));
    }else{
        statusLabel.setText(UtilData.getString("lang:d=执行失败&en=Faile", actionContext));
    }
}else{
    statusLabel.setText(UtilData.getString("lang:d=未执行&en=Unexecuted", actionContext));
}

taskExecuteButton.setEnabled(true);
setUnExecutedButtuon.setEnabled(true);
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=initTaskStatus
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@actions/@taskExecute
              sname=taskExecute
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
def display = buttonComposite.getDisplay();
def actions = actions;
def actionContext = actionContext;
def taskExecutor = taskExecutor;

//在线程中执行
new Thread({
    //执行当前选中的任务
    taskExecutor.execute(taskThing);
    
    //更新任务状态
    display.asyncExec({
        actions.doAction("initTaskStatus", actionContext);
    });
}).start();
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=taskExecute
              @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@actions/@setUnexecuted
              sname=setTaskUnexecuted
              sisSynchronized=false
              sthrowException=true
              suseOtherAction=false
              svarScope=Local
              sdisableGlobalContext=false
              Scode=
#$@text#$@
//设置当前选中的任务为未执行
def taskResult = taskExecutor.getTaskResult(taskThing);
taskResult.finished = false;

//重新执行
actions.doAction("initTaskStatus", actionContext);
#$@text#$@
              sinterpretationType=Action
              screateLocalVarScope=false
              ssaveReturn=false
              sdebugLog=false
              sdescriptors=xworker.lang.actions.Actions/@GroovyAction
              sinheritDescription=false
              sth_createIndex=false
              sth_registMyChilds=false
              sth_registDisabled=false
              sth_fileMonitor=false
              sth_mark=false
              sid=setUnexecuted
            @/@actions/@requestUI/@Requests/@RequestComposite/@Composite/@doinit
            sname=doinit
            sisSynchronized=false
            sthrowException=true
            suseOtherAction=false
            svarScope=Local
            sdisableGlobalContext=false
            Scode=
#$@text#$@
//执行器事物
def taskThing = taskExecutor.getThing();
thingEditor.doAction("setThing", actionContext, "thing", taskThing);

actions.doAction("refresh", actionContext);
//println "parentContext=" + requestContext.get("taskExecutor");
#$@text#$@
            sinterpretationType=Action
            screateLocalVarScope=false
            ssaveReturn=false
            sdebugLog=false
            sdescriptors=xworker.swt.widgets.Widget/@Code
            sinheritDescription=false
            sth_createIndex=false
            sth_registMyChilds=false
            sth_registDisabled=false
            sth_fileMonitor=false
            sth_mark=false
            sid=doinit
      @/@actions/@requestUI/@actions
      sname=actions
      sdescriptors=xworker.lang.actions.SelfAction/@actions1
      sinheritDescription=false
      sth_createIndex=false
      sth_registMyChilds=false
      sth_registDisabled=false
      sth_fileMonitor=false
      sth_mark=false
      sid=actions
        @/@actions/@requestUI/@actions/@ok
        sname=ok
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        suseOuterJava=true
        suseInnerJava=false
        souterClassName=xworker.task.TaskExecutor
        smethodName=requestOk
        sdisableGlobalContext=false
        sattributeTemplate=false
        sinterpretationType=Action
        svarScope=Global
        screateLocalVarScope=false
        ssaveReturn=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@JavaAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=ok
        @/@actions/@requestUI/@actions/@getLabel
        sname=getLabel
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        suseOuterJava=true
        suseInnerJava=false
        souterClassName=xworker.task.TaskExecutor
        smethodName=getLabel
        sdisableGlobalContext=false
        sattributeTemplate=false
        sinterpretationType=Action
        svarScope=Global
        screateLocalVarScope=false
        ssaveReturn=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@JavaAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=getLabel
        @/@actions/@requestUI/@actions/@getMessageId
        sname=getMessageId
        sisSynchronized=false
        sthrowException=true
        suseOtherAction=false
        suseOuterJava=true
        suseInnerJava=false
        souterClassName=xworker.task.TaskExecutor
        smethodName=getMessageId
        sdisableGlobalContext=false
        sattributeTemplate=false
        sinterpretationType=Action
        svarScope=Global
        screateLocalVarScope=false
        ssaveReturn=false
        sdebugLog=false
        sdescriptors=xworker.lang.actions.Actions/@JavaAction
        sinheritDescription=false
        sth_createIndex=false
        sth_registMyChilds=false
        sth_registDisabled=false
        sth_fileMonitor=false
        sth_mark=false
        sid=getMessageId
    @/@actions/@isFinishNotify
    sname=isFinishNotify
    sattributeName=finishNotify
    sBoolean=false
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.ActionUtil/@GetBoolean
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=isFinishNotify
    @/@actions/@isExceptionNotify
    sname=isExceptionNotify
    sattributeName=exceptionNotify
    sBoolean=false
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.ActionUtil/@GetBoolean
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=isExceptionNotify
    @/@actions/@isCheckNotify
    sname=isCheckNotify
    sattributeName=checkNotify
    sBoolean=false
    sinterpretationType=Self
    sattributeTemplate=false
    schildsAttributeTemplate=false
    svarScope=Local
    sisSynchronized=false
    sthrowException=true
    suseOtherAction=false
    screateLocalVarScope=false
    ssaveReturn=false
    sdisableGlobalContext=false
    sdebugLog=false
    sdescriptors=xworker.lang.actions.ActionUtil/@GetBoolean
    sinheritDescription=false
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=isCheckNotify
  @/@name
  sname=name
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sinheritDescription=false
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=name
  @/@label
  sname=label
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sinheritDescription=false
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=label
  @/@variables
  sname=variables
  sinputtype=textarea
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sinheritDescription=false
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=variables
  @/@exceptionNotify
  sname=exceptionNotify
  sinputtype=truefalse
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sdefault=true
  sinheritDescription=false
  sdescription=<p>执行任务异常时是否通知。</p>
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=exceptionNotify
  @/@checkNotify
  sname=checkNotify
  sinputtype=truefalse
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sdefault=true
  sinheritDescription=false
  sdescription=<p>当检测一个任务失败时，是否通知。</p>
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=checkNotify
  @/@finishNotify
  sname=finishNotify
  sinputtype=truefalse
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sdefault=false
  sinheritDescription=false
  sdescription=<p>执行完毕后是否发送通知。</p>
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=finishNotify
  @/@description
  sname=description
  sinputtype=html
  sshowLabel=true
  slabelAlign=right
  slabelVAlign=baseline
  smodifier=public
  sreadOnly=false
  sinheritDescription=false
  svalidateAllowBlank=true
  LvalidateOnBlur=true
  LallowDecimals=true
  LallowNegative=true
  snotXmlAttribute=false
  sdescriptors=xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=description
  @/@Tasks
  sname=Tasks
  sdescriptors=xworker.lang.MetaDescriptor3/@thing
  sextends=xworker.lang.actions.Actions
  smany=true
  seditCols=2
  sinitialization=false
  smodifier=public
  sinheritDescription=false
  sdescription=<p>任务列表，每一个任务都是一个动作。</p>
  snotXmlAttribute=false
  sjson_isArray=false
  sth_createIndex=false
  sth_registMyChilds=false
  sth_registDisabled=false
  sth_fileMonitor=false
  sth_mark=false
  sid=Tasks
    @/@Tasks/@name
    sname=name
    sshowLabel=true
    slabelAlign=right
    slabelVAlign=baseline
    smodifier=public
    sreadOnly=false
    sinheritDescription=false
    svalidateAllowBlank=true
    LvalidateOnBlur=true
    LallowDecimals=true
    LallowNegative=true
    snotXmlAttribute=false
    sdescriptors=xworker.lang.MetaDescriptor3/@attribute
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=name
    @/@Tasks/@label
    sname=label
    sshowLabel=true
    slabelAlign=right
    slabelVAlign=baseline
    smodifier=public
    sreadOnly=false
    sinheritDescription=false
    svalidateAllowBlank=true
    LvalidateOnBlur=true
    LallowDecimals=true
    LallowNegative=true
    snotXmlAttribute=false
    sdescriptors=xworker.lang.MetaDescriptor3/@attribute
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=label
    @/@Tasks/@description
    sname=description
    sinputtype=html
    sshowLabel=true
    slabelAlign=right
    slabelVAlign=baseline
    smodifier=public
    sreadOnly=false
    sinheritDescription=false
    svalidateAllowBlank=true
    LvalidateOnBlur=true
    LallowDecimals=true
    LallowNegative=true
    snotXmlAttribute=false
    sdescriptors=xworker.lang.MetaDescriptor3/@attribute
    sth_createIndex=false
    sth_registMyChilds=false
    sth_registDisabled=false
    sth_fileMonitor=false
    sth_mark=false
    sid=description
