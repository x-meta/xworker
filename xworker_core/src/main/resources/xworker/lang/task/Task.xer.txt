^1571819410745
@
sname
Task
slabel
Task
sdescriptors
xworker.lang.MetaDescriptor3
sextends
xworker.lang.actions.SelfAction
smany
true
seditCols
2
sinitialization
false
sgroup
常用.动作
smodifier
public
sinheritDescription
false
sicon
icons/clock_go.png
Sdescription
#$@text#$@
<p>任务是通过ExecutorService执行的动作，可以是周期性任务也可以是一次性任务。执行后返回的是xworker.task.Task对象，如果未激活或已执行完毕返回null。</p>

<p><strong>带入的变量params（Map&lt;String, Object&gt;）</strong></p>

<p>&nbsp;&nbsp;&nbsp; 如果params设置了则从变量上下文中获取，支持ognl:var:等，否则或者通过Variables子节点设置，返回的是Map&lt;String, Object&gt;。</p>

<p><strong>需要实现的方法</strong></p>

<ul>
	<li><strong>doTask</strong><br />
	执行任务的方法。传入参数task，task是xworker.task.Task对象。</li>
	<li><strong>callback</strong><br />
	如果callback=true。传入参数task和result，result是doTask的返回值。</li>
	<li><strong>callbackCacnel</strong><br />
	如果callbakCacnel=true。传入参数task和status，如果取消成功status=true，否则status=false。</li>
</ul>

<p><strong>定时任务</strong></p>

<p>&nbsp;&nbsp;&nbsp; 在Schedule中设置。</p>

<p><strong>固定日期的定时任务</strong></p>

<p>&nbsp;&nbsp;&nbsp; 比如每天三点中执行的任务，那么选择fixTime=true,fixTimeStr=03:00，timeUnit=DAYS，period=1。</p>
#$@text#$@
snotXmlAttribute
false
sjson_isArray
false
sen_group
Common.Actions
sth_createIndex
true
sth_registThing
child|xworker.lang.util.DescriptorsIndex
sth_registMyChilds
false
sth_registDisabled
false
sth_mark
false
  @/@actions
  sname
  actions
  sdescriptors
  xworker.lang.MetaDescriptor3/@actions
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  actions
    @/@actions/@run
    sname
    run
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    suseOuterJava
    true
    souterClassName
    xworker.task.TaskManager
    smethodName
    run
    sdisableGlobalContext
    false
    sattributeTemplate
    false
    sinterpretationType
    Action
    svarScope
    Global
    screateLocalVarScope
    false
    ssaveReturn
    false
    sdescriptors
    xworker.lang.actions.Actions/@JavaAction
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    run
    @/@actions/@doTask
    sname
    doTask
    sunimplementedException
    false
    sdescriptors
    xworker.lang.actions.Actions/@NOOP
    sinterpretationType
    Self
    sattributeTemplate
    false
    schildsAttributeTemplate
    false
    svarScope
    Local
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    screateLocalVarScope
    false
    ssaveReturn
    false
    sdisableGlobalContext
    false
    sdebugLog
    false
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    doTask
    @/@actions/@stop
    sname
    stop
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    suseOuterJava
    true
    suseInnerJava
    false
    souterClassName
    xworker.task.TaskManager
    smethodName
    stop
    sdisableGlobalContext
    false
    sattributeTemplate
    false
    sinterpretationType
    Action
    svarScope
    Global
    screateLocalVarScope
    false
    ssaveReturn
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.Actions/@JavaAction
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    stop
    @/@actions/@getParams
    sname
    getParams
    sattributeName
    params
    sinterpretationType
    Self
    sattributeTemplate
    false
    schildsAttributeTemplate
    false
    svarScope
    Local
    sisSynchronized
    false
    sthrowException
    true
    suseOtherAction
    false
    screateLocalVarScope
    false
    ssaveReturn
    false
    sdisableGlobalContext
    false
    sdebugLog
    false
    sdescriptors
    xworker.lang.actions.ActionUtil/@GetData1
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_fileMonitor
    false
    sth_mark
    false
    sid
    getParams
  @/@VariablesDescs
  sname
  VariablesDescs
  sdescriptors
  xworker.lang.MetaThing/@VariablesDesc
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_fileMonitor
  false
  sth_mark
  false
  sid
  VariablesDescs
    @/@VariablesDescs/@var
    sname
    var
    svarName
    _thingName_
    spassive
    true
    stype
    object
    sclassName
    xworker.task.Task
    sdescriptors
    xworker.lang.MetaThing/@VariablesDesc/@Object
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_fileMonitor
    false
    sth_mark
    false
    sid
    var
  @/@name
  sname
  name
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  name
  @/@label
  sname
  label
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  label
  @/@group
  sname
  group
  ssize
  60
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  group
  @/@enable
  sname
  enable
  sinputtype
  truefalse
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  true
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  false
  LallowDecimals
  false
  LallowNegative
  false
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sid
  enable
  @/@callback
  sname
  callback
  sinputtype
  truefalse
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  false
  sinheritDescription
  false
  sdescription
  <p>如果为true，那么执行完毕时会调用本事物的callback方法。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  callback
  @/@callbackCancel
  sname
  callbackCancel
  sinputtype
  truefalse
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  false
  sinheritDescription
  false
  Sdescription
#$@text#$@
<p>如果为true，那么在任务被取消时会调用本事物的callbackCancel方法。</p>

<p><strong>参数：</strong></p>

<p>&nbsp;&nbsp;&nbsp; task<br />
&nbsp;&nbsp;&nbsp; status，是否取消成功，如果任务正在执行且当前线程并不能终止，那么可能需要等待其自行运行结束。</p>
#$@text#$@
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  callbackCancel
  @/@singleInstance
  sname
  singleInstance
  sinputtype
  truefalse
  sshowLabel
  true
  slabelAlign
  right
  slabelVAlign
  baseline
  smodifier
  public
  sreadOnly
  false
  sinheritDescription
  false
  sdescription
  <p>只针对非定期执行的任务，定期执行的任务只有一个实例。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  snotXmlAttribute
  false
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  singleInstance
  @/@saveAsGlobalVar
  sname
  saveAsGlobalVar
  sinputtype
  truefalse
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  false
  sinheritDescription
  false
  sdescription
  <p>是否保存为全局变量，即actionContext.getScope(0).put(self.getMetadata().getName(), task);</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  saveAsGlobalVar
  @/@params
  sname
  params
  ssize
  60
  sshowLabel
  true
  slabelAlign
  right
  slabelVAlign
  baseline
  smodifier
  public
  sreadOnly
  false
  sinheritDescription
  false
  sdescription
  <p>如果不为空，通过UtilData获取参数，参数的类型是Map&lt;String, Object&gt;。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  snotXmlAttribute
  false
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  params
  @/@description
  sname
  description
  sinputtype
  html
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  description
  @/@schedule
  sname
  schedule
  sinputtype
  truefalse
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  sdescription
  <p>如果为true则当前任务是计划任务。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  schedule
  @/@delay
  sname
  delay
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  delay
  @/@period
  sname
  period
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  sdescription
  <p>如果值大于0当前事物是定期执行的任务，时间间隔是period的值。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  period
  @/@fixedRate
  sname
  fixedRate
  sinputtype
  truefalse
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  false
  sinheritDescription
  false
  sdescription
  <p>如果fixedRate=true那么是定点任务，即每次执行的间隔的起点是以起始时算的，下次会扣去执行的时间，比如如果想每个整点执行任务那么应该fixedRate=true，否则每次执行完后的下次任务都会有一定的延迟，而延迟的时间正好是执行的时间。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  fixedRate
  @/@TimeUnit
  sname
  timeUnit
  sinputtype
  select
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  MILLISECONDS
  sinheritDescription
  false
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  TimeUnit
    @/@TimeUnit/@DAYS
    sname
    DAYS
    slabel
    DAYS
    svalue
    DAYS
    sdescriptors
    xworker.lang.MetaDescriptor3/@attribute/@value
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    DAYS
    @/@TimeUnit/@HOURS
    sname
    HOURS
    slabel
    HOURS
    svalue
    HOURS
    sdescriptors
    xworker.lang.MetaDescriptor3/@attribute/@value
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    HOURS
    @/@TimeUnit/@MILLISECONDS
    sname
    MILLISECONDS
    slabel
    MILLISECONDS
    svalue
    MILLISECONDS
    sdescriptors
    xworker.lang.MetaDescriptor3/@attribute/@value
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    MILLISECONDS
    @/@TimeUnit/@MINUTES
    sname
    MINUTES
    slabel
    MINUTES
    svalue
    MINUTES
    sdescriptors
    xworker.lang.MetaDescriptor3/@attribute/@value
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    MINUTES
    @/@TimeUnit/@SECONDS
    sname
    SECONDS
    slabel
    SECONDS
    svalue
    SECONDS
    sdescriptors
    xworker.lang.MetaDescriptor3/@attribute/@value
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_mark
    false
    sid
    SECONDS
  @/@fixTime
  sname
  fixTime
  sinputtype
  truefalse
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  false
  sinheritDescription
  false
  sdescription
  <p>是否是每天固定时间点的任务。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  fixTime
  @/@fixTimeStr
  sname
  fixTimeStr
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  Sdescription
#$@text#$@
<p><strong>格式固定有以下几种：</strong></p>

<p>&nbsp;&nbsp;&nbsp; yyyy-MM-dd HH:mm:ss，月日时分秒，比如：2014-12-12 12:12:12，12月12日12时12分12秒，如2014年的12月12日12分12秒。&nbsp;</p>

<p>&nbsp;&nbsp; &nbsp;MM-dd HH:mm:ss，月日时分秒，比如：12-12 12:12:12，12月12日12时12分12秒，如每年的12月12日12分12秒。</p>

<p>&nbsp;&nbsp;&nbsp; dd HH:mm:ss，日时分秒，比如12 12:12:12 ，12日12时12分12秒，如每月的12日12时12分12秒。</p>

<p>&nbsp;&nbsp;&nbsp; HH:mm:ss，时分秒，比如12:12:12，12时12分12秒，如每天的12时12分12秒。</p>

<p>&nbsp;&nbsp;&nbsp; mm:ss，分秒，比如：12:12，12分12秒，如每小时的第12分12秒。</p>

<p>&nbsp;&nbsp;&nbsp; ss，秒，比如12，12秒，如每分钟的第12秒。</p>
#$@text#$@
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  fixTimeStr
  @/@executeCount
  sname
  executeCount
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sinheritDescription
  false
  sdescription
  <p>执行总次数。</p>
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  executeCount
  @/@calculatePassCount
  sname
  calculatePassCount
  sinputtype
  truefalse
  sgroup
  Schedule
  sshowLabel
  true
  sreadOnly
  false
  sdefault
  false
  sinheritDescription
  false
  Sdescription
#$@text#$@
<p>如果是定点任务并且限定了总的执行次数，且定时的起始时间是过去的时间，那么在过去到现在的时间里算不算执行次数。</p>

<p>比如每天执行30此，从凌晨开始算，那么任务是中午启动的，就应该累加中午之前应该执行的次数。</p>
#$@text#$@
  svalidateAllowBlank
  true
  LvalidateOnBlur
  true
  LallowDecimals
  true
  LallowNegative
  true
  sdescriptors
  xworker.lang.MetaDescriptor3/@attribute
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_mark
  false
  sid
  calculatePassCount
  @/@actions1
  sname
  actions
  slabel
  Actions
  sdescriptors
  xworker.lang.MetaDescriptor2/@thing
  sextends
  xworker.lang.actions.Actions
  smany
  true
  seditCols
  2
  Sdescription
#$@text#$@
<p>动作集合，通过子节点可以添加各种动作，动作通常是一个可执行的程序。</p>
<p>事物的第一个动作集合的子事物才可以作为事物的行为，第二个及其他动作集合就不能作为事物的行为使用了，事物的行为默认找第一个动作集合。</p>
<p>事物的run方法一般是这个事物转化为动作之后执行的方法。</p>
#$@text#$@
  szh_label
  动作
  sth_createIndex
  false
  sid
  actions1
    @/@actions1/@name
    sname
    name
    sdescriptors
    xworker.lang.MetaDescriptor2/@attribute
    sid
    name
  @/@sswtMenus
  sname
  sswtMenus
  sdescriptors
  xworker.lang.MetaDescriptor3/@swtMenus
  sinheritDescription
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  sswtMenus
    @/@sswtMenus/@menuDefine
    sname
    menuDefine
    sdescriptors
    xworker.lang.MetaDescriptor3/@swtMenus/@menuDefine
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    menuDefine
      @/@sswtMenus/@menuDefine/@task
      sname
      task
      slabel
      任务
      sdescriptors
      xworker.lang.ThingMenu/@menuDefine/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      task
    @/@sswtMenus/@task
    sname
    task
    smenuType
    task
    sdescriptors
    xworker.lang.MetaDescriptor3/@swtMenus/@menuSetting
    sinheritDescription
    false
    sth_createIndex
    false
    sth_registMyChilds
    false
    sth_registDisabled
    false
    sth_mark
    false
    sid
    task
      @/@sswtMenus/@task/@taskRun
      sname
      taskRun
      slabel
      运行任务
      surl
      action:run
      sisSplit
      false
      sattachParam
      true
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      taskRun
      @/@sswtMenus/@task/@stopTask
      sname
      stopTask
      slabel
      取消任务
      surl
      action:stop
      sisSplit
      false
      sattachParam
      true
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      stopTask
      @/@sswtMenus/@task/@split1
      sname
      split1
      sisSplit
      true
      sattachParam
      true
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      split1
      @/@sswtMenus/@task/@openTaskManager
      sname
      openTaskManager
      slabel
      打开任务管理器
      sisSplit
      false
      sattachParam
      true
      sdescriptors
      xworker.lang.ThingMenu/@menuSetting/@menu
      sinheritDescription
      false
      sth_createIndex
      false
      sth_registMyChilds
      false
      sth_registDisabled
      false
      sth_mark
      false
      sid
      openTaskManager
  @/@Variables
  sname
  TaskVariables
  sdescriptors
  xworker.lang.MetaDescriptor3/@thing
  sextends
  xworker.lang.actions.Actions
  smany
  true
  seditCols
  2
  sinitialization
  false
  smodifier
  public
  sinheritDescription
  false
  Sdescription
#$@text#$@
<p>Task是异步执行的，可以通过TaskVariables设置要传入的变量。子节点是动作，动作执行后的返回值作为变量传入。</p>

<p>同时可以使用Map&lt;String, Object&gt; getParams()设置传入的变量，二者同时生效，TaskVariables优先级更高。</p>

<p>&nbsp;</p>
#$@text#$@
  snotXmlAttribute
  false
  sjson_isArray
  false
  sth_createIndex
  false
  sth_registMyChilds
  false
  sth_registDisabled
  false
  sth_mark
  false
  sid
  Variables
